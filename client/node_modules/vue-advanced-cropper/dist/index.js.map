{"version":3,"file":"index.js","sources":["../node_modules/classnames/index.js","../node_modules/easy-bem/index.js","../node_modules/debounce/index.js","../src/utils/constants.js","../src/utils/core.js","../src/utils/events.js","../src/mixins/draggable.js","../src/components/service/DraggableElement.vue?rollup-plugin-vue=script.js","../src/components/service/DraggableElement.vue","../src/components/service/HandlerWrapper.vue?rollup-plugin-vue=script.js","../src/components/service/HandlerWrapper.vue","../src/components/service/LineWrapper.vue?rollup-plugin-vue=script.js","../src/components/service/LineWrapper.vue","../src/components/service/BoundingBox.vue?rollup-plugin-vue=script.js","../src/components/service/BoundingBox.vue","../src/components/service/DraggableArea.vue?rollup-plugin-vue=script.js","../src/components/service/DraggableArea.vue","../src/components/service/PreviewResult.vue?rollup-plugin-vue=script.js","../src/components/service/PreviewResult.vue","../src/components/handlers/SimpleHandler.vue?rollup-plugin-vue=script.js","../src/components/handlers/SimpleHandler.vue","../src/components/lines/SimpleLine.vue?rollup-plugin-vue=script.js","../src/components/lines/SimpleLine.vue","../src/components/stencils/RectangleStencil.vue?rollup-plugin-vue=script.js","../src/components/stencils/RectangleStencil.vue","../src/components/stencils/CircleStencil.vue?rollup-plugin-vue=script.js","../src/components/stencils/CircleStencil.vue","../src/Cropper.vue?rollup-plugin-vue=script.js","../src/Cropper.vue","../src/components/helpers/PreviewImage.vue?rollup-plugin-vue=script.js","../src/components/helpers/PreviewImage.vue","../src/index.js"],"sourcesContent":["/*!\n  Copyright (c) 2017 Jed Watson.\n  Licensed under the MIT License (MIT), see\n  http://jedwatson.github.io/classnames\n*/\n/* global define */\n\n(function () {\n\t'use strict';\n\n\tvar hasOwn = {}.hasOwnProperty;\n\n\tfunction classNames () {\n\t\tvar classes = [];\n\n\t\tfor (var i = 0; i < arguments.length; i++) {\n\t\t\tvar arg = arguments[i];\n\t\t\tif (!arg) continue;\n\n\t\t\tvar argType = typeof arg;\n\n\t\t\tif (argType === 'string' || argType === 'number') {\n\t\t\t\tclasses.push(arg);\n\t\t\t} else if (Array.isArray(arg) && arg.length) {\n\t\t\t\tvar inner = classNames.apply(null, arg);\n\t\t\t\tif (inner) {\n\t\t\t\t\tclasses.push(inner);\n\t\t\t\t}\n\t\t\t} else if (argType === 'object') {\n\t\t\t\tfor (var key in arg) {\n\t\t\t\t\tif (hasOwn.call(arg, key) && arg[key]) {\n\t\t\t\t\t\tclasses.push(key);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn classes.join(' ');\n\t}\n\n\tif (typeof module !== 'undefined' && module.exports) {\n\t\tclassNames.default = classNames;\n\t\tmodule.exports = classNames;\n\t} else if (typeof define === 'function' && typeof define.amd === 'object' && define.amd) {\n\t\t// register as 'classnames', consistent with npm package name\n\t\tdefine('classnames', [], function () {\n\t\t\treturn classNames;\n\t\t});\n\t} else {\n\t\twindow.classNames = classNames;\n\t}\n}());\n","'use strict';\r\n\r\n/**\r\n * BEM class name factory.\r\n *\r\n * @typedef {Function} Bem\r\n * @param {String|Object} [elementOrMods] Element name or hash object with mods\r\n * @param {Object} [mods] Hash object with mods\r\n * @returns {String}\r\n */\r\n\r\n/**\r\n * Returns BEM class name factory.\r\n *\r\n * @param {String} componentName Block name\r\n * @returns {Bem}\r\n */\r\nmodule.exports = function bem(componentName) {\r\n    return function (elementOrMods, mods) {\r\n        if (!elementOrMods) {\r\n            return componentName;\r\n        }\r\n\r\n        var element;\r\n\r\n        if (typeof elementOrMods === 'string') {\r\n            element = elementOrMods;\r\n        } else {\r\n            mods = elementOrMods;\r\n        }\r\n\r\n        var base = componentName;\r\n        if (element) {\r\n            base += '__' + element;\r\n        }\r\n\r\n        return base + (\r\n            mods\r\n                ? Object.keys(mods).reduce(function (result, name) {\r\n                    var value = mods[name];\r\n\r\n                    if (value) {\r\n                        result += ' ' + (\r\n                            typeof value === 'boolean'\r\n                                ? (base + '--' + name)\r\n                                : (base + '--' + name + '_' + value)\r\n                        );\r\n                    }\r\n\r\n                    return result;\r\n                }, '')\r\n                : ''\r\n        );\r\n    };\r\n}\r\n","/**\n * Returns a function, that, as long as it continues to be invoked, will not\n * be triggered. The function will be called after it stops being called for\n * N milliseconds. If `immediate` is passed, trigger the function on the\n * leading edge, instead of the trailing. The function also has a property 'clear' \n * that is a function which will clear the timer to prevent previously scheduled executions. \n *\n * @source underscore.js\n * @see http://unscriptable.com/2009/03/20/debouncing-javascript-methods/\n * @param {Function} function to wrap\n * @param {Number} timeout in ms (`100`)\n * @param {Boolean} whether to execute at the beginning (`false`)\n * @api public\n */\nfunction debounce(func, wait, immediate){\n  var timeout, args, context, timestamp, result;\n  if (null == wait) wait = 100;\n\n  function later() {\n    var last = Date.now() - timestamp;\n\n    if (last < wait && last >= 0) {\n      timeout = setTimeout(later, wait - last);\n    } else {\n      timeout = null;\n      if (!immediate) {\n        result = func.apply(context, args);\n        context = args = null;\n      }\n    }\n  };\n\n  var debounced = function(){\n    context = this;\n    args = arguments;\n    timestamp = Date.now();\n    var callNow = immediate && !timeout;\n    if (!timeout) timeout = setTimeout(later, wait);\n    if (callNow) {\n      result = func.apply(context, args);\n      context = args = null;\n    }\n\n    return result;\n  };\n\n  debounced.clear = function() {\n    if (timeout) {\n      clearTimeout(timeout);\n      timeout = null;\n    }\n  };\n  \n  debounced.flush = function() {\n    if (timeout) {\n      result = func.apply(context, args);\n      context = args = null;\n      \n      clearTimeout(timeout);\n      timeout = null;\n    }\n  };\n\n  return debounced;\n};\n\n// Adds compatibility for ES modules\ndebounce.debounce = debounce;\n\nmodule.exports = debounce;\n","export const WEST = 1\r\nexport const WEST_NORTH = 2\r\nexport const NORTH = 3\r\nexport const EAST_NORTH = 4\r\nexport const EAST = 5\r\nexport const EAST_SOUTH = 6\r\nexport const SOUTH = 7\r\nexport const WEST_SOUTH = 8\r\n\r\nexport const HORIZONTAL_DIRECTIONS = ['left', 'right']\r\nexport const VERTICAL_DIRECTIONS = ['top', 'bottom']\r\nexport const ALL_DIRECTIONS = ['left', 'right', 'top', 'bottom']\r\n","import {\n\tHORIZONTAL_DIRECTIONS,\n\tVERTICAL_DIRECTIONS,\n\tALL_DIRECTIONS\n} from './constants'\n\nfunction fitConditions(oldDirections, coordinates, restrictions, coefficient, imageSize, ratioBroken) {\n\n\tconst { minHeight, minWidth, maxHeight, maxWidth } = restrictions\n\tconst directions = { ...oldDirections }\n\n\tconst currentWidth = coordinates.width + coefficient * (directions.left + directions.right)\n\tconst currentHeight = coordinates.height + coefficient * (directions.top + directions.bottom)\n\n\tif (currentWidth < 0) {\n\t\tif (directions.left < 0 && directions.right < 0) {\n\t\t\tdirections.left = -(coordinates.width - minWidth) / (directions.left / directions.right)\n\t\t\tdirections.right = -(coordinates.width - minWidth) / (directions.right / directions.left)\n\t\t} else if (directions.left < 0) {\n\t\t\tdirections.left = -(coordinates.width - minWidth) / coefficient\n\t\t} else if (directions.right < 0) {\n\t\t\tdirections.right = -(coordinates.width - minWidth) / coefficient\n\t\t}\n\t}\n\n\tif (currentHeight < 0) {\n\t\tif (directions.top < 0 && directions.bottom < 0) {\n\t\t\tdirections.top = -(coordinates.height - minHeight) / (directions.top / directions.bottom)\n\t\t\tdirections.bottom = -(coordinates.height - minHeight) / (directions.bottom / directions.top)\n\t\t} else if (directions.top < 0) {\n\t\t\tdirections.top = -(coordinates.height - minHeight)\n\t\t} else if (directions.bottom < 0) {\n\t\t\tdirections.bottom = -(coordinates.height - minHeight)\n\t\t}\n\t}\n\n\tconst maxMultiplier = {\n\t\twidth: Infinity,\n\t\theight: Infinity\n\t}\n\n\tif (directions.right + directions.left) {\n\t\t// Break right border\n\t\tif (Math.ceil(coordinates.left + coordinates.width + coefficient * directions.right) > imageSize.width) {\n\t\t\tmaxMultiplier.width = Math.min(\n\t\t\t\tmaxMultiplier.width,\n\t\t\t\tMath.abs(Math.floor(imageSize.width - (coordinates.left + coordinates.width)) / (coefficient * directions.right))\n\t\t\t)\n\t\t}\n\t\t// Break left border\n\t\tif (coordinates.left - coefficient * directions.left < 0) {\n\t\t\tmaxMultiplier.width = Math.min(\n\t\t\t\tmaxMultiplier.width,\n\t\t\t\tMath.abs((coordinates.left) / (coefficient * directions.left))\n\t\t\t)\n\t\t}\n\n\t\t// Break min width\n\t\tif (currentWidth < minWidth) {\n\t\t\tmaxMultiplier.width = Math.min(\n\t\t\t\tmaxMultiplier.width,\n\t\t\t\tMath.abs((coordinates.width - minWidth) / ((directions.right + directions.left) * coefficient))\n\t\t\t)\n\t\t}\n\t\t// Break max width\n\t\tif (currentWidth > maxWidth) {\n\t\t\tmaxMultiplier.width = Math.min(\n\t\t\t\tmaxMultiplier.width,\n\t\t\t\tMath.abs((maxWidth - coordinates.width) / ((directions.right + directions.left) * coefficient))\n\t\t\t)\n\t\t}\n\t}\n\n\tif (directions.top + directions.bottom) {\n\t\t// Break bottom border\n\t\tif (Math.ceil(coordinates.top + coordinates.height + coefficient * directions.bottom) > imageSize.height) {\n\t\t\tmaxMultiplier.height = Math.min(\n\t\t\t\tmaxMultiplier.height,\n\t\t\t\tMath.abs(Math.floor(imageSize.height - (coordinates.top + coordinates.height)) / (coefficient * directions.bottom))\n\t\t\t)\n\t\t}\n\t\t// Break top border\n\t\tif (coordinates.top - coefficient * directions.top < 0) {\n\t\t\tmaxMultiplier.height = Math.min(\n\t\t\t\tmaxMultiplier.height,\n\t\t\t\tMath.abs((coordinates.top) / (coefficient * directions.top))\n\t\t\t)\n\t\t}\n\t\t// Break min height\n\t\tif (currentHeight < minHeight) {\n\t\t\tmaxMultiplier.height = Math.min(\n\t\t\t\tmaxMultiplier.height,\n\t\t\t\tMath.abs((coordinates.height - minHeight) / ((directions.top + directions.bottom) * coefficient))\n\t\t\t)\n\t\t}\n\t\t// Break max height\n\t\tif (currentHeight > maxHeight) {\n\t\t\tmaxMultiplier.height = Math.min(\n\t\t\t\tmaxMultiplier.height,\n\t\t\t\tMath.abs((maxHeight - coordinates.height) / ((directions.top + directions.bottom) * coefficient))\n\t\t\t)\n\t\t}\n\t}\n\n\tif (!ratioBroken) {\n\t\tif (maxMultiplier.width !== Infinity) {\n\t\t\tHORIZONTAL_DIRECTIONS.forEach(direction => {\n\t\t\t\tdirections[direction] *= maxMultiplier.width\n\t\t\t})\n\t\t}\n\t\tif (maxMultiplier.height !== Infinity) {\n\t\t\tVERTICAL_DIRECTIONS.forEach(direction => {\n\t\t\t\tdirections[direction] *= maxMultiplier.height\n\t\t\t})\n\t\t}\n\t} else {\n\t\tlet multiplier\n\t\tif (maxMultiplier.height < maxMultiplier.width) {\n\t\t\tmultiplier = maxMultiplier.height\n\t\t} else if (directions.right + directions.left) {\n\t\t\tmultiplier = maxMultiplier.width\n\t\t}\n\n\t\tif (maxMultiplier.height !== Infinity || maxMultiplier.width !== Infinity) {\n\t\t\tALL_DIRECTIONS.forEach(direction => {\n\t\t\t\tdirections[direction] *= multiplier\n\t\t\t})\n\t\t}\n\t}\n\n\treturn directions;\n}\n\nexport function resize (coordinates, restrictions, imageSize, coefficient, aspectRatio, resizeEvent) {\n\tconst actualCoordinates = {\n\t\t...coordinates,\n\t\tright: coordinates.left + coordinates.width,\n\t\tbottom: coordinates.top + coordinates.height\n\t}\n\n\tconst params = resizeEvent.params || {}\n\n\tlet directions = {\n\t\t...resizeEvent.directions\n\t}\n\n\tconst allowedDirections = params.allowedDirections || {\n\t\tleft: true,\n\t\tright: true,\n\t\tbottom: true,\n\t\ttop: true\n\t}\n\n\tObject.keys(allowedDirections).forEach(direction => {\n\t\tif (!allowedDirections[direction]) {\n\t\t\tdirections[direction] = 0\n\t\t}\n\t})\n\n\t// Variables for readbility\n\tconst {\n\t\tminHeight,\n\t\tminWidth,\n\t} = restrictions\n\n\tlet currentWidth = actualCoordinates.width + coefficient * (directions.left + directions.right)\n\tlet currentHeight = actualCoordinates.height + coefficient * (directions.top + directions.bottom)\n\n\t// 1. First step: fit desired box to existing limits to prevent unpredictable behaviour during aspect ratio fixing\n\tdirections = fitConditions(directions, actualCoordinates, restrictions, coefficient, imageSize);\n\n\t// 2. Second step: fix desired box to correspondent to aspect ratio\n\tcurrentWidth = actualCoordinates.width + coefficient * (directions.left + directions.right)\n\tcurrentHeight = actualCoordinates.height + coefficient * (directions.top + directions.bottom)\n\n\t// Checks ratio:\n\tlet ratioBroken = null\n\tif (params.preserveAspectRatio) {\n\t\tratioBroken = actualCoordinates.width / actualCoordinates.height\n\t} else if (aspectRatio.minimum && currentWidth / currentHeight < aspectRatio.minimum) {\n\t\tratioBroken = aspectRatio.minimum\n\t} else if (aspectRatio.maximum && currentWidth / currentHeight > aspectRatio.maximum) {\n\t\tratioBroken = aspectRatio.maximum\n\t}\n\n\tif (ratioBroken) {\n\t\tlet { respectDirection } = params\n\t\tif (!respectDirection) {\n\t\t\tif (actualCoordinates.width > actualCoordinates.height) {\n\t\t\t\trespectDirection = 'width'\n\t\t\t} else {\n\t\t\t\trespectDirection = 'height'\n\t\t\t}\n\t\t}\n\t\tif (respectDirection === 'width') {\n\t\t\tlet overlapHeight = actualCoordinates.height - currentWidth / ratioBroken\n\t\t\tif (allowedDirections.top && allowedDirections.bottom) {\n\t\t\t\tdirections.bottom = -overlapHeight / (2 * coefficient)\n\t\t\t\tdirections.top = -overlapHeight / (2 * coefficient)\n\t\t\t} else if (allowedDirections.top) {\n\t\t\t\tdirections.top = -overlapHeight / coefficient\n\t\t\t} else if (allowedDirections.bottom) {\n\t\t\t\tdirections.bottom = -overlapHeight / coefficient\n\t\t\t} else if (allowedDirections.right) {\n\t\t\t\tdirections.right = 0\n\t\t\t} else if (allowedDirections.left) {\n\t\t\t\tdirections.left = 0\n\t\t\t}\n\t\t} else if (respectDirection === 'height') {\n\t\t\tlet overlapWidth = actualCoordinates.width - currentHeight * ratioBroken\n\t\t\tif (allowedDirections.left && allowedDirections.right) {\n\t\t\t\tdirections.left = -overlapWidth / (2 * coefficient)\n\t\t\t\tdirections.right = -overlapWidth / (2 * coefficient)\n\t\t\t} else if (allowedDirections.left) {\n\t\t\t\tdirections.left = -overlapWidth / coefficient\n\t\t\t} else if (allowedDirections.right) {\n\t\t\t\tdirections.right = -overlapWidth / coefficient\n\t\t\t} else if (allowedDirections.top) {\n\t\t\t\tdirections.top = 0\n\t\t\t} else if (allowedDirections.bottom) {\n\t\t\t\tdirections.bottom = 0\n\t\t\t}\n\t\t} else {\n\t\t\tALL_DIRECTIONS.forEach(direction => {\n\t\t\t\tdirections[direction] *= 0\n\t\t\t})\n\t\t}\n\t}\n\n\t// 3. Third step: check if desired box with correct aspect ratios break some limits and fit to this conditions\n\tdirections = fitConditions(directions, actualCoordinates, restrictions, coefficient, imageSize, ratioBroken);\n\n\treturn {\n\t\twidth: coordinates.width + coefficient * (directions.right + directions.left),\n\t\theight: coordinates.height + coefficient * (directions.top + directions.bottom),\n\t\tleft: coordinates.left - coefficient * directions.left,\n\t\ttop: coordinates.top - coefficient * directions.top\n\t}\n}\n\nexport function move (coordinates, imageSize, coefficient, moveEvent) {\n\tconst directions = {\n\t\t...moveEvent.directions\n\t}\n\n\tconst newCoordinates = {\n\t\tleft: coordinates.left + coefficient * directions.left,\n\t\ttop: coordinates.top + coefficient * directions.top,\n\t\twidth: coordinates.width,\n\t\theight: coordinates.height\n\t}\n\n\tif (newCoordinates.left < 0) {\n\t\tnewCoordinates.left = 0\n\t}\n\tif (newCoordinates.left + newCoordinates.width > imageSize.width) {\n\t\tnewCoordinates.left = Math.max(0, imageSize.width - newCoordinates.width)\n\t}\n\tif (newCoordinates.top < 0) {\n\t\tnewCoordinates.top = 0\n\t}\n\tif (newCoordinates.top + newCoordinates.height > imageSize.height) {\n\t\tnewCoordinates.top = Math.max(0, imageSize.height - newCoordinates.height)\n\t}\n\n\treturn newCoordinates\n}\n\nexport function areaSize (cropper, image) {\n\tconst imageWidth = image.naturalWidth\n\tconst imageHeight = image.naturalHeight\n\tconst areaHeight = cropper.clientHeight\n\tconst areaWidth = cropper.clientWidth\n\n\tlet currentHeight = areaHeight\n\tlet currentWidth = imageWidth * areaHeight / imageHeight\n\n\tif (currentWidth > areaWidth) {\n\t\tcurrentWidth = areaWidth\n\t\tcurrentHeight = imageHeight * areaWidth / imageWidth\n\t}\n\n\treturn {\n\t\twidth: currentWidth,\n\t\theight: currentHeight\n\t}\n}\n\nexport function defaultPosition (cropper, image, width, height, props) {\n\treturn {\n\t\tleft: image.naturalWidth / 2 - width / 2,\n\t\ttop: image.naturalHeight / 2 - height / 2\n\t}\n}\n\nexport function defaultSize (cropper, image, props) {\n\tconst maxWidth = props.maxWidth / 100 * image.naturalWidth\n\tconst maxHeight = props.maxHeight / 100 * image.naturalHeight\n\tconst minWidth = props.minWidth / 100 * image.naturalWidth\n\tconst minHeight = props.minHeight / 100 * image.naturalHeight\n\n\tlet newHeight, newWidth\n\tif (maxHeight > maxWidth) {\n\t\tnewHeight = Math.max(minHeight, maxHeight * 0.8)\n\t\tnewWidth = Math.max(minWidth, maxWidth * 0.8)\n\t} else {\n\t\tnewWidth = Math.max(minWidth, maxWidth * 0.8)\n\t\tnewHeight = Math.max(minHeight, maxHeight * 0.8)\n\t}\n\n\treturn {\n\t\theight: newHeight,\n\t\twidth: newWidth\n\t}\n}\n\nexport function directionNames (hDirection, vDirection) {\n\tlet name, classname\n\tif (hDirection && vDirection) {\n\t\tname = `${hDirection}${vDirection[0].toUpperCase()}${vDirection.slice(1)}`\n\t\tclassname = `${hDirection}-${vDirection}`\n\t} else {\n\t\tname = hDirection || vDirection\n\t\tclassname = hDirection || vDirection\n\t}\n\treturn { name, classname }\n}\n\n\nexport function isCrossOriginURL(url) {\n\tconst pageLocation = window.location;\n\tconst URL_HOST_PATTERN = /(\\w+:)?(?:\\/\\/)([\\w.-]+)?(?::(\\d+))?\\/?/;\n\tconst urlMatch = URL_HOST_PATTERN.exec(url) || [];\n\tconst urlparts = {\n\t\tprotocol:   urlMatch[1] || '',\n\t\thost:       urlMatch[2] || '',\n\t\tport:       urlMatch[3] || ''\n\t};\n\n\tconst defaultPort = (protocol) => {\n\t   return { 'http:':80, 'https:':443 }[protocol];\n\t}\n\n\tconst portOf = (location) => {\n\t   return location.port || defaultPort(location.protocol||pageLocation.protocol);\n\t}\n\n\treturn (!urlparts.protocol && !urlparts.host && !urlparts.port) ||\n\t\t\tBoolean((urlparts.protocol  && (urlparts.protocol  == pageLocation.protocol)) &&\n\t\t\t\t   (urlparts.host      && (urlparts.host      == pageLocation.host))     &&\n\t\t\t\t   (urlparts.host      && (portOf(urlparts)   == portOf(pageLocation)))\n\t\t\t);\n}\n","export class ResizeEvent {\r\n\tconstructor(nativeEvent, directions, params) {\r\n\t\tthis.nativeEvent = nativeEvent\r\n\t\tthis.directions = directions\r\n\t\tthis.params = params\r\n\t}\r\n}\r\n\r\nexport class MoveEvent {\r\n\tconstructor(nativeEvent, directions) {\r\n\t\tthis.nativeEvent = nativeEvent\r\n\t\tthis.directions = directions\r\n\t}\r\n}\r\n\r\nexport class DragEvent {\r\n\tconstructor(nativeEvent, element, position, previousPosition, anchor) {\r\n\t\tthis.nativeEvent = nativeEvent\r\n\t\tthis.position = position\r\n\t\tthis.previousPosition = previousPosition\r\n\t\tthis.element = element\r\n\t\tthis.anchor = anchor\r\n\t}\r\n\tshift() {\r\n\t\tconst { element, anchor, position } = this;\r\n\t\tconst { left, top } = element.getBoundingClientRect();\r\n\r\n\t\treturn {\r\n\t\t\tleft: position.left - left - anchor.left,\r\n\t\t\ttop: position.top - top - anchor.top\r\n\t\t}\r\n\t}\r\n}\r\n","import { DragEvent } from '../utils/events'\r\n\r\nexport default {\r\n\tbeforeMount() {\r\n\t\twindow.addEventListener('mouseup', this.onMouseUp, { passive: false })\r\n\t\twindow.addEventListener('mousemove', this.onMouseMove, { passive: false })\r\n\t\twindow.addEventListener('touchmove', this.onTouchMove, { passive: false })\r\n\t\twindow.addEventListener('touchend', this.onTouchEnd, { passive: false })\r\n\t},\r\n\tbeforeDestroy() {\r\n\t\twindow.removeEventListener('mouseup', this.onMouseUp)\r\n\t\twindow.removeEventListener('mousemove', this.onMouseMove)\r\n\t\twindow.removeEventListener('touchmove', this.onTouchMove)\r\n\t\twindow.removeEventListener('touchend', this.onTouchEnd)\r\n\t},\r\n\tmounted () {\r\n\t\tif (!this.$refs.draggable) {\r\n\t\t\tthrow new Error(\r\n\t\t\t\t'You should add ref \"draggable\" to your root element to use draggable mixin'\r\n\t\t\t)\r\n\t\t}\r\n\t\tthis.touches = []\r\n\t\tthis.draggingAnchor = []\r\n\t\tthis.hovered = false\r\n\t},\r\n\tmethods: {\r\n\t\tonMouseOver () {\r\n\t\t\tif (!this.hovered) {\r\n\t\t\t\tthis.hovered = true\r\n\t\t\t\tthis.$emit('enter')\r\n\t\t\t}\r\n\t\t},\r\n\t\tonMouseLeave () {\r\n\t\t\tif (this.hovered) {\r\n\t\t\t\tthis.hovered = false\r\n\t\t\t\tthis.$emit('leave')\r\n\t\t\t}\r\n\t\t},\r\n\t\tonTouchStart (e) {\r\n\t\t\tif (e.cancelable) {\r\n\t\t\t\tthis.touches = [...e.touches]\r\n\r\n\t\t\t\tif (!this.hovered) {\r\n\t\t\t\t\tthis.$emit('enter')\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (e.touches.length) {\r\n\t\t\t\t\tthis.initAnchor(\r\n\t\t\t\t\t\tthis.touches.reduce(\r\n\t\t\t\t\t\t\t(mean, touch) => {\r\n\t\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\t\tclientX: mean.clientX + touch.clientX / e.touches.length,\r\n\t\t\t\t\t\t\t\t\tclientY: mean.clientY + touch.clientY / e.touches.length\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t{ clientX: 0, clientY: 0 }\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t)\r\n\t\t\t\t}\r\n\t\t\t\tif (e.preventDefault) {\r\n\t\t\t\t\te.preventDefault()\r\n\t\t\t\t}\r\n\t\t\t\te.stopPropagation()\r\n\t\t\t}\r\n\t\t},\r\n\t\tonTouchEnd (e) {\r\n\t\t\tthis.processEnd()\r\n\t\t},\r\n\t\tonTouchMove (e) {\r\n\t\t\tif (this.touches.length) {\r\n\t\t\t\tthis.processMove(e, e.touches)\r\n\t\t\t\tif (e.preventDefault) {\r\n\t\t\t\t\te.preventDefault()\r\n\t\t\t\t}\r\n\t\t\t\tif (e.stopPropagation) {\r\n\t\t\t\t\te.stopPropagation()\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tonMouseDown (e) {\r\n\t\t\tconst touch = {\r\n\t\t\t\tfake: true,\r\n\t\t\t\tclientX: e.clientX,\r\n\t\t\t\tclientY: e.clientY\r\n\t\t\t}\r\n\t\t\tthis.touches = [touch]\r\n\t\t\tthis.initAnchor(touch)\r\n\t\t\te.stopPropagation()\r\n\t\t},\r\n\t\tonMouseMove (e) {\r\n\t\t\tif (this.touches.length) {\r\n\t\t\t\tthis.processMove(e, [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tfake: true,\r\n\t\t\t\t\t\tclientX: e.clientX,\r\n\t\t\t\t\t\tclientY: e.clientY\r\n\t\t\t\t\t}\r\n\t\t\t\t])\r\n\t\t\t\tif (e.preventDefault) {\r\n\t\t\t\t\te.preventDefault()\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tonMouseUp (e) {\r\n\t\t\tthis.touches = []\r\n\t\t},\r\n\t\tinitAnchor (touch) {\r\n\t\t\tconst draggable = this.$refs.draggable\r\n\t\t\tconst { left, right, bottom, top } = draggable.getBoundingClientRect()\r\n\r\n\t\t\tthis.anchor = {\r\n\t\t\t\tleft: touch.clientX - left,\r\n\t\t\t\ttop: touch.clientY - top,\r\n\t\t\t\tbottom: bottom - touch.clientY,\r\n\t\t\t\tright: right - touch.clientX\r\n\t\t\t}\r\n\t\t},\r\n\t\tprocessMove (event, touches) {\r\n\t\t\tconst newTouches = [...touches]\r\n\t\t\tif (this.touches.length) {\r\n\t\t\t\tif (this.touches.length === 1 && newTouches.length === 1) {\r\n\t\t\t\t\tconst element = this.$refs.draggable\r\n\t\t\t\t\tthis.$emit('drag', new DragEvent(\r\n\t\t\t\t\t\tevent,\r\n\t\t\t\t\t\telement,\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tleft: newTouches[0].clientX,\r\n\t\t\t\t\t\t\ttop: newTouches[0].clientY\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tleft: this.touches[0].clientX,\r\n\t\t\t\t\t\t\ttop: this.touches[0].clientY,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tthis.anchor\r\n\t\t\t\t\t))\r\n\t\t\t\t}\r\n\t\t\t\tthis.touches = newTouches\r\n\t\t\t}\r\n\t\t},\r\n\t\tprocessEnd () {\r\n\t\t\tthis.touches = []\r\n\t\t\tif (this.hovered) {\r\n\t\t\t\tthis.$emit('leave')\r\n\t\t\t\tthis.hovered = false\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n","\r\nimport bem from 'easy-bem';\r\nimport draggable from '../../mixins/draggable';\r\nimport classnames from 'classnames';\r\n\r\nexport default {\r\n\tname: 'DraggableElement',\r\n\tmixins: [draggable],\r\n\tprops: {\r\n\t\tclassname: {\r\n\t\t\ttype: String\r\n\t\t}\r\n\t},\r\n};\r\n","<script>\r\nimport bem from 'easy-bem';\r\nimport draggable from '../../mixins/draggable';\r\nimport classnames from 'classnames';\r\n\r\nexport default {\r\n\tname: 'DraggableElement',\r\n\tmixins: [draggable],\r\n\tprops: {\r\n\t\tclassname: {\r\n\t\t\ttype: String\r\n\t\t}\r\n\t},\r\n};\r\n</script>\r\n\r\n<template>\r\n  <div\r\n    ref=\"draggable\"\r\n    :class=\"classname\"\r\n    @touchstart=\"onTouchStart\"\r\n    @mousedown=\"onMouseDown\"\r\n    @mouseover=\"onMouseOver\"\r\n    @mouseleave=\"onMouseLeave\"\r\n  >\r\n    <slot />\r\n  </div>\r\n</template>\r\n","\r\nimport classnames from 'classnames';\r\nimport bem from 'easy-bem';\r\nimport { directionNames } from '../../utils/core.js';\r\nimport DraggableElement from './DraggableElement.vue';\r\n\r\nconst cn = bem('vue-handler-wrapper');\r\n\r\nconst HORIZONTAL_DIRECTIONS = ['east', 'west', null];\r\nconst VERTICAL_DIRECTIONS = ['south', 'north', null];\r\n\r\nexport default {\r\n\tname: 'HandlerWrapper',\r\n\tcomponents: {\r\n\t\tDraggableElement\r\n\t},\r\n\tprops: {\r\n\t\thorizontalPosition: {\r\n\t\t\ttype: String\r\n\t\t},\r\n\t\tverticalPosition: {\r\n\t\t\ttype: String\r\n\t\t},\r\n\t\tclassname: {\r\n\t\t\ttype: String\r\n\t\t}\r\n\t},\r\n\tcomputed: {\r\n\t\tclassnames() {\r\n\t\t\tlet defaultClassname;\r\n\t\t\tif (this.horizontalPosition || this.verticalPosition) {\r\n\t\t\t\tconst position = directionNames(\r\n\t\t\t\t\tthis.horizontalPosition,\r\n\t\t\t\t\tthis.verticalPosition\r\n\t\t\t\t);\r\n\t\t\t\tdefaultClassname = classnames(this.classname, cn({ [position.classname]: true }));\r\n\t\t\t} else {\r\n\t\t\t\tdefaultClassname = classnames(this.classname, cn());\r\n\t\t\t}\r\n\t\t\treturn {\r\n\t\t\t\tdefault: defaultClassname,\r\n\t\t\t\tdraggable: cn('draggable')\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n};\r\n","<script>\r\nimport classnames from 'classnames';\r\nimport bem from 'easy-bem';\r\nimport { directionNames } from '../../utils/core.js';\r\nimport DraggableElement from './DraggableElement.vue';\r\n\r\nconst cn = bem('vue-handler-wrapper');\r\n\r\nconst HORIZONTAL_DIRECTIONS = ['east', 'west', null];\r\nconst VERTICAL_DIRECTIONS = ['south', 'north', null];\r\n\r\nexport default {\r\n\tname: 'HandlerWrapper',\r\n\tcomponents: {\r\n\t\tDraggableElement\r\n\t},\r\n\tprops: {\r\n\t\thorizontalPosition: {\r\n\t\t\ttype: String\r\n\t\t},\r\n\t\tverticalPosition: {\r\n\t\t\ttype: String\r\n\t\t},\r\n\t\tclassname: {\r\n\t\t\ttype: String\r\n\t\t}\r\n\t},\r\n\tcomputed: {\r\n\t\tclassnames() {\r\n\t\t\tlet defaultClassname;\r\n\t\t\tif (this.horizontalPosition || this.verticalPosition) {\r\n\t\t\t\tconst position = directionNames(\r\n\t\t\t\t\tthis.horizontalPosition,\r\n\t\t\t\t\tthis.verticalPosition\r\n\t\t\t\t);\r\n\t\t\t\tdefaultClassname = classnames(this.classname, cn({ [position.classname]: true }));\r\n\t\t\t} else {\r\n\t\t\t\tdefaultClassname = classnames(this.classname, cn());\r\n\t\t\t}\r\n\t\t\treturn {\r\n\t\t\t\tdefault: defaultClassname,\r\n\t\t\t\tdraggable: cn('draggable')\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n};\r\n</script>\r\n\r\n<template>\r\n  <div :class=\"classnames.default\">\r\n    <DraggableElement\r\n      :class=\"classnames.draggable\"\r\n      @drag=\"$emit('drag', $event)\"\r\n      @leave=\"$emit('leave')\"\r\n      @enter=\"$emit('enter')\"\r\n    >\r\n      <slot />\r\n    </DraggableElement>\r\n  </div>\r\n</template>\r\n\r\n<style lang=\"scss\">\r\n.vue-handler-wrapper {\r\n  position: absolute;\r\n  transform: translate(-50%, -50%);\r\n  &__draggable {\r\n    width: 30px;\r\n    height: 30px;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n  }\r\n  &--west-north {\r\n    left: 0;\r\n    top: 0;\r\n    cursor: nw-resize;\r\n  }\r\n  &--north {\r\n    left: 50%;\r\n    top: 0;\r\n    cursor: n-resize;\r\n  }\r\n  &--east-north {\r\n    left: 100%;\r\n    top: 0;\r\n    cursor: ne-resize;\r\n  }\r\n  &--east {\r\n    left: 100%;\r\n    top: 50%;\r\n    cursor: e-resize;\r\n  }\r\n  &--east-south {\r\n    left: 100%;\r\n    top: 100%;\r\n    cursor: se-resize;\r\n  }\r\n  &--south {\r\n    left: 50%;\r\n    top: 100%;\r\n    cursor: s-resize;\r\n  }\r\n  &--west-south {\r\n    left: 0;\r\n    top: 100%;\r\n    cursor: sw-resize;\r\n  }\r\n  &--west {\r\n    left: 0;\r\n    top: 50%;\r\n    cursor: w-resize;\r\n  }\r\n}\r\n</style>\r\n","\r\nimport classnames from 'classnames';\r\nimport bem from 'easy-bem';\r\nimport { directionNames } from '../../utils/core.js';\r\nimport DraggableElement from './DraggableElement.vue';\r\n\r\nconst cn = bem('vue-line-wrapper');\r\n\r\nexport default {\r\n\tname: 'LineWrapper',\r\n\tcomponents: {\r\n\t\tDraggableElement\r\n\t},\r\n\tprops: {\r\n\t\tposition: {\r\n\t\t\ttype: String,\r\n\t\t\trequired: true\r\n\t\t}\r\n\t},\r\n\tcomputed: {\r\n\t\tclassname() {\r\n\t\t\treturn cn({ [this.position]: true });\r\n\t\t}\r\n\t}\r\n};\r\n","<script>\r\nimport classnames from 'classnames';\r\nimport bem from 'easy-bem';\r\nimport { directionNames } from '../../utils/core.js';\r\nimport DraggableElement from './DraggableElement.vue';\r\n\r\nconst cn = bem('vue-line-wrapper');\r\n\r\nexport default {\r\n\tname: 'LineWrapper',\r\n\tcomponents: {\r\n\t\tDraggableElement\r\n\t},\r\n\tprops: {\r\n\t\tposition: {\r\n\t\t\ttype: String,\r\n\t\t\trequired: true\r\n\t\t}\r\n\t},\r\n\tcomputed: {\r\n\t\tclassname() {\r\n\t\t\treturn cn({ [this.position]: true });\r\n\t\t}\r\n\t}\r\n};\r\n</script>\r\n\r\n<template>\r\n  <DraggableElement\r\n    :class=\"classname\"\r\n    @drag=\"$emit('drag', $event)\"\r\n    @leave=\"$emit('leave')\"\r\n    @enter=\"$emit('enter')\"\r\n  >\r\n    <slot />\r\n  </DraggableElement>\r\n</template>\r\n\r\n<style lang=\"scss\">\r\n.vue-line-wrapper {\r\n  background: none;\r\n  position: absolute;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n\r\n  &--north,\r\n  &--south {\r\n    height: 12px;\r\n    width: 100%;\r\n    left: 0;\r\n    transform: translateY(-50%);\r\n  }\r\n  &--north {\r\n    top: 0;\r\n    cursor: n-resize;\r\n  }\r\n  &--south {\r\n    top: 100%;\r\n    cursor: s-resize;\r\n  }\r\n\r\n  &--east,\r\n  &--west {\r\n    width: 12px;\r\n    height: 100%;\r\n    transform: translateX(-50%);\r\n    top: 0;\r\n  }\r\n  &--east {\r\n    left: 100%;\r\n    cursor: e-resize;\r\n  }\r\n  &--west {\r\n    left: 0;\r\n    cursor: w-resize;\r\n  }\r\n}\r\n</style>\r\n","\r\nimport classnames from 'classnames';\r\nimport bem from 'easy-bem';\r\n\r\nimport { directionNames } from '../../utils/core.js';\r\nimport { ResizeEvent } from '../../utils/events';\r\n\r\nconst cn = bem('vue-bounding-box');\r\n\r\nconst HORIZONTAL_DIRECTIONS = ['east', 'west', null];\r\nconst VERTICAL_DIRECTIONS = ['south', 'north', null];\r\n\r\nexport default {\r\n\tname: 'BoundingBox',\r\n\tprops: {\r\n\t\tclassname: {\r\n\t\t\ttype: String\r\n\t\t},\r\n\t\thandlers: {\r\n\t\t\ttype: Object,\r\n\t\t\tdefault() {\r\n\t\t\t\treturn {\r\n\t\t\t\t\teastNorth: true,\r\n\t\t\t\t\tnorth: true,\r\n\t\t\t\t\twestNorth: true,\r\n\t\t\t\t\twest: true,\r\n\t\t\t\t\twestSouth: true,\r\n\t\t\t\t\tsouth: true,\r\n\t\t\t\t\teastSouth: true,\r\n\t\t\t\t\teast: true\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t},\r\n\t\thandlerComponent: {\r\n\t\t\ttype: [Object, String],\r\n\t\t},\r\n\t\thandlersClassnames: {\r\n\t\t\ttype: Object,\r\n\t\t\tdefault() {\r\n\t\t\t\treturn {};\r\n\t\t\t}\r\n\t\t},\r\n\t\tlines: {\r\n\t\t\ttype: Object,\r\n\t\t\tdefault() {\r\n\t\t\t\treturn {\r\n\t\t\t\t\twest: true,\r\n\t\t\t\t\tnorth: true,\r\n\t\t\t\t\teast: true,\r\n\t\t\t\t\tsouth: true\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t},\r\n\t\tlineComponent: {\r\n\t\t\ttype: [Object, String],\r\n\t\t},\r\n\t\tlinesClassnames: {\r\n\t\t\ttype: Object,\r\n\t\t\tdefault() {\r\n\t\t\t\treturn {};\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tdata() {\r\n\t\tconst points = [];\r\n\t\tHORIZONTAL_DIRECTIONS.forEach(hDirection => {\r\n\t\t\tVERTICAL_DIRECTIONS.forEach(vDirection => {\r\n\t\t\t\tif (hDirection !== vDirection) {\r\n\t\t\t\t\tlet { name, classname } = directionNames(hDirection, vDirection);\r\n\t\t\t\t\tpoints.push({\r\n\t\t\t\t\t\tname,\r\n\t\t\t\t\t\tclassname,\r\n\t\t\t\t\t\tverticalDirection: vDirection,\r\n\t\t\t\t\t\thorizontalDirection: hDirection\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t});\r\n\t\treturn {\r\n\t\t\tpoints\r\n\t\t};\r\n\t},\r\n\tcomputed: {\r\n\t\tclassnames() {\r\n\t\t\tconst handlers = this.handlersClassnames;\r\n\t\t\tconst lines = this.linesClassnames;\r\n\r\n\t\t\treturn {\r\n\t\t\t\tdefault: classnames(\r\n\t\t\t\t\t!this.disableDefaultClasses && cn(),\r\n\t\t\t\t\tthis.classname\r\n\t\t\t\t),\r\n\t\t\t\thandlers,\r\n\t\t\t\tlines\r\n\t\t\t};\r\n\t\t},\r\n\t\tlineNodes() {\r\n\t\t\tconst lines = [];\r\n\t\t\tthis.points.forEach(point => {\r\n\t\t\t\tif ((!point.horizontalDirection || !point.verticalDirection) && this.lines[point.name]) {\r\n\t\t\t\t\tlines.push({\r\n\t\t\t\t\t\tname: point.name,\r\n\t\t\t\t\t\tcomponent: this.lineComponent,\r\n\t\t\t\t\t\tclassname: classnames(\r\n\t\t\t\t\t\t\tthis.classnames.lines.default,\r\n\t\t\t\t\t\t\tthis.classnames.lines[point.name]\r\n\t\t\t\t\t\t),\r\n\t\t\t\t\t\thoverClassname: this.classnames.lines.hover,\r\n\t\t\t\t\t\tverticalDirection: point.verticalDirection,\r\n\t\t\t\t\t\thorizontalDirection: point.horizontalDirection\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\treturn lines;\r\n\t\t},\r\n\t\thandlerNodes() {\r\n\t\t\tconst handlers = [];\r\n\t\t\tthis.points.forEach(point => {\r\n\t\t\t\tif (this.handlers[point.name]) {\r\n\t\t\t\t\thandlers.push({\r\n\t\t\t\t\t\tname: point.name,\r\n\t\t\t\t\t\tcomponent: this.handlerComponent,\r\n\t\t\t\t\t\tclassname: classnames(\r\n\t\t\t\t\t\t\tthis.classnames.handlers.default,\r\n\t\t\t\t\t\t\tthis.classnames.handlers[point.name]\r\n\t\t\t\t\t\t),\r\n\t\t\t\t\t\thoverClassname: this.classnames.handlers.hover,\r\n\t\t\t\t\t\tverticalDirection: point.verticalDirection,\r\n\t\t\t\t\t\thorizontalDirection: point.horizontalDirection\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\treturn handlers;\r\n\t\t}\r\n\t},\r\n\tbeforeMount() {\r\n\t\twindow.addEventListener('mouseup', this.onMouseUp, { passive: false });\r\n\t\twindow.addEventListener('mousemove', this.onMouseMove, { passive: false });\r\n\t\twindow.addEventListener('touchmove', this.onTouchMove, { passive: false });\r\n\t\twindow.addEventListener('touchend', this.onTouchEnd, { passive: false });\r\n\t},\r\n\tbeforeDestroy() {\r\n\t\twindow.removeEventListener('mouseup', this.onMouseUp);\r\n\t\twindow.removeEventListener('mousemove', this.onMouseMove);\r\n\t\twindow.removeEventListener('touchmove', this.onTouchMove);\r\n\t\twindow.removeEventListener('touchend', this.onTouchEnd);\r\n\t},\r\n\tmounted() {\r\n\t\tthis.touches = [];\r\n\t\tthis.draggingAnchor = [];\r\n\t},\r\n\tmethods: {\r\n\t\tonHandlerDrag(dragEvent, horizontalDirection, verticalDirection) {\r\n\t\t\tconst { element, anchor, position } = dragEvent;\r\n\t\t\tconst { left, top } = dragEvent.shift();\r\n\r\n\t\t\tconst directions = {\r\n\t\t\t\tleft: 0,\r\n\t\t\t\tright: 0,\r\n\t\t\t\ttop: 0,\r\n\t\t\t\tbottom: 0\r\n\t\t\t};\r\n\r\n\t\t\tif (horizontalDirection === 'west') {\r\n\t\t\t\tdirections.left -= left\r\n\t\t\t} else if (horizontalDirection === 'east') {\r\n\t\t\t\tdirections.right += left\r\n\t\t\t}\r\n\t\t\tif (verticalDirection === 'north') {\r\n\t\t\t\tdirections.top -= top;\r\n\t\t\t} else if (verticalDirection === 'south') {\r\n\t\t\t\tdirections.bottom += top\r\n\t\t\t}\r\n\r\n\t\t\tlet respectDirection;\r\n\t\t\tif (!verticalDirection && horizontalDirection) {\r\n\t\t\t\trespectDirection = 'width';\r\n\t\t\t} else if (verticalDirection && !horizontalDirection) {\r\n\t\t\t\trespectDirection = 'height';\r\n\t\t\t}\r\n\r\n\t\t\tthis.$emit('resize', new ResizeEvent(\r\n\t\t\t\tdragEvent.nativeEvent,\r\n\t\t\t\tdirections,\r\n\t\t\t\t{\r\n\t\t\t\t\tallowedDirections: {\r\n\t\t\t\t\t\tleft: horizontalDirection === 'west' || !horizontalDirection,\r\n\t\t\t\t\t\tright: horizontalDirection === 'east' || !horizontalDirection,\r\n\t\t\t\t\t\tbottom: verticalDirection === 'south' || !verticalDirection,\r\n\t\t\t\t\t\ttop: verticalDirection === 'north' || !verticalDirection\r\n\t\t\t\t\t},\r\n\t\t\t\t\tpreserveAspectRatio: dragEvent.nativeEvent.shiftKey,\r\n\t\t\t\t\trespectDirection\r\n\t\t\t\t}\r\n\t\t\t));\r\n\t\t}\r\n\t}\r\n};\r\n","<script>\r\nimport classnames from 'classnames';\r\nimport bem from 'easy-bem';\r\n\r\nimport { directionNames } from '../../utils/core.js';\r\nimport { ResizeEvent } from '../../utils/events';\r\n\r\nconst cn = bem('vue-bounding-box');\r\n\r\nconst HORIZONTAL_DIRECTIONS = ['east', 'west', null];\r\nconst VERTICAL_DIRECTIONS = ['south', 'north', null];\r\n\r\nexport default {\r\n\tname: 'BoundingBox',\r\n\tprops: {\r\n\t\tclassname: {\r\n\t\t\ttype: String\r\n\t\t},\r\n\t\thandlers: {\r\n\t\t\ttype: Object,\r\n\t\t\tdefault() {\r\n\t\t\t\treturn {\r\n\t\t\t\t\teastNorth: true,\r\n\t\t\t\t\tnorth: true,\r\n\t\t\t\t\twestNorth: true,\r\n\t\t\t\t\twest: true,\r\n\t\t\t\t\twestSouth: true,\r\n\t\t\t\t\tsouth: true,\r\n\t\t\t\t\teastSouth: true,\r\n\t\t\t\t\teast: true\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t},\r\n\t\thandlerComponent: {\r\n\t\t\ttype: [Object, String],\r\n\t\t},\r\n\t\thandlersClassnames: {\r\n\t\t\ttype: Object,\r\n\t\t\tdefault() {\r\n\t\t\t\treturn {};\r\n\t\t\t}\r\n\t\t},\r\n\t\tlines: {\r\n\t\t\ttype: Object,\r\n\t\t\tdefault() {\r\n\t\t\t\treturn {\r\n\t\t\t\t\twest: true,\r\n\t\t\t\t\tnorth: true,\r\n\t\t\t\t\teast: true,\r\n\t\t\t\t\tsouth: true\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t},\r\n\t\tlineComponent: {\r\n\t\t\ttype: [Object, String],\r\n\t\t},\r\n\t\tlinesClassnames: {\r\n\t\t\ttype: Object,\r\n\t\t\tdefault() {\r\n\t\t\t\treturn {};\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tdata() {\r\n\t\tconst points = [];\r\n\t\tHORIZONTAL_DIRECTIONS.forEach(hDirection => {\r\n\t\t\tVERTICAL_DIRECTIONS.forEach(vDirection => {\r\n\t\t\t\tif (hDirection !== vDirection) {\r\n\t\t\t\t\tlet { name, classname } = directionNames(hDirection, vDirection);\r\n\t\t\t\t\tpoints.push({\r\n\t\t\t\t\t\tname,\r\n\t\t\t\t\t\tclassname,\r\n\t\t\t\t\t\tverticalDirection: vDirection,\r\n\t\t\t\t\t\thorizontalDirection: hDirection\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t});\r\n\t\treturn {\r\n\t\t\tpoints\r\n\t\t};\r\n\t},\r\n\tcomputed: {\r\n\t\tclassnames() {\r\n\t\t\tconst handlers = this.handlersClassnames;\r\n\t\t\tconst lines = this.linesClassnames;\r\n\r\n\t\t\treturn {\r\n\t\t\t\tdefault: classnames(\r\n\t\t\t\t\t!this.disableDefaultClasses && cn(),\r\n\t\t\t\t\tthis.classname\r\n\t\t\t\t),\r\n\t\t\t\thandlers,\r\n\t\t\t\tlines\r\n\t\t\t};\r\n\t\t},\r\n\t\tlineNodes() {\r\n\t\t\tconst lines = [];\r\n\t\t\tthis.points.forEach(point => {\r\n\t\t\t\tif ((!point.horizontalDirection || !point.verticalDirection) && this.lines[point.name]) {\r\n\t\t\t\t\tlines.push({\r\n\t\t\t\t\t\tname: point.name,\r\n\t\t\t\t\t\tcomponent: this.lineComponent,\r\n\t\t\t\t\t\tclassname: classnames(\r\n\t\t\t\t\t\t\tthis.classnames.lines.default,\r\n\t\t\t\t\t\t\tthis.classnames.lines[point.name]\r\n\t\t\t\t\t\t),\r\n\t\t\t\t\t\thoverClassname: this.classnames.lines.hover,\r\n\t\t\t\t\t\tverticalDirection: point.verticalDirection,\r\n\t\t\t\t\t\thorizontalDirection: point.horizontalDirection\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\treturn lines;\r\n\t\t},\r\n\t\thandlerNodes() {\r\n\t\t\tconst handlers = [];\r\n\t\t\tthis.points.forEach(point => {\r\n\t\t\t\tif (this.handlers[point.name]) {\r\n\t\t\t\t\thandlers.push({\r\n\t\t\t\t\t\tname: point.name,\r\n\t\t\t\t\t\tcomponent: this.handlerComponent,\r\n\t\t\t\t\t\tclassname: classnames(\r\n\t\t\t\t\t\t\tthis.classnames.handlers.default,\r\n\t\t\t\t\t\t\tthis.classnames.handlers[point.name]\r\n\t\t\t\t\t\t),\r\n\t\t\t\t\t\thoverClassname: this.classnames.handlers.hover,\r\n\t\t\t\t\t\tverticalDirection: point.verticalDirection,\r\n\t\t\t\t\t\thorizontalDirection: point.horizontalDirection\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\treturn handlers;\r\n\t\t}\r\n\t},\r\n\tbeforeMount() {\r\n\t\twindow.addEventListener('mouseup', this.onMouseUp, { passive: false });\r\n\t\twindow.addEventListener('mousemove', this.onMouseMove, { passive: false });\r\n\t\twindow.addEventListener('touchmove', this.onTouchMove, { passive: false });\r\n\t\twindow.addEventListener('touchend', this.onTouchEnd, { passive: false });\r\n\t},\r\n\tbeforeDestroy() {\r\n\t\twindow.removeEventListener('mouseup', this.onMouseUp);\r\n\t\twindow.removeEventListener('mousemove', this.onMouseMove);\r\n\t\twindow.removeEventListener('touchmove', this.onTouchMove);\r\n\t\twindow.removeEventListener('touchend', this.onTouchEnd);\r\n\t},\r\n\tmounted() {\r\n\t\tthis.touches = [];\r\n\t\tthis.draggingAnchor = [];\r\n\t},\r\n\tmethods: {\r\n\t\tonHandlerDrag(dragEvent, horizontalDirection, verticalDirection) {\r\n\t\t\tconst { element, anchor, position } = dragEvent;\r\n\t\t\tconst { left, top } = dragEvent.shift();\r\n\r\n\t\t\tconst directions = {\r\n\t\t\t\tleft: 0,\r\n\t\t\t\tright: 0,\r\n\t\t\t\ttop: 0,\r\n\t\t\t\tbottom: 0\r\n\t\t\t};\r\n\r\n\t\t\tif (horizontalDirection === 'west') {\r\n\t\t\t\tdirections.left -= left\r\n\t\t\t} else if (horizontalDirection === 'east') {\r\n\t\t\t\tdirections.right += left\r\n\t\t\t}\r\n\t\t\tif (verticalDirection === 'north') {\r\n\t\t\t\tdirections.top -= top;\r\n\t\t\t} else if (verticalDirection === 'south') {\r\n\t\t\t\tdirections.bottom += top\r\n\t\t\t}\r\n\r\n\t\t\tlet respectDirection;\r\n\t\t\tif (!verticalDirection && horizontalDirection) {\r\n\t\t\t\trespectDirection = 'width';\r\n\t\t\t} else if (verticalDirection && !horizontalDirection) {\r\n\t\t\t\trespectDirection = 'height';\r\n\t\t\t}\r\n\r\n\t\t\tthis.$emit('resize', new ResizeEvent(\r\n\t\t\t\tdragEvent.nativeEvent,\r\n\t\t\t\tdirections,\r\n\t\t\t\t{\r\n\t\t\t\t\tallowedDirections: {\r\n\t\t\t\t\t\tleft: horizontalDirection === 'west' || !horizontalDirection,\r\n\t\t\t\t\t\tright: horizontalDirection === 'east' || !horizontalDirection,\r\n\t\t\t\t\t\tbottom: verticalDirection === 'south' || !verticalDirection,\r\n\t\t\t\t\t\ttop: verticalDirection === 'north' || !verticalDirection\r\n\t\t\t\t\t},\r\n\t\t\t\t\tpreserveAspectRatio: dragEvent.nativeEvent.shiftKey,\r\n\t\t\t\t\trespectDirection\r\n\t\t\t\t}\r\n\t\t\t));\r\n\t\t}\r\n\t}\r\n};\r\n</script>\r\n\r\n<template>\r\n  <div\r\n    ref=\"box\"\r\n    :class=\"classnames.default\"\r\n  >\r\n    <slot />\r\n    <div>\r\n      <component\r\n        :is=\"line.component\"\r\n        v-for=\"line in lineNodes\"\r\n        :key=\"line.name\"\r\n        :classname=\"line.classname\"\r\n        :hover-classname=\"line.hoverClassname\"\r\n        :position=\"line.name\"\r\n        @drag=\"onHandlerDrag($event, line.horizontalDirection, line.verticalDirection)\"\r\n      />\r\n    </div>\r\n    <div>\r\n      <component\r\n        :is=\"handler.component\"\r\n        v-for=\"handler in handlerNodes\"\r\n        :key=\"handler.name\"\r\n        :classname=\"handler.classname\"\r\n        :hover-classname=\"handler.hoverClassname\"\r\n        :horizontal-position=\"handler.horizontalDirection\"\r\n        :vertical-position=\"handler.verticalDirection\"\r\n        @drag=\"onHandlerDrag($event, handler.horizontalDirection, handler.verticalDirection)\"\r\n      />\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<style lang=\"scss\">\r\n.vue-bounding-box {\r\n  position: relative;\r\n  height: 100%;\r\n  width: 100%;\r\n  &__line {\r\n    position: absolute;\r\n    &--north {\r\n      top: 0;\r\n      width: 100%;\r\n      cursor: n-resize;\r\n    }\r\n    &--east {\r\n      left: 100%;\r\n      top: 0;\r\n      height: 100%;\r\n      cursor: e-resize;\r\n    }\r\n    &--south {\r\n      top: 100%;\r\n      width: 100%;\r\n      cursor: s-resize;\r\n    }\r\n    &--west {\r\n      left: 0;\r\n      top: 0;\r\n      height: 100%;\r\n      cursor: w-resize;\r\n    }\r\n  }\r\n}\r\n</style>\r\n","\r\nimport classnames from 'classnames';\r\nimport bem from 'easy-bem';\r\n\r\nimport { ResizeEvent, MoveEvent } from '../../utils/events.js'\r\n\r\nconst cn = bem('vue-draggable-container')\r\n\r\nexport default {\r\n\tname: 'DraggableArea',\r\n\tcomputed: {\r\n\t\tclassnames() {\r\n\t\t\treturn {\r\n\t\t\t\tdefault: classnames(cn(), this.classname),\r\n\t\t\t}\r\n\t\t},\r\n\t},\r\n\tbeforeMount() {\r\n\t\twindow.addEventListener('mouseup', this.onMouseUp, { passive: false })\r\n\t\twindow.addEventListener('mousemove', this.onMouseMove, { passive: false })\r\n\t\twindow.addEventListener('touchmove', this.onTouchMove, { passive: false })\r\n\t\twindow.addEventListener('touchend', this.onTouchEnd, { passive: false })\r\n\t},\r\n\tbeforeDestroy() {\r\n\t\twindow.removeEventListener('mouseup', this.onMouseUp)\r\n\t\twindow.removeEventListener('mousemove', this.onMouseMove)\r\n\t\twindow.removeEventListener('touchmove', this.onTouchMove)\r\n\t\twindow.removeEventListener('touchend', this.onTouchEnd)\r\n\t},\r\n\tmounted() {\r\n\t\tthis.touches = []\r\n\t\tthis.draggingAnchor = []\r\n\t},\r\n\tmethods: {\r\n\t\tonTouchStart(e) {\r\n\t\t\tif (e.cancelable) {\r\n\t\t\t\tthis.touches = [...e.touches]\r\n\r\n\t\t\t\tif (e.touches.length) {\r\n\t\t\t\t\tthis.initAnchor(this.touches.reduce((mean, touch) => {\r\n\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\tclientX: mean.clientX + touch.clientX / e.touches.length,\r\n\t\t\t\t\t\t\tclientY: mean.clientY + touch.clientY / e.touches.length\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}, { clientX: 0, clientY: 0 }))\r\n\t\t\t\t}\r\n\t\t\t\tif (e.preventDefault) {\r\n\t\t\t\t\te.preventDefault()\r\n\t\t\t\t}\r\n\t\t\t\te.stopPropagation()\r\n\t\t\t}\r\n\t\t},\r\n\t\tonTouchEnd(e) {\r\n\t\t\tthis.processEnd()\r\n\t\t},\r\n\t\tonTouchMove(e) {\r\n\t\t\tif (this.touches.length) {\r\n\t\t\t\tthis.processMove(e, e.touches)\r\n\t\t\t\tif (e.preventDefault) {\r\n\t\t\t\t\te.preventDefault()\r\n\t\t\t\t}\r\n\t\t\t\tif (e.stopPropagation) {\r\n\t\t\t\t\te.stopPropagation()\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tonMouseDown(e) {\r\n\t\t\tconst touch = {\r\n\t\t\t\tfake: true,\r\n\t\t\t\tclientX: e.clientX,\r\n\t\t\t\tclientY: e.clientY\r\n\t\t\t}\r\n\t\t\tthis.touches = [touch]\r\n\t\t\tthis.initAnchor(touch)\r\n\t\t\te.stopPropagation()\r\n\t\t},\r\n\t\tonMouseMove(e) {\r\n\t\t\tif (this.touches.length) {\r\n\t\t\t\tthis.processMove(e, [{\r\n\t\t\t\t\tfake: true,\r\n\t\t\t\t\tclientX: e.clientX,\r\n\t\t\t\t\tclientY: e.clientY\r\n\t\t\t\t}])\r\n\t\t\t\tif (e.preventDefault  && e.cancelable) {\r\n\t\t\t\t\te.preventDefault()\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tonMouseUp(e) {\r\n\t\t\tthis.touches = []\r\n\t\t},\r\n\t\tinitAnchor(touch) {\r\n\t\t\tconst container = this.$refs.container\r\n\t\t\tconst { left, top } = container.getBoundingClientRect()\r\n\r\n\t\t\tthis.anchor = {\r\n\t\t\t\tx: touch.clientX - left,\r\n\t\t\t\ty: touch.clientY - top\r\n\t\t\t}\r\n\t\t},\r\n\t\tprocessMove(event, touches) {\r\n\t\t\tconst newTouches = [...touches]\r\n\t\t\tif (this.touches.length) {\r\n\t\t\t\tconst container = this.$refs.container\r\n\r\n\t\t\t\tconst { left, top } = container.getBoundingClientRect()\r\n\r\n\t\t\t\tconst coordinates = {\r\n\t\t\t\t\twidth: this.width,\r\n\t\t\t\t\theight: this.height,\r\n\t\t\t\t\tleft: this.left,\r\n\t\t\t\t\ttop: this.top\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (this.touches.length === 1 && newTouches.length === 1) {\r\n\t\t\t\t\tthis.$emit('move', new MoveEvent(event, {\r\n\t\t\t\t\t\tleft: (newTouches[0].clientX - left - this.anchor.x),\r\n\t\t\t\t\t\ttop: (newTouches[0].clientY - top - this.anchor.y)\r\n\t\t\t\t\t}))\r\n\t\t\t\t} else if (this.touches.length > 1 && this.touches.length === newTouches.length) {\r\n\t\t\t\t\tconst vectors = newTouches.map((touch, index) => ({\r\n\t\t\t\t\t\tx: touch.clientX - this.touches[index].clientX,\r\n\t\t\t\t\t\ty: touch.clientY - this.touches[index].clientY,\r\n\t\t\t\t\t\tposition: {\r\n\t\t\t\t\t\t\tclientX: touch.clientX,\r\n\t\t\t\t\t\t\tclientY: touch.clientY\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tlength: Math.sqrt(\r\n\t\t\t\t\t\t\tMath.pow(touch.clientX - this.touches[index].clientX, 2) +\r\n              Math.pow(touch.clientY - this.touches[index].clientY, 2)\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t}))\r\n\r\n\t\t\t\t\tconst summaryShift = vectors.reduce((shift, vector) => shift + vector.length, 0)\r\n\r\n\t\t\t\t\tconst massPoint = {\r\n\t\t\t\t\t\tleft: vectors.reduce((value, vector, index) => value + (1 - vector.length / summaryShift) * newTouches[index].clientX, 0),\r\n\t\t\t\t\t\ttop: vectors.reduce((value, vector, index) => value + (1 - vector.length / summaryShift) * newTouches[index].clientY, 0)\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tlet directions = {\r\n\t\t\t\t\t\ttop: 0,\r\n\t\t\t\t\t\tbottom: 0,\r\n\t\t\t\t\t\tleft: 0,\r\n\t\t\t\t\t\tright: 0\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvectors.forEach((vector, index) => {\r\n\t\t\t\t\t\tif (vector.length / summaryShift > 0.25) {\r\n\t\t\t\t\t\t\tif (newTouches[index].clientY > massPoint.top) {\r\n\t\t\t\t\t\t\t\tdirections.bottom += vector.y\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tdirections.top -= vector.y\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (newTouches[index].clientX > massPoint.left) {\r\n\t\t\t\t\t\t\t\tdirections.right += vector.x\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tdirections.left -= vector.x\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\tthis.$emit('resize', new ResizeEvent(event, directions))\r\n\t\t\t\t}\r\n\t\t\t\tthis.touches = newTouches\r\n\t\t\t}\r\n\t\t},\r\n\t\tprocessEnd() {\r\n\t\t\tthis.touches = []\r\n\t\t}\r\n\t}\r\n\r\n};\r\n","<script>\r\nimport classnames from 'classnames';\r\nimport bem from 'easy-bem';\r\n\r\nimport { ResizeEvent, MoveEvent } from '../../utils/events.js'\r\n\r\nconst cn = bem('vue-draggable-container')\r\n\r\nexport default {\r\n\tname: 'DraggableArea',\r\n\tcomputed: {\r\n\t\tclassnames() {\r\n\t\t\treturn {\r\n\t\t\t\tdefault: classnames(cn(), this.classname),\r\n\t\t\t}\r\n\t\t},\r\n\t},\r\n\tbeforeMount() {\r\n\t\twindow.addEventListener('mouseup', this.onMouseUp, { passive: false })\r\n\t\twindow.addEventListener('mousemove', this.onMouseMove, { passive: false })\r\n\t\twindow.addEventListener('touchmove', this.onTouchMove, { passive: false })\r\n\t\twindow.addEventListener('touchend', this.onTouchEnd, { passive: false })\r\n\t},\r\n\tbeforeDestroy() {\r\n\t\twindow.removeEventListener('mouseup', this.onMouseUp)\r\n\t\twindow.removeEventListener('mousemove', this.onMouseMove)\r\n\t\twindow.removeEventListener('touchmove', this.onTouchMove)\r\n\t\twindow.removeEventListener('touchend', this.onTouchEnd)\r\n\t},\r\n\tmounted() {\r\n\t\tthis.touches = []\r\n\t\tthis.draggingAnchor = []\r\n\t},\r\n\tmethods: {\r\n\t\tonTouchStart(e) {\r\n\t\t\tif (e.cancelable) {\r\n\t\t\t\tthis.touches = [...e.touches]\r\n\r\n\t\t\t\tif (e.touches.length) {\r\n\t\t\t\t\tthis.initAnchor(this.touches.reduce((mean, touch) => {\r\n\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\tclientX: mean.clientX + touch.clientX / e.touches.length,\r\n\t\t\t\t\t\t\tclientY: mean.clientY + touch.clientY / e.touches.length\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}, { clientX: 0, clientY: 0 }))\r\n\t\t\t\t}\r\n\t\t\t\tif (e.preventDefault) {\r\n\t\t\t\t\te.preventDefault()\r\n\t\t\t\t}\r\n\t\t\t\te.stopPropagation()\r\n\t\t\t}\r\n\t\t},\r\n\t\tonTouchEnd(e) {\r\n\t\t\tthis.processEnd()\r\n\t\t},\r\n\t\tonTouchMove(e) {\r\n\t\t\tif (this.touches.length) {\r\n\t\t\t\tthis.processMove(e, e.touches)\r\n\t\t\t\tif (e.preventDefault) {\r\n\t\t\t\t\te.preventDefault()\r\n\t\t\t\t}\r\n\t\t\t\tif (e.stopPropagation) {\r\n\t\t\t\t\te.stopPropagation()\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tonMouseDown(e) {\r\n\t\t\tconst touch = {\r\n\t\t\t\tfake: true,\r\n\t\t\t\tclientX: e.clientX,\r\n\t\t\t\tclientY: e.clientY\r\n\t\t\t}\r\n\t\t\tthis.touches = [touch]\r\n\t\t\tthis.initAnchor(touch)\r\n\t\t\te.stopPropagation()\r\n\t\t},\r\n\t\tonMouseMove(e) {\r\n\t\t\tif (this.touches.length) {\r\n\t\t\t\tthis.processMove(e, [{\r\n\t\t\t\t\tfake: true,\r\n\t\t\t\t\tclientX: e.clientX,\r\n\t\t\t\t\tclientY: e.clientY\r\n\t\t\t\t}])\r\n\t\t\t\tif (e.preventDefault  && e.cancelable) {\r\n\t\t\t\t\te.preventDefault()\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tonMouseUp(e) {\r\n\t\t\tthis.touches = []\r\n\t\t},\r\n\t\tinitAnchor(touch) {\r\n\t\t\tconst container = this.$refs.container\r\n\t\t\tconst { left, top } = container.getBoundingClientRect()\r\n\r\n\t\t\tthis.anchor = {\r\n\t\t\t\tx: touch.clientX - left,\r\n\t\t\t\ty: touch.clientY - top\r\n\t\t\t}\r\n\t\t},\r\n\t\tprocessMove(event, touches) {\r\n\t\t\tconst newTouches = [...touches]\r\n\t\t\tif (this.touches.length) {\r\n\t\t\t\tconst container = this.$refs.container\r\n\r\n\t\t\t\tconst { left, top } = container.getBoundingClientRect()\r\n\r\n\t\t\t\tconst coordinates = {\r\n\t\t\t\t\twidth: this.width,\r\n\t\t\t\t\theight: this.height,\r\n\t\t\t\t\tleft: this.left,\r\n\t\t\t\t\ttop: this.top\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (this.touches.length === 1 && newTouches.length === 1) {\r\n\t\t\t\t\tthis.$emit('move', new MoveEvent(event, {\r\n\t\t\t\t\t\tleft: (newTouches[0].clientX - left - this.anchor.x),\r\n\t\t\t\t\t\ttop: (newTouches[0].clientY - top - this.anchor.y)\r\n\t\t\t\t\t}))\r\n\t\t\t\t} else if (this.touches.length > 1 && this.touches.length === newTouches.length) {\r\n\t\t\t\t\tconst vectors = newTouches.map((touch, index) => ({\r\n\t\t\t\t\t\tx: touch.clientX - this.touches[index].clientX,\r\n\t\t\t\t\t\ty: touch.clientY - this.touches[index].clientY,\r\n\t\t\t\t\t\tposition: {\r\n\t\t\t\t\t\t\tclientX: touch.clientX,\r\n\t\t\t\t\t\t\tclientY: touch.clientY\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tlength: Math.sqrt(\r\n\t\t\t\t\t\t\tMath.pow(touch.clientX - this.touches[index].clientX, 2) +\r\n              Math.pow(touch.clientY - this.touches[index].clientY, 2)\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t}))\r\n\r\n\t\t\t\t\tconst summaryShift = vectors.reduce((shift, vector) => shift + vector.length, 0)\r\n\r\n\t\t\t\t\tconst massPoint = {\r\n\t\t\t\t\t\tleft: vectors.reduce((value, vector, index) => value + (1 - vector.length / summaryShift) * newTouches[index].clientX, 0),\r\n\t\t\t\t\t\ttop: vectors.reduce((value, vector, index) => value + (1 - vector.length / summaryShift) * newTouches[index].clientY, 0)\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tlet directions = {\r\n\t\t\t\t\t\ttop: 0,\r\n\t\t\t\t\t\tbottom: 0,\r\n\t\t\t\t\t\tleft: 0,\r\n\t\t\t\t\t\tright: 0\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvectors.forEach((vector, index) => {\r\n\t\t\t\t\t\tif (vector.length / summaryShift > 0.25) {\r\n\t\t\t\t\t\t\tif (newTouches[index].clientY > massPoint.top) {\r\n\t\t\t\t\t\t\t\tdirections.bottom += vector.y\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tdirections.top -= vector.y\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (newTouches[index].clientX > massPoint.left) {\r\n\t\t\t\t\t\t\t\tdirections.right += vector.x\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tdirections.left -= vector.x\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\tthis.$emit('resize', new ResizeEvent(event, directions))\r\n\t\t\t\t}\r\n\t\t\t\tthis.touches = newTouches\r\n\t\t\t}\r\n\t\t},\r\n\t\tprocessEnd() {\r\n\t\t\tthis.touches = []\r\n\t\t}\r\n\t}\r\n\r\n};\r\n</script>\r\n\r\n<template>\r\n  <div\r\n    ref=\"container\"\r\n    @touchstart=\"onTouchStart\"\r\n    @mousedown=\"onMouseDown\"\r\n  >\r\n    <slot />\r\n  </div>\r\n</template>\r\n\r\n<style lang=\"scss\">\r\n  .vue-draggable-area {\r\n\t  position: relative;\r\n  }\r\n</style>\r\n","\r\nimport classnames from 'classnames';\r\nimport Vue from 'vue';\r\nimport bem from 'easy-bem';\r\n\r\nconst cn = bem('vue-preview-result')\r\n\r\nexport default {\r\n\tname: 'PreviewResult',\r\n\tprops: {\r\n\t\timg: {\r\n\t\t\ttype: String\r\n\t\t},\r\n\t\tclassname: {\r\n\t\t\ttype: String,\r\n\t\t},\r\n\t\timageClassname: {\r\n\t\t\ttype: String,\r\n\t\t},\r\n\t\tresultCoordinates: {\r\n\t\t\ttype: Object,\r\n\t\t\tdefault() {\r\n\t\t\t\treturn {\r\n\t\t\t\t\twidth: 0,\r\n\t\t\t\t\theight: 0,\r\n\t\t\t\t\tleft: 0,\r\n\t\t\t\t\ttop: 0\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tstencilCoordinates: {\r\n\t\t\ttype: Object,\r\n\t\t\tdefault() {\r\n\t\t\t\treturn {\r\n\t\t\t\t\twidth: 0,\r\n\t\t\t\t\theight: 0,\r\n\t\t\t\t\tleft: 0,\r\n\t\t\t\t\ttop: 0\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t},\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\timageSize: {\r\n\t\t\t\twidth: 0,\r\n\t\t\t\theight: 0\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tinject: ['getArea', 'getStencil'],\r\n\tmounted() {\r\n\t\tthis.onChangeImage();\r\n\t},\r\n\tmethods: {\r\n\t\trefreshImage() {\r\n\t\t\tconst image = this.$refs.image;\r\n\t\t\tthis.imageSize.height = image.naturalHeight;\r\n\t\t\tthis.imageSize.width = image.naturalWidth;\r\n\t\t},\r\n\t\tonChangeImage() {\r\n\t\t\tconst image = this.$refs.image;\r\n\t\t\tif (image.complete) {\r\n\t\t\t\tthis.refreshImage();\r\n\t\t\t} else {\r\n\t\t\t\timage.addEventListener('load', () => {\r\n\t\t\t\t\tthis.refreshImage();\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t},\r\n\twatch: {\r\n\t\timg() {\r\n\t\t\tVue.nextTick(() => {\r\n\t\t\t\tthis.onChangeImage();\r\n\t\t\t})\r\n\t\t}\r\n\t},\r\n\tcomputed: {\r\n\t\tclassnames() {\r\n\t\t\treturn {\r\n\t\t\t\tdefault: classnames(cn(), this.classname),\r\n\t\t\t\timage: classnames(cn('image'), this.imageClassname),\r\n\t\t\t\twrapper: cn('wrapper')\r\n\t\t\t}\r\n\t\t},\r\n\t\twrapperStyle() {\r\n\t\t\treturn {\r\n\t\t\t\twidth: `${this.stencilCoordinates.width}px`,\r\n\t\t\t\theight: `${this.stencilCoordinates.height}px`,\r\n\t\t\t\tleft: `calc(50% - ${this.stencilCoordinates.width/2}px)`,\r\n\t\t\t\ttop: `calc(50% - ${this.stencilCoordinates.height/2}px)`,\r\n\t\t\t}\r\n\t\t},\r\n\t\timageStyle() {\r\n\t\t\tconst coefficient = this.stencilCoordinates.height / this.resultCoordinates.height;\r\n\t\t\tconst height = this.imageSize.height * coefficient\r\n\t\t\tconst width = this.imageSize.width * coefficient\r\n\t\t\treturn {\r\n\t\t\t\twidth: `${width}px`,\r\n\t\t\t\theight: `${height}px`,\r\n\t\t\t\tleft: `${-this.stencilCoordinates.left}px`,\r\n\t\t\t\ttop: `${-this.stencilCoordinates.top}px`\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n};\r\n","<script>\r\nimport classnames from 'classnames';\r\nimport Vue from 'vue';\r\nimport bem from 'easy-bem';\r\n\r\nconst cn = bem('vue-preview-result')\r\n\r\nexport default {\r\n\tname: 'PreviewResult',\r\n\tprops: {\r\n\t\timg: {\r\n\t\t\ttype: String\r\n\t\t},\r\n\t\tclassname: {\r\n\t\t\ttype: String,\r\n\t\t},\r\n\t\timageClassname: {\r\n\t\t\ttype: String,\r\n\t\t},\r\n\t\tresultCoordinates: {\r\n\t\t\ttype: Object,\r\n\t\t\tdefault() {\r\n\t\t\t\treturn {\r\n\t\t\t\t\twidth: 0,\r\n\t\t\t\t\theight: 0,\r\n\t\t\t\t\tleft: 0,\r\n\t\t\t\t\ttop: 0\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tstencilCoordinates: {\r\n\t\t\ttype: Object,\r\n\t\t\tdefault() {\r\n\t\t\t\treturn {\r\n\t\t\t\t\twidth: 0,\r\n\t\t\t\t\theight: 0,\r\n\t\t\t\t\tleft: 0,\r\n\t\t\t\t\ttop: 0\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t},\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\timageSize: {\r\n\t\t\t\twidth: 0,\r\n\t\t\t\theight: 0\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tinject: ['getArea', 'getStencil'],\r\n\tmounted() {\r\n\t\tthis.onChangeImage();\r\n\t},\r\n\tmethods: {\r\n\t\trefreshImage() {\r\n\t\t\tconst image = this.$refs.image;\r\n\t\t\tthis.imageSize.height = image.naturalHeight;\r\n\t\t\tthis.imageSize.width = image.naturalWidth;\r\n\t\t},\r\n\t\tonChangeImage() {\r\n\t\t\tconst image = this.$refs.image;\r\n\t\t\tif (image.complete) {\r\n\t\t\t\tthis.refreshImage();\r\n\t\t\t} else {\r\n\t\t\t\timage.addEventListener('load', () => {\r\n\t\t\t\t\tthis.refreshImage();\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t},\r\n\twatch: {\r\n\t\timg() {\r\n\t\t\tVue.nextTick(() => {\r\n\t\t\t\tthis.onChangeImage();\r\n\t\t\t})\r\n\t\t}\r\n\t},\r\n\tcomputed: {\r\n\t\tclassnames() {\r\n\t\t\treturn {\r\n\t\t\t\tdefault: classnames(cn(), this.classname),\r\n\t\t\t\timage: classnames(cn('image'), this.imageClassname),\r\n\t\t\t\twrapper: cn('wrapper')\r\n\t\t\t}\r\n\t\t},\r\n\t\twrapperStyle() {\r\n\t\t\treturn {\r\n\t\t\t\twidth: `${this.stencilCoordinates.width}px`,\r\n\t\t\t\theight: `${this.stencilCoordinates.height}px`,\r\n\t\t\t\tleft: `calc(50% - ${this.stencilCoordinates.width/2}px)`,\r\n\t\t\t\ttop: `calc(50% - ${this.stencilCoordinates.height/2}px)`,\r\n\t\t\t}\r\n\t\t},\r\n\t\timageStyle() {\r\n\t\t\tconst coefficient = this.stencilCoordinates.height / this.resultCoordinates.height;\r\n\t\t\tconst height = this.imageSize.height * coefficient\r\n\t\t\tconst width = this.imageSize.width * coefficient\r\n\t\t\treturn {\r\n\t\t\t\twidth: `${width}px`,\r\n\t\t\t\theight: `${height}px`,\r\n\t\t\t\tleft: `${-this.stencilCoordinates.left}px`,\r\n\t\t\t\ttop: `${-this.stencilCoordinates.top}px`\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n};\r\n</script>\r\n\r\n<template>\r\n  <div\r\n    :class=\"classnames.default\"\r\n  >\r\n\t<div ref=\"wrapper\" :class=\"classnames.wrapper\" :style=\"wrapperStyle\">\r\n\t\t<img\r\n\t\t\tref=\"image\"\r\n\t\t\t:src=\"img\"\r\n\t\t\t:class=\"classnames.image\"\r\n\t\t\t:style=\"imageStyle\"\r\n\t\t>\r\n\t</div>\r\n  </div>\r\n</template>\r\n\r\n<style lang=\"scss\">\r\n.vue-preview-result{\r\n  \toverflow: hidden;\r\n\tbox-sizing: border-box;\r\n\tposition: absolute;\r\n\theight: 100%;\r\n\twidth: 100%;\r\n\t&__wrapper {\r\n\t\tposition: absolute;\r\n\t}\r\n\r\n  &__image {\r\n    pointer-events: none;\r\n    position: absolute;\r\n\tuser-select: none;\r\n\t// Workaround to prevent bugs at the websites with max-width\r\n\t// rule applited to img (Vuepress for example)\r\n\tmax-width: unset !important;\r\n  }\r\n}\r\n</style>\r\n","\r\nimport classnames from 'classnames';\r\nimport bem from 'easy-bem';\r\nimport draggable from '../../mixins/draggable.js';\r\nimport { HandlerWrapper } from '../service';\r\n\r\nconst cn = bem('vue-square-handler');\r\n\r\nexport default {\r\n\tname: 'SimpleHandler',\r\n\tcomponents: {\r\n\t\tHandlerWrapper\r\n\t},\r\n\tprops: {\r\n\t\tclassname: {\r\n\t\t\ttype: String\r\n\t\t},\r\n\t\thoverClassname: {\r\n\t\t\ttype: String\r\n\t\t},\r\n\t\thorizontalPosition: {\r\n\t\t\ttype: String\r\n\t\t},\r\n\t\tverticalPosition: {\r\n\t\t\ttype: String\r\n\t\t}\r\n\t},\r\n\tcomputed: {\r\n\t\tclassnames() {\r\n\t\t\treturn {\r\n\t\t\t\tdefault: classnames(\r\n\t\t\t\t\tcn({ [this.position]: true }),\r\n\t\t\t\t\tthis.classname,\r\n\t\t\t\t\tthis.hover && this.hoverClassname\r\n\t\t\t\t)\r\n\t\t\t};\r\n\t\t}\r\n\t},\r\n\tmethods: {\r\n\t\tonDrag(dragEvent) {\r\n\t\t\tthis.$emit('drag', dragEvent);\r\n\t\t},\r\n\t\tonEnter() {\r\n\t\t\tthis.hover = true;\r\n\t\t},\r\n\t\tonLeave() {\r\n\t\t\tthis.hover = false;\r\n\t\t}\r\n\t}\r\n};\r\n","<script>\r\nimport classnames from 'classnames';\r\nimport bem from 'easy-bem';\r\nimport draggable from '../../mixins/draggable.js';\r\nimport { HandlerWrapper } from '../service';\r\n\r\nconst cn = bem('vue-square-handler');\r\n\r\nexport default {\r\n\tname: 'SimpleHandler',\r\n\tcomponents: {\r\n\t\tHandlerWrapper\r\n\t},\r\n\tprops: {\r\n\t\tclassname: {\r\n\t\t\ttype: String\r\n\t\t},\r\n\t\thoverClassname: {\r\n\t\t\ttype: String\r\n\t\t},\r\n\t\thorizontalPosition: {\r\n\t\t\ttype: String\r\n\t\t},\r\n\t\tverticalPosition: {\r\n\t\t\ttype: String\r\n\t\t}\r\n\t},\r\n\tcomputed: {\r\n\t\tclassnames() {\r\n\t\t\treturn {\r\n\t\t\t\tdefault: classnames(\r\n\t\t\t\t\tcn({ [this.position]: true }),\r\n\t\t\t\t\tthis.classname,\r\n\t\t\t\t\tthis.hover && this.hoverClassname\r\n\t\t\t\t)\r\n\t\t\t};\r\n\t\t}\r\n\t},\r\n\tmethods: {\r\n\t\tonDrag(dragEvent) {\r\n\t\t\tthis.$emit('drag', dragEvent);\r\n\t\t},\r\n\t\tonEnter() {\r\n\t\t\tthis.hover = true;\r\n\t\t},\r\n\t\tonLeave() {\r\n\t\t\tthis.hover = false;\r\n\t\t}\r\n\t}\r\n};\r\n</script>\r\n\r\n<template>\r\n  <HandlerWrapper\r\n    :vertical-position=\"verticalPosition\"\r\n    :horizontal-position=\"horizontalPosition\"\r\n    @drag=\"onDrag\"\r\n  >\r\n    <div :class=\"classnames.default\" />\r\n  </HandlerWrapper>\r\n</template>\r\n\r\n<style lang=\"scss\">\r\n.vue-square-handler {\r\n  display: block;\r\n  background: white;\r\n  height: 10px;\r\n  width: 10px;\r\n}\r\n</style>\r\n","\r\nimport classnames from 'classnames';\r\nimport bem from 'easy-bem';\r\nimport draggable from '../../mixins/draggable.js';\r\nimport { LineWrapper } from '../service';\r\n\r\nconst cn = bem('vue-default-line');\r\n\r\nexport default {\r\n\tname: 'SimpleLine',\r\n\tcomponents: {\r\n\t\tLineWrapper\r\n\t},\r\n\tprops: {\r\n\t\tclassname: {\r\n\t\t\ttype: String\r\n\t\t},\r\n\t\thoverClassname: {\r\n\t\t\ttype: String\r\n\t\t},\r\n\t\tposition: {\r\n\t\t\ttype: String\r\n\t\t}\r\n\t},\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\thover: false\r\n\t\t};\r\n\t},\r\n\tcomputed: {\r\n\t\tclassnames() {\r\n\t\t\treturn {\r\n\t\t\t\tdefault: classnames(\r\n\t\t\t\t\tcn({ [this.position]: true }),\r\n\t\t\t\t\tthis.classname,\r\n\t\t\t\t\tthis.hover && this.hoverClassname\r\n\t\t\t\t)\r\n\t\t\t};\r\n\t\t}\r\n\t},\r\n\tmethods: {\r\n\t\tonDrag(dragEvent) {\r\n\t\t\tthis.$emit('drag', dragEvent);\r\n\t\t},\r\n\t\tonEnter() {\r\n\t\t\tthis.hover = true;\r\n\t\t},\r\n\t\tonLeave() {\r\n\t\t\tthis.hover = false;\r\n\t\t}\r\n\t}\r\n};\r\n","<script>\r\nimport classnames from 'classnames';\r\nimport bem from 'easy-bem';\r\nimport draggable from '../../mixins/draggable.js';\r\nimport { LineWrapper } from '../service';\r\n\r\nconst cn = bem('vue-default-line');\r\n\r\nexport default {\r\n\tname: 'SimpleLine',\r\n\tcomponents: {\r\n\t\tLineWrapper\r\n\t},\r\n\tprops: {\r\n\t\tclassname: {\r\n\t\t\ttype: String\r\n\t\t},\r\n\t\thoverClassname: {\r\n\t\t\ttype: String\r\n\t\t},\r\n\t\tposition: {\r\n\t\t\ttype: String\r\n\t\t}\r\n\t},\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\thover: false\r\n\t\t};\r\n\t},\r\n\tcomputed: {\r\n\t\tclassnames() {\r\n\t\t\treturn {\r\n\t\t\t\tdefault: classnames(\r\n\t\t\t\t\tcn({ [this.position]: true }),\r\n\t\t\t\t\tthis.classname,\r\n\t\t\t\t\tthis.hover && this.hoverClassname\r\n\t\t\t\t)\r\n\t\t\t};\r\n\t\t}\r\n\t},\r\n\tmethods: {\r\n\t\tonDrag(dragEvent) {\r\n\t\t\tthis.$emit('drag', dragEvent);\r\n\t\t},\r\n\t\tonEnter() {\r\n\t\t\tthis.hover = true;\r\n\t\t},\r\n\t\tonLeave() {\r\n\t\t\tthis.hover = false;\r\n\t\t}\r\n\t}\r\n};\r\n</script>\r\n\r\n<template>\r\n  <LineWrapper\r\n    :position=\"position\"\r\n    @enter=\"onEnter\"\r\n    @leave=\"onLeave\"\r\n    @drag=\"onDrag\"\r\n  >\r\n    <div :class=\"classnames.default\" />\r\n  </LineWrapper>\r\n</template>\r\n\r\n<style lang=\"scss\">\r\n.vue-default-line {\r\n  background: none;\r\n  transition: border 0.5s;\r\n  border-color: rgba(white, 0.3);\r\n  border-width: 0px;\r\n  border-style: solid;\r\n\r\n  &--south,\r\n  &--north {\r\n    height: 0;\r\n    width: 100%;\r\n  }\r\n\r\n  &--east,\r\n  &--west {\r\n    height: 100%;\r\n    width: 0;\r\n  }\r\n\r\n  &--east {\r\n    border-right-width: 1px;\r\n  }\r\n  &--west {\r\n    border-left-width: 1px;\r\n  }\r\n  &--south {\r\n    border-top-width: 1px;\r\n  }\r\n  &--north {\r\n    border-bottom-width: 1px;\r\n  }\r\n\r\n  &--hover {\r\n    opacity: 1;\r\n    border-color: white;\r\n  }\r\n}\r\n</style>\r\n","\r\nimport classnames from 'classnames';\r\nimport bem from 'easy-bem';\r\nimport { PreviewResult, BoundingBox, DraggableArea } from '../service';\r\nimport { SimpleHandler } from '../handlers';\r\nimport { SimpleLine } from '../lines';\r\n\r\nconst cn = bem('vue-rectangle-stencil');\r\n\r\nexport default {\r\n\tname: 'RectangleStencil',\r\n\tcomponents: {\r\n\t\tPreviewResult,\r\n\t\tBoundingBox,\r\n\t\tDraggableArea\r\n\t},\r\n\tprops: {\r\n\t\timg: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: null\r\n\t\t},\r\n\t\tresultCoordinates: {\r\n\t\t\ttype: Object,\r\n\t\t},\r\n\t\tstencilCoordinates: {\r\n\t\t\ttype: Object,\r\n\t\t},\r\n\t\thandlers: {\r\n\t\t\ttype: Object\r\n\t\t},\r\n\t\thandlerComponent: {\r\n\t\t\ttype: [Object, String],\r\n\t\t\tdefault() {\r\n\t\t\t\treturn SimpleHandler;\r\n\t\t\t}\r\n\t\t},\r\n\t\thandlersClassnames: {\r\n\t\t\ttype: Object,\r\n\t\t\tdefault() {\r\n\t\t\t\treturn {};\r\n\t\t\t}\r\n\t\t},\r\n\t\tlines: {\r\n\t\t\ttype: Object\r\n\t\t},\r\n\t\tlineComponent: {\r\n\t\t\ttype: [Object, String],\r\n\t\t\tdefault() {\r\n\t\t\t\treturn SimpleLine;\r\n\t\t\t}\r\n\t\t},\r\n\t\tlinesClassnames: {\r\n\t\t\ttype: Object,\r\n\t\t\tdefault() {\r\n\t\t\t\treturn {};\r\n\t\t\t}\r\n\t\t},\r\n\t\tclassname: {\r\n\t\t\ttype: String\r\n\t\t},\r\n\t\tpreviewClassname: {\r\n\t\t\ttype: String\r\n\t\t},\r\n\t\tboundingBoxClassname: {\r\n\t\t\ttype: String\r\n\t\t},\r\n\t\taspectRatio: {\r\n\t\t\ttype: [Number, String]\r\n\t\t},\r\n\t\tminAspectRatio: {\r\n\t\t\ttype: [Number, String]\r\n\t\t},\r\n\t\tmaxAspectRatio: {\r\n\t\t\ttype: [Number, String]\r\n\t\t}\r\n\t},\r\n\tmethods: {\r\n\t\tonMove(moveEvent) {\r\n\t\t\tthis.$emit('move', moveEvent);\r\n\t\t},\r\n\t\tonResize(resizeEvent) {\r\n\t\t\tthis.$emit('resize', resizeEvent);\r\n\t\t},\r\n\t\taspectRatios() {\r\n\t\t\treturn {\r\n\t\t\t\tminimum: this.aspectRatio || this.minAspectRatio,\r\n\t\t\t\tmaximum: this.aspectRatio || this.maxAspectRatio\r\n\t\t\t};\r\n\t\t}\r\n\t},\r\n\tcomputed: {\r\n\t\tclasses() {\r\n\t\t\treturn {\r\n\t\t\t\tstencil: classnames(cn(), this.classname),\r\n\t\t\t\tpreview: classnames(cn('preview'), this.previewClassname),\r\n\t\t\t\tboundingBox: classnames(cn('bounding-box'), this.boundingBoxClassname),\r\n\t\t\t};\r\n\t\t},\r\n\t\tstyle() {\r\n\t\t\tconst { height, width, left, top } = this.stencilCoordinates;\r\n\t\t\treturn {\r\n\t\t\t\twidth: `${width}px`,\r\n\t\t\t\theight: `${height}px`,\r\n\t\t\t\tleft: `${left}px`,\r\n\t\t\t\ttop: `${top}px`\r\n\t\t\t};\r\n\t\t}\r\n\t}\r\n};\r\n","<script>\r\nimport classnames from 'classnames';\r\nimport bem from 'easy-bem';\r\nimport { PreviewResult, BoundingBox, DraggableArea } from '../service';\r\nimport { SimpleHandler } from '../handlers';\r\nimport { SimpleLine } from '../lines';\r\n\r\nconst cn = bem('vue-rectangle-stencil');\r\n\r\nexport default {\r\n\tname: 'RectangleStencil',\r\n\tcomponents: {\r\n\t\tPreviewResult,\r\n\t\tBoundingBox,\r\n\t\tDraggableArea\r\n\t},\r\n\tprops: {\r\n\t\timg: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: null\r\n\t\t},\r\n\t\tresultCoordinates: {\r\n\t\t\ttype: Object,\r\n\t\t},\r\n\t\tstencilCoordinates: {\r\n\t\t\ttype: Object,\r\n\t\t},\r\n\t\thandlers: {\r\n\t\t\ttype: Object\r\n\t\t},\r\n\t\thandlerComponent: {\r\n\t\t\ttype: [Object, String],\r\n\t\t\tdefault() {\r\n\t\t\t\treturn SimpleHandler;\r\n\t\t\t}\r\n\t\t},\r\n\t\thandlersClassnames: {\r\n\t\t\ttype: Object,\r\n\t\t\tdefault() {\r\n\t\t\t\treturn {};\r\n\t\t\t}\r\n\t\t},\r\n\t\tlines: {\r\n\t\t\ttype: Object\r\n\t\t},\r\n\t\tlineComponent: {\r\n\t\t\ttype: [Object, String],\r\n\t\t\tdefault() {\r\n\t\t\t\treturn SimpleLine;\r\n\t\t\t}\r\n\t\t},\r\n\t\tlinesClassnames: {\r\n\t\t\ttype: Object,\r\n\t\t\tdefault() {\r\n\t\t\t\treturn {};\r\n\t\t\t}\r\n\t\t},\r\n\t\tclassname: {\r\n\t\t\ttype: String\r\n\t\t},\r\n\t\tpreviewClassname: {\r\n\t\t\ttype: String\r\n\t\t},\r\n\t\tboundingBoxClassname: {\r\n\t\t\ttype: String\r\n\t\t},\r\n\t\taspectRatio: {\r\n\t\t\ttype: [Number, String]\r\n\t\t},\r\n\t\tminAspectRatio: {\r\n\t\t\ttype: [Number, String]\r\n\t\t},\r\n\t\tmaxAspectRatio: {\r\n\t\t\ttype: [Number, String]\r\n\t\t}\r\n\t},\r\n\tmethods: {\r\n\t\tonMove(moveEvent) {\r\n\t\t\tthis.$emit('move', moveEvent);\r\n\t\t},\r\n\t\tonResize(resizeEvent) {\r\n\t\t\tthis.$emit('resize', resizeEvent);\r\n\t\t},\r\n\t\taspectRatios() {\r\n\t\t\treturn {\r\n\t\t\t\tminimum: this.aspectRatio || this.minAspectRatio,\r\n\t\t\t\tmaximum: this.aspectRatio || this.maxAspectRatio\r\n\t\t\t};\r\n\t\t}\r\n\t},\r\n\tcomputed: {\r\n\t\tclasses() {\r\n\t\t\treturn {\r\n\t\t\t\tstencil: classnames(cn(), this.classname),\r\n\t\t\t\tpreview: classnames(cn('preview'), this.previewClassname),\r\n\t\t\t\tboundingBox: classnames(cn('bounding-box'), this.boundingBoxClassname),\r\n\t\t\t};\r\n\t\t},\r\n\t\tstyle() {\r\n\t\t\tconst { height, width, left, top } = this.stencilCoordinates;\r\n\t\t\treturn {\r\n\t\t\t\twidth: `${width}px`,\r\n\t\t\t\theight: `${height}px`,\r\n\t\t\t\tleft: `${left}px`,\r\n\t\t\t\ttop: `${top}px`\r\n\t\t\t};\r\n\t\t}\r\n\t}\r\n};\r\n</script>\r\n\r\n<template>\r\n  <div :class=\"classes.stencil\" :style=\"style\">\r\n    <BoundingBox\r\n      @resize=\"onResize\"\r\n      :classname=\"classes.boundingBox\"\r\n      :handlers=\"handlers\"\r\n      :handlerComponent=\"handlerComponent\"\r\n      :handlersClassnames=\"handlersClassnames\"\r\n      :lines=\"lines\"\r\n      :lineComponent=\"lineComponent\"\r\n      :linesClassnames=\"linesClassnames\"\r\n    >\r\n      <DraggableArea @move=\"onMove\">\r\n        <PreviewResult\r\n          :img=\"img\"\r\n          :classname=\"classes.preview\"\r\n\t\t  :resultCoordinates=\"resultCoordinates\"\r\n\t\t  :stencilCoordinates=\"stencilCoordinates\"\r\n        />\r\n      </DraggableArea>\r\n    </BoundingBox>\r\n  </div>\r\n</template>\r\n\r\n<style lang=\"scss\">\r\n.vue-rectangle-stencil {\r\n  position: absolute;\r\n  height: 100%;\r\n  width: 100%;\r\n  box-sizing: border-box;\r\n  cursor: move;\r\n}\r\n</style>\r\n","\r\nimport classnames from 'classnames';\r\nimport bem from 'easy-bem';\r\nimport { PreviewResult, BoundingBox, DraggableArea } from '../service';\r\nimport { SimpleHandler } from '../handlers';\r\nimport { SimpleLine } from '../lines';\r\n\r\nconst cn = bem('vue-round-stencil');\r\n\r\nexport default {\r\n\tname: 'RoundStencil',\r\n\tcomponents: {\r\n\t\tPreviewResult,\r\n\t\tBoundingBox,\r\n\t\tDraggableArea\r\n\t},\r\n\tprops: {\r\n\t\timg: {\r\n\t\t\ttype: String\r\n\t\t},\r\n\t\tstencilClass: {\r\n\t\t\ttype: String\r\n\t\t},\r\n\t\tresultCoordinates: {\r\n\t\t\ttype: Object,\r\n\t\t},\r\n\t\tstencilCoordinates: {\r\n\t\t\ttype: Object,\r\n\t\t},\r\n\t\thandlers: {\r\n\t\t\ttype: Object,\r\n\t\t\tdefault() {\r\n\t\t\t\treturn {\r\n\t\t\t\t\teastNorth: true,\r\n\t\t\t\t\twestNorth: true,\r\n\t\t\t\t\twestSouth: true,\r\n\t\t\t\t\teastSouth: true,\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\thandlerComponent: {\r\n\t\t\ttype: [Object, String],\r\n\t\t\tdefault() {\r\n\t\t\t\treturn SimpleHandler;\r\n\t\t\t}\r\n\t\t},\r\n\t\thandlersClassnames: {\r\n\t\t\ttype: Object,\r\n\t\t\tdefault() {\r\n\t\t\t\treturn {};\r\n\t\t\t}\r\n\t\t},\r\n\t\tlines: {\r\n\t\t\ttype: Object\r\n\t\t},\r\n\t\tlineComponent: {\r\n\t\t\ttype: [Object, String],\r\n\t\t\tdefault() {\r\n\t\t\t\treturn SimpleLine;\r\n\t\t\t}\r\n\t\t},\r\n\t\tlinesClassnames: {\r\n\t\t\ttype: Object,\r\n\t\t\tdefault() {\r\n\t\t\t\treturn {};\r\n\t\t\t}\r\n\t\t},\r\n\t\tclassname: {\r\n\t\t\ttype: String\r\n\t\t},\r\n\t\tpreviewClassname: {\r\n\t\t\ttype: String\r\n\t\t},\r\n\t\tboundingBoxClassname: {\r\n\t\t\ttype: String\r\n\t\t},\r\n\t},\r\n\tmethods: {\r\n\t\tonMove(moveEvent) {\r\n\t\t\tthis.$emit('move', moveEvent);\r\n\t\t},\r\n\t\tonResize(resizeEvent) {\r\n\t\t\tthis.$emit('resize', resizeEvent);\r\n\t\t},\r\n\t\taspectRatios() {\r\n\t\t\treturn {\r\n\t\t\t\tminimum: 1,\r\n\t\t\t\tmaximum: 1\r\n\t\t\t};\r\n\t\t}\r\n\t},\r\n\tcomputed: {\r\n\t\tclasses() {\r\n\t\t\treturn {\r\n\t\t\t\tstencil: classnames(cn(), this.classname),\r\n\t\t\t\tpreview: classnames(cn('preview'), this.previewClassname),\r\n\t\t\t\tboundingBox: classnames(cn('bounding-box'), this.boundingBox),\r\n\t\t\t};\r\n\t\t},\r\n\t\tstyle() {\r\n\t\t\tconst { height, width, left, top } = this.stencilCoordinates;\r\n\t\t\treturn {\r\n\t\t\t\twidth: `${width}px`,\r\n\t\t\t\theight: `${height}px`,\r\n\t\t\t\tleft: `${left}px`,\r\n\t\t\t\ttop: `${top}px`\r\n\t\t\t};\r\n\t\t}\r\n\t}\r\n};\r\n","<script>\r\nimport classnames from 'classnames';\r\nimport bem from 'easy-bem';\r\nimport { PreviewResult, BoundingBox, DraggableArea } from '../service';\r\nimport { SimpleHandler } from '../handlers';\r\nimport { SimpleLine } from '../lines';\r\n\r\nconst cn = bem('vue-round-stencil');\r\n\r\nexport default {\r\n\tname: 'RoundStencil',\r\n\tcomponents: {\r\n\t\tPreviewResult,\r\n\t\tBoundingBox,\r\n\t\tDraggableArea\r\n\t},\r\n\tprops: {\r\n\t\timg: {\r\n\t\t\ttype: String\r\n\t\t},\r\n\t\tstencilClass: {\r\n\t\t\ttype: String\r\n\t\t},\r\n\t\tresultCoordinates: {\r\n\t\t\ttype: Object,\r\n\t\t},\r\n\t\tstencilCoordinates: {\r\n\t\t\ttype: Object,\r\n\t\t},\r\n\t\thandlers: {\r\n\t\t\ttype: Object,\r\n\t\t\tdefault() {\r\n\t\t\t\treturn {\r\n\t\t\t\t\teastNorth: true,\r\n\t\t\t\t\twestNorth: true,\r\n\t\t\t\t\twestSouth: true,\r\n\t\t\t\t\teastSouth: true,\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\thandlerComponent: {\r\n\t\t\ttype: [Object, String],\r\n\t\t\tdefault() {\r\n\t\t\t\treturn SimpleHandler;\r\n\t\t\t}\r\n\t\t},\r\n\t\thandlersClassnames: {\r\n\t\t\ttype: Object,\r\n\t\t\tdefault() {\r\n\t\t\t\treturn {};\r\n\t\t\t}\r\n\t\t},\r\n\t\tlines: {\r\n\t\t\ttype: Object\r\n\t\t},\r\n\t\tlineComponent: {\r\n\t\t\ttype: [Object, String],\r\n\t\t\tdefault() {\r\n\t\t\t\treturn SimpleLine;\r\n\t\t\t}\r\n\t\t},\r\n\t\tlinesClassnames: {\r\n\t\t\ttype: Object,\r\n\t\t\tdefault() {\r\n\t\t\t\treturn {};\r\n\t\t\t}\r\n\t\t},\r\n\t\tclassname: {\r\n\t\t\ttype: String\r\n\t\t},\r\n\t\tpreviewClassname: {\r\n\t\t\ttype: String\r\n\t\t},\r\n\t\tboundingBoxClassname: {\r\n\t\t\ttype: String\r\n\t\t},\r\n\t},\r\n\tmethods: {\r\n\t\tonMove(moveEvent) {\r\n\t\t\tthis.$emit('move', moveEvent);\r\n\t\t},\r\n\t\tonResize(resizeEvent) {\r\n\t\t\tthis.$emit('resize', resizeEvent);\r\n\t\t},\r\n\t\taspectRatios() {\r\n\t\t\treturn {\r\n\t\t\t\tminimum: 1,\r\n\t\t\t\tmaximum: 1\r\n\t\t\t};\r\n\t\t}\r\n\t},\r\n\tcomputed: {\r\n\t\tclasses() {\r\n\t\t\treturn {\r\n\t\t\t\tstencil: classnames(cn(), this.classname),\r\n\t\t\t\tpreview: classnames(cn('preview'), this.previewClassname),\r\n\t\t\t\tboundingBox: classnames(cn('bounding-box'), this.boundingBox),\r\n\t\t\t};\r\n\t\t},\r\n\t\tstyle() {\r\n\t\t\tconst { height, width, left, top } = this.stencilCoordinates;\r\n\t\t\treturn {\r\n\t\t\t\twidth: `${width}px`,\r\n\t\t\t\theight: `${height}px`,\r\n\t\t\t\tleft: `${left}px`,\r\n\t\t\t\ttop: `${top}px`\r\n\t\t\t};\r\n\t\t}\r\n\t}\r\n};\r\n</script>\r\n\r\n<template>\r\n  <div :class=\"classes.stencil\" :style=\"style\">\r\n    <BoundingBox\r\n      @resize=\"onResize\"\r\n      :classname=\"classes.boundingBox\"\r\n      :handlers=\"handlers\"\r\n      :handlerComponent=\"handlerComponent\"\r\n      :handlersClassnames=\"handlersClassnames\"\r\n      :lines=\"lines\"\r\n      :lineComponent=\"lineComponent\"\r\n      :linesClassnames=\"linesClassnames\"\r\n    >\r\n      <DraggableArea @move=\"onMove\">\r\n        <PreviewResult\r\n          :img=\"img\"\r\n          :classname=\"classes.preview\"\r\n\t\t  :resultCoordinates=\"resultCoordinates\"\r\n\t\t  :stencilCoordinates=\"stencilCoordinates\"\r\n        />\r\n      </DraggableArea>\r\n    </BoundingBox>\r\n  </div>\r\n</template>\r\n\r\n<style lang=\"scss\">\r\n.vue-round-stencil {\r\n  position: absolute;\r\n  height: 100%;\r\n  width: 100%;\r\n  box-sizing: content-box;\r\n  cursor: move;\r\n  &__preview {\r\n\t  border-radius: 50%;\r\n  }\r\n}\r\n</style>\r\n","\nimport classnames from 'classnames';\nimport bem from 'easy-bem';\nimport Vue from 'vue';\nimport debounce from 'debounce';\n\nimport { RectangleStencil } from './components/stencils';\nimport { ResizeEvent, MoveEvent } from './utils/events';\nimport { isCrossOriginURL } from './utils/core';\n\nimport * as core from './utils/core';\n\nconst cn = bem('vue-advanced-cropper');\n\nexport default {\n\tname: 'Cropper',\n\tprops: {\n\t\tsrc: {\n\t\t\ttype: String,\n\t\t\tdefault: null\n\t\t},\n\t\tresizeAlgorithm: {\n\t\t\ttype: Function,\n\t\t\tdefault: core.resize\n\t\t},\n\t\tmoveAlgorithm: {\n\t\t\ttype: Function,\n\t\t\tdefault: core.move\n\t\t},\n\t\tdefaultSize: {\n\t\t\ttype: Function,\n\t\t\tdefault: core.defaultSize\n\t\t},\n\t\tdefaultPosition: {\n\t\t\ttype: Function,\n\t\t\tdefault: core.defaultPosition\n\t\t},\n\t\tareaSize: {\n\t\t\ttype: Function,\n\t\t\tdefault: core.areaSize\n\t\t},\n\t\tminWidth: {\n\t\t\ttype: [Number, String],\n\t\t\tdefault: 10\n\t\t},\n\t\tminHeight: {\n\t\t\ttype: [Number, String],\n\t\t\tdefault: 10\n\t\t},\n\t\tmaxWidth: {\n\t\t\ttype: [Number, String],\n\t\t\tdefault: 100\n\t\t},\n\t\tmaxHeight: {\n\t\t\ttype: [Number, String],\n\t\t\tdefault: 100\n\t\t},\n\t\tstencilComponent: {\n\t\t\ttype: [Object, String],\n\t\t\tdefault() {\n\t\t\t\treturn RectangleStencil;\n\t\t\t}\n\t\t},\n\t\tstencilProps: {\n\t\t\ttype: Object,\n\t\t\tdefault() {\n\t\t\t\treturn {};\n\t\t\t}\n\t\t},\n\t\tclassname: {\n\t\t\ttype: String\n\t\t},\n\t\timageClassname: {\n\t\t\ttype: String\n\t\t},\n\t\tareaClassname: {\n\t\t\ttype: String\n\t\t},\n\t\tbackgroundClassname: {\n\t\t\ttype: String\n\t\t},\n\t\tdebounce: {\n\t\t\ttype: Number,\n\t\t\tdefault: 500\n\t\t},\n\t\tcanvas: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true\n\t\t},\n\t\tcheckCrossOrigin: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true\n\t\t}\n\t},\n\tprovide() {\n\t\treturn {\n\t\t\tgetArea: this.getArea,\n\t\t\tgetStencil: this.getStencil,\n\t\t}\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tboundarySize: {\n\t\t\t\twidth: null,\n\t\t\t\theight: null\n\t\t\t},\n\t\t\timageAttributes: {\n\t\t\t\tcrossOrigin: false\n\t\t\t},\n\t\t\timageSize: {\n\t\t\t\twidth: null,\n\t\t\t\theight: null\n\t\t\t},\n\t\t\tcoordinates: {\n\t\t\t\tleft: 0,\n\t\t\t\ttop: 0,\n\t\t\t\twidth: 0,\n\t\t\t\theight: 0\n\t\t\t}\n\t\t};\n\t},\n\tcomputed: {\n\t\timageLoaded() {\n\t\t\treturn this.imageSize.width > 0 && this.imageSize.height > 0\n\t\t},\n\t\tcoefficient() {\n\t\t\treturn this.imageSize.width\n\t\t\t\t? this.imageSize.width / this.boundarySize.width\n\t\t\t\t: 0;\n\t\t},\n\t\tclasses() {\n\t\t\treturn {\n\t\t\t\tcropper: classnames(cn(), this.classname),\n\t\t\t\timage: classnames(cn('image'), this.imageClassname),\n\t\t\t\tarea: classnames(cn('area'), this.areaClassname),\n\t\t\t\tstretcher: classnames(cn('stretcher')),\n\t\t\t\tbackground: classnames(cn('background'), this.backgroundClassname)\n\t\t\t};\n\t\t},\n\t\tstencilCoordinates() {\n\t\t\tconst { width, height, left, top } = this.coordinates;\n\t\t\treturn {\n\t\t\t\twidth: width / this.coefficient,\n\t\t\t\theight: height / this.coefficient,\n\t\t\t\tleft: left / this.coefficient,\n\t\t\t\ttop: top / this.coefficient\n\t\t\t};\n\t\t},\n\t\twrapperStyle() {\n\t\t\treturn {\n\t\t\t\twidth: `${this.stencilCoordinates.width}px`,\n\t\t\t\theight: `${this.stencilCoordinates.height}px`,\n\t\t\t\tleft: `${this.stencilCoordinates.left}px`,\n\t\t\t\ttop: `${this.stencilCoordinates.top}px`\n\t\t\t};\n\t\t},\n\t\tareaStyle() {\n\t\t\treturn {\n\t\t\t\twidth: this.boundarySize.width\n\t\t\t\t\t? `${this.boundarySize.width}px`\n\t\t\t\t\t: 'auto',\n\t\t\t\theight: this.boundarySize.height\n\t\t\t\t\t? `${this.boundarySize.height}px`\n\t\t\t\t\t: 'auto',\n\t\t\t\topacity: this.imageLoaded ? 1 : 0\n\t\t\t};\n\t\t},\n\t\timageStyle() {\n\t\t\tconst result = {};\n\n\t\t\tif (this.imageSize.width > this.imageSize.height) {\n\t\t\t\tresult.width = '100%'\n\t\t\t\tresult.left = 0;\n\t\t\t\tresult.top = '50%'\n\t\t\t\tresult.transform = 'translateY(-50%)'\n\t\t\t} else {\n\t\t\t\tresult.height = '100%'\n\t\t\t\tresult.top = 0\n\t\t\t\tresult.left = '50%'\n\t\t\t\tresult.transform = 'translateX(-50%)'\n\t\t\t}\n\n\t\t\tif (!this.imageSize.width || !this.imageSize.height) {\n\t\t\t\tresult.opacity = 0\n\t\t\t}\n\n\t\t\treturn result;\n\t\t},\n\t\trestrictions() {\n\t\t\treturn {\n\t\t\t\tminHeight: this.imageSize.height * this.minHeight / 100,\n\t\t\t\tminWidth: this.imageSize.width * this.minWidth / 100,\n\t\t\t\tmaxHeight: this.imageSize.height * this.maxHeight / 100,\n\t\t\t\tmaxWidth: this.imageSize.width * this.maxWidth / 100\n\t\t\t};\n\t\t}\n\t},\n\tmounted() {\n\t\tthis.debouncedUpdateCoordinates = debounce(\n\t\t\tthis.updateCoordinates,\n\t\t\tthis.debounce\n\t\t);\n\t\tif (this.src) {\n\t\t\tthis.onChangeImage();\n\t\t}\n\t\twindow.addEventListener('resize', this.refreshImage);\n\t\twindow.addEventListener('orientationchange', this.refreshImage);\n\t},\n\tdestroyed() {\n\t\twindow.removeEventListener('resize', this.refreshImage);\n\t\twindow.removeEventListener('orientationchange', this.refreshImage);\n\t},\n\twatch: {\n\t\tsrc() {\n\t\t\tVue.nextTick(() => {\n\t\t\t\tthis.onChangeImage();\n\t\t\t})\n\t\t}\n\t},\n\tmethods: {\n\t\t// External methods\n\t\tgetResult() {\n\t\t\tif (this.canvas) {\n\t\t\t\tthis.updateCanvas(this.coordinates);\n\t\t\t\treturn {\n\t\t\t\t\tcoordinates: { ...this.coordinates },\n\t\t\t\t\tcanvas: this.$refs.canvas\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treturn {\n\t\t\t\t\tcoordinates: { ...this.coordinates },\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t// Internal methods\n\t\tgetArea() {\n\t\t\treturn this.$refs.area\n\t\t},\n\t\tgetStencil() {\n\t\t\treturn this.$refs.stencil\n\t\t},\n\t\tupdateCanvas(coordinates) {\n\t\t\t// This function can be asynchronously called because it's debounced\n\t\t\t// Therefore there is workaround to prevent processing after the component was unmounted\n\t\t\tif (!this.$refs.canvas) return\n\n\t\t\tconst canvas = this.$refs.canvas;\n\t\t\tcanvas.width = coordinates.width;\n\t\t\tcanvas.height = coordinates.height;\n\n\t\t\tconst ctx = canvas.getContext('2d');\n\t\t\tconst image = this.$refs.image;\n\t\t\tctx.drawImage(\n\t\t\t\timage,\n\t\t\t\tcoordinates.left,\n\t\t\t\tcoordinates.top,\n\t\t\t\tcoordinates.width,\n\t\t\t\tcoordinates.height,\n\t\t\t\t0,\n\t\t\t\t0,\n\t\t\t\tcoordinates.width,\n\t\t\t\tcoordinates.height\n\t\t\t);\n\t\t},\n\t\tupdateCoordinates(coordinates) {\n\t\t\tthis.$emit('change', this.getResult());\n\t\t},\n\t\tonChangeCoordinates(newCoordinates) {\n\t\t\tthis.coordinates = newCoordinates;\n\t\t\tif (this.$listeners && this.$listeners.change) {\n\t\t\t\tthis.debouncedUpdateCoordinates(newCoordinates);\n\t\t\t}\n\t\t},\n\t\tonChangeImage() {\n\t\t\tconst image = this.$refs.image;\n\t\t\tif (this.canvas && this.checkCrossOrigin === false) {\n\t\t\t\tif (!/^data:/.test(this.src) && !/^blob:/.test(this.src) && !isCrossOriginURL(this.src)) {\n\t\t\t\t\tthis.imageAttributes.crossOrigin = 'anonymous';\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (image) {\n\t\t\t\tif (image.complete) {\n\t\t\t\t\tthis.refreshImage().then(this.resetCoordinates);\n\t\t\t\t} else {\n\t\t\t\t\timage.addEventListener('load', () => {\n\t\t\t\t\t\t// After loading image the current component can be unmounted\n\t\t\t\t\t\t// Therefore there is a workaround to prevent processing the following code\n\t\t\t\t\t\tif (this.$refs.image) {\n\t\t\t\t\t\t\tthis.refreshImage().then(this.resetCoordinates);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tonResize(resizeEvent) {\n\t\t\tthis.onChangeCoordinates(\n\t\t\t\tthis.resizeAlgorithm(\n\t\t\t\t\tthis.coordinates,\n\t\t\t\t\tthis.restrictions,\n\t\t\t\t\tthis.imageSize,\n\t\t\t\t\tthis.coefficient,\n\t\t\t\t\tthis.stencilAspectRatios(),\n\t\t\t\t\tresizeEvent\n\t\t\t\t)\n\t\t\t);\n\t\t},\n\t\tonMove(moveEvent) {\n\t\t\tthis.onChangeCoordinates(\n\t\t\t\tthis.moveAlgorithm(\n\t\t\t\t\tthis.coordinates,\n\t\t\t\t\tthis.imageSize,\n\t\t\t\t\tthis.coefficient,\n\t\t\t\t\tmoveEvent\n\t\t\t\t)\n\t\t\t);\n\t\t},\n\t\tresetCoordinates() {\n\t\t\t// This function can be asynchronously called after completion of refreshing image promise\n\t\t\t// Therefore there is a workaround to prevent processing after the component was unmounted\n\t\t\tif (!this.$refs.image) return\n\n\t\t\tconst cropper = this.$refs.cropper;\n\t\t\tconst image = this.$refs.image;\n\t\t\tconst imageSize = this.imageSize;\n\t\t\tconst { minWidth, minHeight, maxWidth, maxHeight } = this.restrictions;\n\t\t\tconst aspectRatio = this.stencilAspectRatios();\n\t\t\tconst coefficient = this.coefficient;\n\n\t\t\tlet coordinates = {};\n\n\t\t\tif (minWidth * aspectRatio.minimum < minHeight) {\n\t\t\t\tcoordinates.height = minHeight;\n\t\t\t\tcoordinates.width = aspectRatio.maximum\n\t\t\t\t\t? minHeight * aspectRatio.maximum\n\t\t\t\t\t: minWidth;\n\t\t\t} else {\n\t\t\t\tcoordinates.width = minWidth;\n\t\t\t\tcoordinates.height = aspectRatio.minimum\n\t\t\t\t\t? minWidth * aspectRatio.minimum\n\t\t\t\t\t: minHeight;\n\t\t\t}\n\n\t\t\tif (coordinates.height < minHeight || coordinates.height > maxHeight) {\n\t\t\t\tthrow 'Current aspect ratio can\\'t is uncompatible with minimum/maximum height and width settings. Can\\'t setup default coordinates';\n\t\t\t}\n\n\t\t\tcoordinates.left = imageSize.width / 2 - coordinates.width / 2;\n\t\t\tcoordinates.top = imageSize.height / 2 - coordinates.height / 2;\n\n\t\t\tconst defaultSize = this.defaultSize(cropper, image, this.$props);\n\t\t\tcoordinates = this.resizeAlgorithm(\n\t\t\t\tcoordinates,\n\t\t\t\tthis.restrictions,\n\t\t\t\timageSize,\n\t\t\t\tcoefficient,\n\t\t\t\taspectRatio,\n\t\t\t\tnew ResizeEvent(null, {\n\t\t\t\t\tleft: (defaultSize.width - coordinates.width) / (2 * coefficient),\n\t\t\t\t\tright: (defaultSize.width - coordinates.width) / (2 * coefficient),\n\t\t\t\t\ttop: (defaultSize.height - coordinates.height) / (2 * coefficient),\n\t\t\t\t\tbottom: (defaultSize.height - coordinates.height) / (2 * coefficient)\n\t\t\t\t})\n\t\t\t);\n\n\t\t\tconst defaultPosition = this.defaultPosition(\n\t\t\t\tcropper,\n\t\t\t\timage,\n\t\t\t\tcoordinates.width,\n\t\t\t\tcoordinates.height,\n\t\t\t\tthis.$props\n\t\t\t);\n\t\t\tcoordinates = this.moveAlgorithm(\n\t\t\t\tcoordinates,\n\t\t\t\timageSize,\n\t\t\t\tcoefficient,\n\t\t\t\tnew MoveEvent(null, {\n\t\t\t\t\tleft: (defaultPosition.left - coordinates.left) / coefficient,\n\t\t\t\t\ttop: (defaultPosition.top - coordinates.top) / coefficient\n\t\t\t\t})\n\t\t\t);\n\n\t\t\tthis.onChangeCoordinates(coordinates);\n\t\t},\n\t\trefreshImage() {\n\t\t\tconst image = this.$refs.image;\n\t\t\tconst stretcher = this.$refs.stretcher;\n\t\t\tconst cropper = this.$refs.cropper;\n\n\t\t\tconst aspectRatio = image.naturalWidth / image.naturalHeight\n\n\t\t\tif (image.naturalHeight > image.naturalWidth) {\n\t\t\t\tstretcher.style.height = `${image.naturalHeight}px`\n\t\t\t\tstretcher.style.width = `${stretcher.clientHeight * aspectRatio}px`\n\t\t\t\tif (stretcher.clientWidth / stretcher.clientHeight !== aspectRatio) {\n\t\t\t\t\tstretcher.style.height = `${stretcher.clientWidth / aspectRatio}px`\n\t\t\t\t}\n\n\t\t\t} else {\n\t\t\t\tstretcher.style.width = `${image.naturalWidth}px`\n\t\t\t\tstretcher.style.height = `${stretcher.clientWidth / aspectRatio }px`\n\t\t\t\tif (stretcher.clientHeight / stretcher.clientWidth !== aspectRatio) {\n\t\t\t\t\tstretcher.style.width = `${stretcher.clientHeight * aspectRatio}px`\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn new Promise(resolve => {\n\t\t\t\tconst cropper = this.$refs.cropper;\n\t\t\t\tconst image = this.$refs.image;\n\n\t\t\t\tthis.imageSize.height = image.naturalHeight;\n\t\t\t\tthis.imageSize.width = image.naturalWidth;\n\n\t\t\t\tVue.nextTick(() => {\n\t\t\t\t\tconst { height, width } = this.areaSize(cropper, image);\n\n\t\t\t\t\tif (height) {\n\t\t\t\t\t\tthis.boundarySize.height = height;\n\t\t\t\t\t}\n\t\t\t\t\tif (width) {\n\t\t\t\t\t\tthis.boundarySize.width = width;\n\t\t\t\t\t}\n\t\t\t\t\tresolve();\n\t\t\t\t})\n\n\t\t\t});\n\n\t\t},\n\t\tstencilAspectRatios() {\n\t\t\tif (this.$refs.stencil.aspectRatios) {\n\t\t\t\treturn this.$refs.stencil.aspectRatios();\n\t\t\t} else {\n\t\t\t\treturn {\n\t\t\t\t\tminimum: this.stencilProps.aspectRatio || this.stencilProps.minAspectRatio,\n\t\t\t\t\tmaximum: this.stencilProps.aspectRatio || this.stencilProps.maxAspectRatio\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\t}\n};\n","<script>\nimport classnames from 'classnames';\nimport bem from 'easy-bem';\nimport Vue from 'vue';\nimport debounce from 'debounce';\n\nimport { RectangleStencil } from './components/stencils';\nimport { ResizeEvent, MoveEvent } from './utils/events';\nimport { isCrossOriginURL } from './utils/core';\n\nimport * as core from './utils/core';\n\nconst cn = bem('vue-advanced-cropper');\n\nexport default {\n\tname: 'Cropper',\n\tprops: {\n\t\tsrc: {\n\t\t\ttype: String,\n\t\t\tdefault: null\n\t\t},\n\t\tresizeAlgorithm: {\n\t\t\ttype: Function,\n\t\t\tdefault: core.resize\n\t\t},\n\t\tmoveAlgorithm: {\n\t\t\ttype: Function,\n\t\t\tdefault: core.move\n\t\t},\n\t\tdefaultSize: {\n\t\t\ttype: Function,\n\t\t\tdefault: core.defaultSize\n\t\t},\n\t\tdefaultPosition: {\n\t\t\ttype: Function,\n\t\t\tdefault: core.defaultPosition\n\t\t},\n\t\tareaSize: {\n\t\t\ttype: Function,\n\t\t\tdefault: core.areaSize\n\t\t},\n\t\tminWidth: {\n\t\t\ttype: [Number, String],\n\t\t\tdefault: 10\n\t\t},\n\t\tminHeight: {\n\t\t\ttype: [Number, String],\n\t\t\tdefault: 10\n\t\t},\n\t\tmaxWidth: {\n\t\t\ttype: [Number, String],\n\t\t\tdefault: 100\n\t\t},\n\t\tmaxHeight: {\n\t\t\ttype: [Number, String],\n\t\t\tdefault: 100\n\t\t},\n\t\tstencilComponent: {\n\t\t\ttype: [Object, String],\n\t\t\tdefault() {\n\t\t\t\treturn RectangleStencil;\n\t\t\t}\n\t\t},\n\t\tstencilProps: {\n\t\t\ttype: Object,\n\t\t\tdefault() {\n\t\t\t\treturn {};\n\t\t\t}\n\t\t},\n\t\tclassname: {\n\t\t\ttype: String\n\t\t},\n\t\timageClassname: {\n\t\t\ttype: String\n\t\t},\n\t\tareaClassname: {\n\t\t\ttype: String\n\t\t},\n\t\tbackgroundClassname: {\n\t\t\ttype: String\n\t\t},\n\t\tdebounce: {\n\t\t\ttype: Number,\n\t\t\tdefault: 500\n\t\t},\n\t\tcanvas: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true\n\t\t},\n\t\tcheckCrossOrigin: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true\n\t\t}\n\t},\n\tprovide() {\n\t\treturn {\n\t\t\tgetArea: this.getArea,\n\t\t\tgetStencil: this.getStencil,\n\t\t}\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tboundarySize: {\n\t\t\t\twidth: null,\n\t\t\t\theight: null\n\t\t\t},\n\t\t\timageAttributes: {\n\t\t\t\tcrossOrigin: false\n\t\t\t},\n\t\t\timageSize: {\n\t\t\t\twidth: null,\n\t\t\t\theight: null\n\t\t\t},\n\t\t\tcoordinates: {\n\t\t\t\tleft: 0,\n\t\t\t\ttop: 0,\n\t\t\t\twidth: 0,\n\t\t\t\theight: 0\n\t\t\t}\n\t\t};\n\t},\n\tcomputed: {\n\t\timageLoaded() {\n\t\t\treturn this.imageSize.width > 0 && this.imageSize.height > 0\n\t\t},\n\t\tcoefficient() {\n\t\t\treturn this.imageSize.width\n\t\t\t\t? this.imageSize.width / this.boundarySize.width\n\t\t\t\t: 0;\n\t\t},\n\t\tclasses() {\n\t\t\treturn {\n\t\t\t\tcropper: classnames(cn(), this.classname),\n\t\t\t\timage: classnames(cn('image'), this.imageClassname),\n\t\t\t\tarea: classnames(cn('area'), this.areaClassname),\n\t\t\t\tstretcher: classnames(cn('stretcher')),\n\t\t\t\tbackground: classnames(cn('background'), this.backgroundClassname)\n\t\t\t};\n\t\t},\n\t\tstencilCoordinates() {\n\t\t\tconst { width, height, left, top } = this.coordinates;\n\t\t\treturn {\n\t\t\t\twidth: width / this.coefficient,\n\t\t\t\theight: height / this.coefficient,\n\t\t\t\tleft: left / this.coefficient,\n\t\t\t\ttop: top / this.coefficient\n\t\t\t};\n\t\t},\n\t\twrapperStyle() {\n\t\t\treturn {\n\t\t\t\twidth: `${this.stencilCoordinates.width}px`,\n\t\t\t\theight: `${this.stencilCoordinates.height}px`,\n\t\t\t\tleft: `${this.stencilCoordinates.left}px`,\n\t\t\t\ttop: `${this.stencilCoordinates.top}px`\n\t\t\t};\n\t\t},\n\t\tareaStyle() {\n\t\t\treturn {\n\t\t\t\twidth: this.boundarySize.width\n\t\t\t\t\t? `${this.boundarySize.width}px`\n\t\t\t\t\t: 'auto',\n\t\t\t\theight: this.boundarySize.height\n\t\t\t\t\t? `${this.boundarySize.height}px`\n\t\t\t\t\t: 'auto',\n\t\t\t\topacity: this.imageLoaded ? 1 : 0\n\t\t\t};\n\t\t},\n\t\timageStyle() {\n\t\t\tconst result = {};\n\n\t\t\tif (this.imageSize.width > this.imageSize.height) {\n\t\t\t\tresult.width = '100%'\n\t\t\t\tresult.left = 0;\n\t\t\t\tresult.top = '50%'\n\t\t\t\tresult.transform = 'translateY(-50%)'\n\t\t\t} else {\n\t\t\t\tresult.height = '100%'\n\t\t\t\tresult.top = 0\n\t\t\t\tresult.left = '50%'\n\t\t\t\tresult.transform = 'translateX(-50%)'\n\t\t\t}\n\n\t\t\tif (!this.imageSize.width || !this.imageSize.height) {\n\t\t\t\tresult.opacity = 0\n\t\t\t}\n\n\t\t\treturn result;\n\t\t},\n\t\trestrictions() {\n\t\t\treturn {\n\t\t\t\tminHeight: this.imageSize.height * this.minHeight / 100,\n\t\t\t\tminWidth: this.imageSize.width * this.minWidth / 100,\n\t\t\t\tmaxHeight: this.imageSize.height * this.maxHeight / 100,\n\t\t\t\tmaxWidth: this.imageSize.width * this.maxWidth / 100\n\t\t\t};\n\t\t}\n\t},\n\tmounted() {\n\t\tthis.debouncedUpdateCoordinates = debounce(\n\t\t\tthis.updateCoordinates,\n\t\t\tthis.debounce\n\t\t);\n\t\tif (this.src) {\n\t\t\tthis.onChangeImage();\n\t\t}\n\t\twindow.addEventListener('resize', this.refreshImage);\n\t\twindow.addEventListener('orientationchange', this.refreshImage);\n\t},\n\tdestroyed() {\n\t\twindow.removeEventListener('resize', this.refreshImage);\n\t\twindow.removeEventListener('orientationchange', this.refreshImage);\n\t},\n\twatch: {\n\t\tsrc() {\n\t\t\tVue.nextTick(() => {\n\t\t\t\tthis.onChangeImage();\n\t\t\t})\n\t\t}\n\t},\n\tmethods: {\n\t\t// External methods\n\t\tgetResult() {\n\t\t\tif (this.canvas) {\n\t\t\t\tthis.updateCanvas(this.coordinates);\n\t\t\t\treturn {\n\t\t\t\t\tcoordinates: { ...this.coordinates },\n\t\t\t\t\tcanvas: this.$refs.canvas\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treturn {\n\t\t\t\t\tcoordinates: { ...this.coordinates },\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t// Internal methods\n\t\tgetArea() {\n\t\t\treturn this.$refs.area\n\t\t},\n\t\tgetStencil() {\n\t\t\treturn this.$refs.stencil\n\t\t},\n\t\tupdateCanvas(coordinates) {\n\t\t\t// This function can be asynchronously called because it's debounced\n\t\t\t// Therefore there is workaround to prevent processing after the component was unmounted\n\t\t\tif (!this.$refs.canvas) return\n\n\t\t\tconst canvas = this.$refs.canvas;\n\t\t\tcanvas.width = coordinates.width;\n\t\t\tcanvas.height = coordinates.height;\n\n\t\t\tconst ctx = canvas.getContext('2d');\n\t\t\tconst image = this.$refs.image;\n\t\t\tctx.drawImage(\n\t\t\t\timage,\n\t\t\t\tcoordinates.left,\n\t\t\t\tcoordinates.top,\n\t\t\t\tcoordinates.width,\n\t\t\t\tcoordinates.height,\n\t\t\t\t0,\n\t\t\t\t0,\n\t\t\t\tcoordinates.width,\n\t\t\t\tcoordinates.height\n\t\t\t);\n\t\t},\n\t\tupdateCoordinates(coordinates) {\n\t\t\tthis.$emit('change', this.getResult());\n\t\t},\n\t\tonChangeCoordinates(newCoordinates) {\n\t\t\tthis.coordinates = newCoordinates;\n\t\t\tif (this.$listeners && this.$listeners.change) {\n\t\t\t\tthis.debouncedUpdateCoordinates(newCoordinates);\n\t\t\t}\n\t\t},\n\t\tonChangeImage() {\n\t\t\tconst image = this.$refs.image;\n\t\t\tif (this.canvas && this.checkCrossOrigin === false) {\n\t\t\t\tif (!/^data:/.test(this.src) && !/^blob:/.test(this.src) && !isCrossOriginURL(this.src)) {\n\t\t\t\t\tthis.imageAttributes.crossOrigin = 'anonymous';\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (image) {\n\t\t\t\tif (image.complete) {\n\t\t\t\t\tthis.refreshImage().then(this.resetCoordinates);\n\t\t\t\t} else {\n\t\t\t\t\timage.addEventListener('load', () => {\n\t\t\t\t\t\t// After loading image the current component can be unmounted\n\t\t\t\t\t\t// Therefore there is a workaround to prevent processing the following code\n\t\t\t\t\t\tif (this.$refs.image) {\n\t\t\t\t\t\t\tthis.refreshImage().then(this.resetCoordinates);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tonResize(resizeEvent) {\n\t\t\tthis.onChangeCoordinates(\n\t\t\t\tthis.resizeAlgorithm(\n\t\t\t\t\tthis.coordinates,\n\t\t\t\t\tthis.restrictions,\n\t\t\t\t\tthis.imageSize,\n\t\t\t\t\tthis.coefficient,\n\t\t\t\t\tthis.stencilAspectRatios(),\n\t\t\t\t\tresizeEvent\n\t\t\t\t)\n\t\t\t);\n\t\t},\n\t\tonMove(moveEvent) {\n\t\t\tthis.onChangeCoordinates(\n\t\t\t\tthis.moveAlgorithm(\n\t\t\t\t\tthis.coordinates,\n\t\t\t\t\tthis.imageSize,\n\t\t\t\t\tthis.coefficient,\n\t\t\t\t\tmoveEvent\n\t\t\t\t)\n\t\t\t);\n\t\t},\n\t\tresetCoordinates() {\n\t\t\t// This function can be asynchronously called after completion of refreshing image promise\n\t\t\t// Therefore there is a workaround to prevent processing after the component was unmounted\n\t\t\tif (!this.$refs.image) return\n\n\t\t\tconst cropper = this.$refs.cropper;\n\t\t\tconst image = this.$refs.image;\n\t\t\tconst imageSize = this.imageSize;\n\t\t\tconst { minWidth, minHeight, maxWidth, maxHeight } = this.restrictions;\n\t\t\tconst aspectRatio = this.stencilAspectRatios();\n\t\t\tconst coefficient = this.coefficient;\n\n\t\t\tlet coordinates = {};\n\n\t\t\tif (minWidth * aspectRatio.minimum < minHeight) {\n\t\t\t\tcoordinates.height = minHeight;\n\t\t\t\tcoordinates.width = aspectRatio.maximum\n\t\t\t\t\t? minHeight * aspectRatio.maximum\n\t\t\t\t\t: minWidth;\n\t\t\t} else {\n\t\t\t\tcoordinates.width = minWidth;\n\t\t\t\tcoordinates.height = aspectRatio.minimum\n\t\t\t\t\t? minWidth * aspectRatio.minimum\n\t\t\t\t\t: minHeight;\n\t\t\t}\n\n\t\t\tif (coordinates.height < minHeight || coordinates.height > maxHeight) {\n\t\t\t\tthrow 'Current aspect ratio can\\'t is uncompatible with minimum/maximum height and width settings. Can\\'t setup default coordinates';\n\t\t\t}\n\n\t\t\tcoordinates.left = imageSize.width / 2 - coordinates.width / 2;\n\t\t\tcoordinates.top = imageSize.height / 2 - coordinates.height / 2;\n\n\t\t\tconst defaultSize = this.defaultSize(cropper, image, this.$props);\n\t\t\tcoordinates = this.resizeAlgorithm(\n\t\t\t\tcoordinates,\n\t\t\t\tthis.restrictions,\n\t\t\t\timageSize,\n\t\t\t\tcoefficient,\n\t\t\t\taspectRatio,\n\t\t\t\tnew ResizeEvent(null, {\n\t\t\t\t\tleft: (defaultSize.width - coordinates.width) / (2 * coefficient),\n\t\t\t\t\tright: (defaultSize.width - coordinates.width) / (2 * coefficient),\n\t\t\t\t\ttop: (defaultSize.height - coordinates.height) / (2 * coefficient),\n\t\t\t\t\tbottom: (defaultSize.height - coordinates.height) / (2 * coefficient)\n\t\t\t\t})\n\t\t\t);\n\n\t\t\tconst defaultPosition = this.defaultPosition(\n\t\t\t\tcropper,\n\t\t\t\timage,\n\t\t\t\tcoordinates.width,\n\t\t\t\tcoordinates.height,\n\t\t\t\tthis.$props\n\t\t\t);\n\t\t\tcoordinates = this.moveAlgorithm(\n\t\t\t\tcoordinates,\n\t\t\t\timageSize,\n\t\t\t\tcoefficient,\n\t\t\t\tnew MoveEvent(null, {\n\t\t\t\t\tleft: (defaultPosition.left - coordinates.left) / coefficient,\n\t\t\t\t\ttop: (defaultPosition.top - coordinates.top) / coefficient\n\t\t\t\t})\n\t\t\t);\n\n\t\t\tthis.onChangeCoordinates(coordinates);\n\t\t},\n\t\trefreshImage() {\n\t\t\tconst image = this.$refs.image;\n\t\t\tconst stretcher = this.$refs.stretcher;\n\t\t\tconst cropper = this.$refs.cropper;\n\n\t\t\tconst aspectRatio = image.naturalWidth / image.naturalHeight\n\n\t\t\tif (image.naturalHeight > image.naturalWidth) {\n\t\t\t\tstretcher.style.height = `${image.naturalHeight}px`\n\t\t\t\tstretcher.style.width = `${stretcher.clientHeight * aspectRatio}px`\n\t\t\t\tif (stretcher.clientWidth / stretcher.clientHeight !== aspectRatio) {\n\t\t\t\t\tstretcher.style.height = `${stretcher.clientWidth / aspectRatio}px`\n\t\t\t\t}\n\n\t\t\t} else {\n\t\t\t\tstretcher.style.width = `${image.naturalWidth}px`\n\t\t\t\tstretcher.style.height = `${stretcher.clientWidth / aspectRatio }px`\n\t\t\t\tif (stretcher.clientHeight / stretcher.clientWidth !== aspectRatio) {\n\t\t\t\t\tstretcher.style.width = `${stretcher.clientHeight * aspectRatio}px`\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn new Promise(resolve => {\n\t\t\t\tconst cropper = this.$refs.cropper;\n\t\t\t\tconst image = this.$refs.image;\n\n\t\t\t\tthis.imageSize.height = image.naturalHeight;\n\t\t\t\tthis.imageSize.width = image.naturalWidth;\n\n\t\t\t\tVue.nextTick(() => {\n\t\t\t\t\tconst { height, width } = this.areaSize(cropper, image);\n\n\t\t\t\t\tif (height) {\n\t\t\t\t\t\tthis.boundarySize.height = height;\n\t\t\t\t\t}\n\t\t\t\t\tif (width) {\n\t\t\t\t\t\tthis.boundarySize.width = width;\n\t\t\t\t\t}\n\t\t\t\t\tresolve();\n\t\t\t\t})\n\n\t\t\t});\n\n\t\t},\n\t\tstencilAspectRatios() {\n\t\t\tif (this.$refs.stencil.aspectRatios) {\n\t\t\t\treturn this.$refs.stencil.aspectRatios();\n\t\t\t} else {\n\t\t\t\treturn {\n\t\t\t\t\tminimum: this.stencilProps.aspectRatio || this.stencilProps.minAspectRatio,\n\t\t\t\t\tmaximum: this.stencilProps.aspectRatio || this.stencilProps.maxAspectRatio\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\t}\n};\n</script>\n\n<template>\n  <div\n    ref=\"cropper\"\n    :class=\"classes.cropper\"\n  >\n\t\t<div\n\t\t\t:class=\"classes.background\"\n\t\t\t:style=\"areaStyle\"\n\t\t/>\n\t\t<div\n\t\t\tref=\"stretcher\"\n\t\t\t:class=\"classes.stretcher\"\n\t\t/>\n    <div\n      :class=\"classes.area\"\n      :style=\"areaStyle\"\n\t  \tref=\"area\"\n    >\n\t\t\t<img\n\t\t\t\tref=\"image\"\n\t\t\t\t:crossOrigin='imageAttributes.crossOrigin'\n\t\t\t\t:src=\"src\"\n\t\t\t\t:class=\"classes.image\"\n\t\t\t\t:style=\"imageStyle\"\n\t\t\t/>\n      <component\n        ref=\"stencil\"\n\t  \t\tv-if=\"imageLoaded\"\n        :is=\"stencilComponent\"\n        :img=\"src\"\n        :result-coordinates=\"coordinates\"\n        :stencil-coordinates=\"stencilCoordinates\"\n        v-bind=\"stencilProps\"\n        @resize=\"onResize\"\n        @move=\"onMove\"\n      />\n      <canvas\n        ref=\"canvas\"\n\t\tv-if=\"canvas\"\n        :style=\"{display:'none'}\"\n      />\n    </div>\n  </div>\n</template>\n\n<style lang=\"scss\">\n.vue-advanced-cropper {\n  text-align: center;\n  position: relative;\n  overflow: hidden;\n  user-select: none;\n\tmax-height: 100%;\n\tmax-width: 100%;\n\n\t&__stretcher {\n\t\tpointer-events: none;\n\t\tposition: relative;\n\t\tmax-width: 100%;\n\t\tmax-height: 100%;\n\t}\n\n  &__image {\n    opacity: 0.5;\n\t\tuser-select: none;\n\t\tposition: absolute;\n  }\n  &__area {\n    position: absolute;\n    left: 50%;\n\t\ttransform: translate(-50%, -50%);\n\t\ttransition: opacity 0.5s;\n\t\ttop: 50%;\n  }\n  &__background {\n\t\tposition: absolute;\n\t\tbackground: black;\n\t\ttransition: opacity 0.5s;\n\t\ttop: 50%;\n    left: 50%;\n\t\ttransform: translate(-50%, -50%);\n  }\n  &__stencil-wrapper {\n    position: absolute;\n  }\n}\n</style>\n","\r\nimport classnames from 'classnames';\r\nimport bem from 'easy-bem';\r\n\r\nconst cn = bem('vue-preview-image')\r\n\r\nexport default {\r\n\tname: 'PreviewImage',\r\n\tprops: {\r\n\t\timg: {\r\n\t\t\ttype: String\r\n\t\t},\r\n\t\tclassname: {\r\n\t\t\ttype: String,\r\n\t\t},\r\n\t\timageClassname: {\r\n\t\t\ttype: String,\r\n\t\t},\r\n\t\twidth: {\r\n\t\t\ttype: Number,\r\n\t\t},\r\n\t\theight: {\r\n\t\t\ttype: Number,\r\n\t\t},\r\n\t\ttop: {\r\n\t\t\ttype: Number,\r\n\t\t},\r\n\t\tleft: {\r\n\t\t\ttype: Number,\r\n\t\t},\r\n\t\tpreviewWidth: {\r\n\t\t\ttype: Number,\r\n\t\t\trequired: true\r\n\t\t},\r\n\t\tpreviewHeight: {\r\n\t\t\ttype: Number,\r\n\t\t\trequired: true\r\n\t\t}\r\n\t},\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\timageSize: {\r\n\t\t\t\twidth: 0,\r\n\t\t\t\theight: 0\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tmounted() {\r\n\t\tthis.onChangeImage();\r\n\t},\r\n\tmethods: {\r\n\t\trefreshImage() {\r\n\t\t\tconst image = this.$refs.image;\r\n\t\t\tthis.imageSize.height = image.naturalHeight;\r\n\t\t\tthis.imageSize.width = image.naturalWidth;\r\n\t\t},\r\n\t\tonChangeImage() {\r\n\t\t\tconst image = this.$refs.image;\r\n\t\t\tif (image.complete) {\r\n\t\t\t\tthis.refreshImage();\r\n\t\t\t} else {\r\n\t\t\t\timage.addEventListener('load', () => {\r\n\t\t\t\t\tthis.refreshImage();\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t},\r\n\twatch: {\r\n\t\timg() {\r\n\t\t\tthis.onChangeImage();\r\n\t\t}\r\n\t},\r\n\tcomputed: {\r\n\t\tclassnames() {\r\n\t\t\treturn {\r\n\t\t\t\tdefault: classnames(cn(), this.classname),\r\n\t\t\t\timage: classnames(cn('image'), this.imageClassname)\r\n\t\t\t}\r\n\t\t},\r\n\t\twrapperStyle() {\r\n\t\t\treturn {\r\n\t\t\t\twidth: `${this.previewWidth}px`,\r\n\t\t\t\theight: `${this.previewHeight}px`,\r\n\t\t\t}\r\n\t\t},\r\n\t\timageStyle() {\r\n\t\t\tconst coefficient = this.previewHeight / this.height;\r\n\t\t\tconst height = this.imageSize.height * coefficient\r\n\t\t\tconst width = this.imageSize.width * coefficient\r\n\t\t\treturn {\r\n\t\t\t\twidth: `${width}px`,\r\n\t\t\t\theight: `${height}px`,\r\n\t\t\t\tleft: `${-this.left*coefficient}px`,\r\n\t\t\t\ttop: `${-this.top*coefficient}px`\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n};\r\n","<script>\r\nimport classnames from 'classnames';\r\nimport bem from 'easy-bem';\r\n\r\nconst cn = bem('vue-preview-image')\r\n\r\nexport default {\r\n\tname: 'PreviewImage',\r\n\tprops: {\r\n\t\timg: {\r\n\t\t\ttype: String\r\n\t\t},\r\n\t\tclassname: {\r\n\t\t\ttype: String,\r\n\t\t},\r\n\t\timageClassname: {\r\n\t\t\ttype: String,\r\n\t\t},\r\n\t\twidth: {\r\n\t\t\ttype: Number,\r\n\t\t},\r\n\t\theight: {\r\n\t\t\ttype: Number,\r\n\t\t},\r\n\t\ttop: {\r\n\t\t\ttype: Number,\r\n\t\t},\r\n\t\tleft: {\r\n\t\t\ttype: Number,\r\n\t\t},\r\n\t\tpreviewWidth: {\r\n\t\t\ttype: Number,\r\n\t\t\trequired: true\r\n\t\t},\r\n\t\tpreviewHeight: {\r\n\t\t\ttype: Number,\r\n\t\t\trequired: true\r\n\t\t}\r\n\t},\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\timageSize: {\r\n\t\t\t\twidth: 0,\r\n\t\t\t\theight: 0\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tmounted() {\r\n\t\tthis.onChangeImage();\r\n\t},\r\n\tmethods: {\r\n\t\trefreshImage() {\r\n\t\t\tconst image = this.$refs.image;\r\n\t\t\tthis.imageSize.height = image.naturalHeight;\r\n\t\t\tthis.imageSize.width = image.naturalWidth;\r\n\t\t},\r\n\t\tonChangeImage() {\r\n\t\t\tconst image = this.$refs.image;\r\n\t\t\tif (image.complete) {\r\n\t\t\t\tthis.refreshImage();\r\n\t\t\t} else {\r\n\t\t\t\timage.addEventListener('load', () => {\r\n\t\t\t\t\tthis.refreshImage();\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t},\r\n\twatch: {\r\n\t\timg() {\r\n\t\t\tthis.onChangeImage();\r\n\t\t}\r\n\t},\r\n\tcomputed: {\r\n\t\tclassnames() {\r\n\t\t\treturn {\r\n\t\t\t\tdefault: classnames(cn(), this.classname),\r\n\t\t\t\timage: classnames(cn('image'), this.imageClassname)\r\n\t\t\t}\r\n\t\t},\r\n\t\twrapperStyle() {\r\n\t\t\treturn {\r\n\t\t\t\twidth: `${this.previewWidth}px`,\r\n\t\t\t\theight: `${this.previewHeight}px`,\r\n\t\t\t}\r\n\t\t},\r\n\t\timageStyle() {\r\n\t\t\tconst coefficient = this.previewHeight / this.height;\r\n\t\t\tconst height = this.imageSize.height * coefficient\r\n\t\t\tconst width = this.imageSize.width * coefficient\r\n\t\t\treturn {\r\n\t\t\t\twidth: `${width}px`,\r\n\t\t\t\theight: `${height}px`,\r\n\t\t\t\tleft: `${-this.left*coefficient}px`,\r\n\t\t\t\ttop: `${-this.top*coefficient}px`\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n};\r\n</script>\r\n\r\n<template>\r\n  <div\r\n    :class=\"classnames.default\"\r\n    :style=\"wrapperStyle\"\r\n  >\r\n    <img\r\n      ref=\"image\"\r\n      :src=\"img\"\r\n      :class=\"classnames.image\"\r\n      :style=\"imageStyle\"\r\n    >\r\n  </div>\r\n</template>\r\n\r\n<style lang=\"scss\">\r\n  .vue-preview-image{\r\n    overflow: hidden;\r\n\t\tposition: relative;\r\n    &__image {\r\n    \tpointer-events: none;\r\n      position: absolute;\r\n\t\t\t// Workaround to prevent bugs at the websites with max-width\r\n\t\t\t// rule applited to img (Vuepress for example)\r\n\t\t\tmax-width: unset !important;\r\n    }\r\n  }\r\n</style>\r\n","import Vue from 'vue'\r\nimport Cropper from './Cropper.vue'\r\n\r\nimport {\r\n\tRectangleStencil,\r\n\tCircleStencil,\r\n} from './components/stencils'\r\n\r\nimport {\r\n\tSimpleHandler\r\n} from './components/handlers'\r\n\r\nimport {\r\n\tSimpleLine\r\n} from './components/lines'\r\n\r\nexport {\r\n\tPreviewResult,\r\n\tDraggableArea,\r\n\tBoundingBox,\r\n\tLineWrapper,\r\n\tHandlerWrapper,\r\n\tDraggableElement\r\n} from './components/service'\r\n\r\nexport {\r\n\tRectangleStencil,\r\n\tCircleStencil,\r\n} from './components/stencils'\r\n\r\nexport {\r\n\tSimpleHandler\r\n} from './components/handlers'\r\n\r\nexport {\r\n\tSimpleLine\r\n} from './components/lines'\r\n\r\nexport {\r\n\tPreviewImage\r\n} from './components/helpers'\r\n\r\nexport {\r\n\tResizeEvent,\r\n\tMoveEvent,\r\n\tDragEvent\r\n} from './utils/events'\r\n\r\nexport { default as Cropper } from './Cropper.vue'\r\n\r\nVue.component('cropper', Cropper)\r\nVue.component('rectangle-stencil', RectangleStencil)\r\nVue.component('circle-stencil', CircleStencil)\r\nVue.component('simple-handler', SimpleHandler)\r\nVue.component('simple-line', SimpleLine)\r\n"],"names":["classNames","arg","classes","i","arguments","length","argType","push","Array","isArray","inner","apply","key","hasOwn","call","join","hasOwnProperty","module","exports","default","window","componentName","elementOrMods","mods","element","base","Object","keys","reduce","result","name","value","debounce","func","wait","immediate","later","last","Date","now","timestamp","timeout","setTimeout","context","args","debounced","callNow","clear","clearTimeout","flush","HORIZONTAL_DIRECTIONS","VERTICAL_DIRECTIONS","ALL_DIRECTIONS","fitConditions","oldDirections","coordinates","restrictions","coefficient","imageSize","ratioBroken","Math","min","abs","floor","ceil","minHeight","minWidth","maxHeight","maxWidth","directions","currentWidth","width","left","right","currentHeight","height","top","bottom","maxMultiplier","forEach","direction","multiplier","resize","aspectRatio","resizeEvent","actualCoordinates","params","allowedDirections","preserveAspectRatio","minimum","maximum","respectDirection","overlapHeight","overlapWidth","move","moveEvent","max","newCoordinates","areaSize","cropper","image","imageWidth","naturalWidth","imageHeight","naturalHeight","areaHeight","clientHeight","areaWidth","clientWidth","defaultPosition","defaultSize","props","newHeight","newWidth","directionNames","hDirection","vDirection","classname","toUpperCase","slice","isCrossOriginURL","url","pageLocation","location","URL_HOST_PATTERN","urlMatch","exec","urlparts","protocol","host","port","defaultPort","portOf","ResizeEvent","nativeEvent","MoveEvent","DragEvent","position","previousPosition","anchor","getBoundingClientRect","beforeMount","addEventListener","onMouseUp","passive","onMouseMove","onTouchMove","onTouchEnd","beforeDestroy","removeEventListener","mounted","$refs","draggable","Error","touches","draggingAnchor","hovered","methods","onMouseOver","$emit","onMouseLeave","onTouchStart","e","cancelable","initAnchor","mean","touch","clientX","clientY","preventDefault","stopPropagation","processEnd","processMove","onMouseDown","fake","event","newTouches","mixins","type","String","cn","bem","components","DraggableElement","horizontalPosition","verticalPosition","computed","classnames","defaultClassname","required","handlers","eastNorth","north","westNorth","west","westSouth","south","eastSouth","east","handlerComponent","handlersClassnames","lines","lineComponent","linesClassnames","data","points","verticalDirection","horizontalDirection","disableDefaultClasses","lineNodes","point","_this","component","hoverClassname","hover","handlerNodes","_this2","onHandlerDrag","dragEvent","shift","shiftKey","container","x","y","vectors","map","index","pow","sqrt","summaryShift","vector","massPoint","img","imageClassname","resultCoordinates","stencilCoordinates","inject","onChangeImage","refreshImage","complete","watch","Vue","nextTick","wrapper","wrapperStyle","imageStyle","HandlerWrapper","onDrag","onEnter","onLeave","LineWrapper","PreviewResult","BoundingBox","DraggableArea","SimpleHandler","SimpleLine","previewClassname","boundingBoxClassname","Number","minAspectRatio","maxAspectRatio","onMove","onResize","aspectRatios","stencil","preview","boundingBox","style","stencilClass","src","resizeAlgorithm","Function","core","moveAlgorithm","stencilComponent","RectangleStencil","stencilProps","areaClassname","backgroundClassname","canvas","Boolean","checkCrossOrigin","provide","getArea","getStencil","boundarySize","imageAttributes","crossOrigin","imageLoaded","area","stretcher","background","areaStyle","opacity","transform","debouncedUpdateCoordinates","updateCoordinates","destroyed","getResult","updateCanvas","ctx","getContext","drawImage","onChangeCoordinates","$listeners","change","test","then","resetCoordinates","stencilAspectRatios","$props","Promise","resolve","_this3","previewWidth","previewHeight","Cropper","CircleStencil"],"mappings":"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"}