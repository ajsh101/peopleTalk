import Vue from"vue";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n,o=0;o<t.length;o++)n=t[o],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null==arguments[t]?{}:arguments[t],o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.forEach(function(t){_defineProperty(e,t,n[t])})}return e}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_nonIterableSpread()}function _arrayWithoutHoles(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}}function _iterableToArray(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function createCommonjsModule(e,t){return t={exports:{}},e(t,t.exports),t.exports}var classnames=createCommonjsModule(function(e){/*!
  Copyright (c) 2017 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/ /* global define */(function(){function t(){for(var e,o=[],a=0;a<arguments.length;a++)if(e=arguments[a],e){var s=typeof e;if("string"===s||"number"===s)o.push(e);else if(Array.isArray(e)&&e.length){var r=t.apply(null,e);r&&o.push(r)}else if("object"===s)for(var l in e)n.call(e,l)&&e[l]&&o.push(l)}return o.join(" ")}var n={}.hasOwnProperty;e.exports?(t.default=t,e.exports=t):window.classNames=t})()}),easyBem=function(e){return function(t,n){if(!t)return e;var i;"string"==typeof t?i=t:n=t;var o=e;return i&&(o+="__"+i),o+(n?Object.keys(n).reduce(function(e,t){var i=n[t];return i&&(e+=" "+("boolean"==typeof i?o+"--"+t:o+"--"+t+"_"+i)),e},""):"")}};/**
 * BEM class name factory.
 *
 * @typedef {Function} Bem
 * @param {String|Object} [elementOrMods] Element name or hash object with mods
 * @param {Object} [mods] Hash object with mods
 * @returns {String}
 */ /**
 * Returns BEM class name factory.
 *
 * @param {String} componentName Block name
 * @returns {Bem}
 */ /**
 * Returns a function, that, as long as it continues to be invoked, will not
 * be triggered. The function will be called after it stops being called for
 * N milliseconds. If `immediate` is passed, trigger the function on the
 * leading edge, instead of the trailing. The function also has a property 'clear' 
 * that is a function which will clear the timer to prevent previously scheduled executions. 
 *
 * @source underscore.js
 * @see http://unscriptable.com/2009/03/20/debouncing-javascript-methods/
 * @param {Function} function to wrap
 * @param {Number} timeout in ms (`100`)
 * @param {Boolean} whether to execute at the beginning (`false`)
 * @api public
 */function debounce(e,t,n){function i(){var c=Date.now()-r;c<t&&0<=c?o=setTimeout(i,t-c):(o=null,!n&&(l=e.apply(s,a),s=a=null))}var o,a,s,r,l;null==t&&(t=100);var c=function(){s=this,a=arguments,r=Date.now();var c=n&&!o;return o||(o=setTimeout(i,t)),c&&(l=e.apply(s,a),s=a=null),l};return c.clear=function(){o&&(clearTimeout(o),o=null)},c.flush=function(){o&&(l=e.apply(s,a),s=a=null,clearTimeout(o),o=null)},c}// Adds compatibility for ES modules
debounce.debounce=debounce;var debounce_1=debounce,HORIZONTAL_DIRECTIONS=["left","right"],VERTICAL_DIRECTIONS=["top","bottom"],ALL_DIRECTIONS=["left","right","top","bottom"];function fitConditions(e,t,n,i,o,a){var s=Math.min,r=Math.abs,l=Math.floor,c=Math.ceil,h=n.minHeight,d=n.minWidth,p=n.maxHeight,m=n.maxWidth,g=_objectSpread({},e),u=t.width+i*(g.left+g.right),f=t.height+i*(g.top+g.bottom);0>u&&(0>g.left&&0>g.right?(g.left=-(t.width-d)/(g.left/g.right),g.right=-(t.width-d)/(g.right/g.left)):0>g.left?g.left=-(t.width-d)/i:0>g.right&&(g.right=-(t.width-d)/i)),0>f&&(0>g.top&&0>g.bottom?(g.top=-(t.height-h)/(g.top/g.bottom),g.bottom=-(t.height-h)/(g.bottom/g.top)):0>g.top?g.top=-(t.height-h):0>g.bottom&&(g.bottom=-(t.height-h)));var v={width:1/0,height:1/0};if(g.right+g.left&&(c(t.left+t.width+i*g.right)>o.width&&(v.width=s(v.width,r(l(o.width-(t.left+t.width))/(i*g.right)))),0>t.left-i*g.left&&(v.width=s(v.width,r(t.left/(i*g.left)))),u<d&&(v.width=s(v.width,r((t.width-d)/((g.right+g.left)*i)))),u>m&&(v.width=s(v.width,r((m-t.width)/((g.right+g.left)*i))))),g.top+g.bottom&&(c(t.top+t.height+i*g.bottom)>o.height&&(v.height=s(v.height,r(l(o.height-(t.top+t.height))/(i*g.bottom)))),0>t.top-i*g.top&&(v.height=s(v.height,r(t.top/(i*g.top)))),f<h&&(v.height=s(v.height,r((t.height-h)/((g.top+g.bottom)*i)))),f>p&&(v.height=s(v.height,r((p-t.height)/((g.top+g.bottom)*i))))),!a)v.width!==1/0&&HORIZONTAL_DIRECTIONS.forEach(function(e){g[e]*=v.width}),v.height!==1/0&&VERTICAL_DIRECTIONS.forEach(function(e){g[e]*=v.height});else{var w;v.height<v.width?w=v.height:g.right+g.left&&(w=v.width),(v.height!==1/0||v.width!==1/0)&&ALL_DIRECTIONS.forEach(function(e){g[e]*=w})}return g}function resize(e,t,n,i,o,a){var s=_objectSpread({},e,{right:e.left+e.width,bottom:e.top+e.height}),r=a.params||{},l=_objectSpread({},a.directions),c=r.allowedDirections||{left:!0,right:!0,bottom:!0,top:!0};Object.keys(c).forEach(function(e){c[e]||(l[e]=0)});// Variables for readbility
var h=t.minHeight,d=t.minWidth,p=s.width+i*(l.left+l.right),m=s.height+i*(l.top+l.bottom);l=fitConditions(l,s,t,i,n),p=s.width+i*(l.left+l.right),m=s.height+i*(l.top+l.bottom);// Checks ratio:
var g=null;if(r.preserveAspectRatio?g=s.width/s.height:o.minimum&&p/m<o.minimum?g=o.minimum:o.maximum&&p/m>o.maximum&&(g=o.maximum),g){var u=r.respectDirection;if(u||(s.width>s.height?u="width":u="height"),"width"===u){var f=s.height-p/g;c.top&&c.bottom?(l.bottom=-f/(2*i),l.top=-f/(2*i)):c.top?l.top=-f/i:c.bottom?l.bottom=-f/i:c.right?l.right=0:c.left&&(l.left=0)}else if("height"===u){var v=s.width-m*g;c.left&&c.right?(l.left=-v/(2*i),l.right=-v/(2*i)):c.left?l.left=-v/i:c.right?l.right=-v/i:c.top?l.top=0:c.bottom&&(l.bottom=0)}else ALL_DIRECTIONS.forEach(function(e){l[e]*=0})}// 3. Third step: check if desired box with correct aspect ratios break some limits and fit to this conditions
return l=fitConditions(l,s,t,i,n,g),{width:e.width+i*(l.right+l.left),height:e.height+i*(l.top+l.bottom),left:e.left-i*l.left,top:e.top-i*l.top}}function move(e,t,n,i){var o=Math.max,a=_objectSpread({},i.directions),s={left:e.left+n*a.left,top:e.top+n*a.top,width:e.width,height:e.height};return 0>s.left&&(s.left=0),s.left+s.width>t.width&&(s.left=o(0,t.width-s.width)),0>s.top&&(s.top=0),s.top+s.height>t.height&&(s.top=o(0,t.height-s.height)),s}function areaSize(e,t){var n=t.naturalWidth,i=t.naturalHeight,o=e.clientHeight,a=e.clientWidth,s=o,r=n*o/i;return r>a&&(r=a,s=i*a/n),{width:r,height:s}}function defaultPosition(e,t,n,i){return{left:t.naturalWidth/2-n/2,top:t.naturalHeight/2-i/2}}function defaultSize(e,t,n){var o,a,i=Math.max,s=n.maxWidth/100*t.naturalWidth,r=n.maxHeight/100*t.naturalHeight,l=n.minWidth/100*t.naturalWidth,c=n.minHeight/100*t.naturalHeight;return r>s?(o=i(c,.8*r),a=i(l,.8*s)):(a=i(l,.8*s),o=i(c,.8*r)),{height:o,width:a}}function directionNames(e,t){var n,i;return e&&t?(n="".concat(e).concat(t[0].toUpperCase()).concat(t.slice(1)),i="".concat(e,"-").concat(t)):(n=e||t,i=e||t),{name:n,classname:i}}function isCrossOriginURL(e){var t=window.location,n=/(\w+:)?(?:\/\/)([\w.-]+)?(?::(\d+))?\/?/,i=n.exec(e)||[],o={protocol:i[1]||"",host:i[2]||"",port:i[3]||""},a=function(e){return{"http:":80,"https:":443}[e]},s=function(e){return e.port||a(e.protocol||t.protocol)};return!o.protocol&&!o.host&&!o.port||!!(o.protocol&&o.protocol==t.protocol&&o.host&&o.host==t.host&&o.host&&s(o)==s(t))}var ResizeEvent=function e(t,n,i){_classCallCheck(this,e),this.nativeEvent=t,this.directions=n,this.params=i},MoveEvent=function e(t,n){_classCallCheck(this,e),this.nativeEvent=t,this.directions=n},DragEvent=/*#__PURE__*/function(){function e(t,n,i,o,a){_classCallCheck(this,e),this.nativeEvent=t,this.position=i,this.previousPosition=o,this.element=n,this.anchor=a}return _createClass(e,[{key:"shift",value:function(){var e=this.element,t=this.anchor,n=this.position,i=e.getBoundingClientRect(),o=i.left,a=i.top;return{left:n.left-o-t.left,top:n.top-a-t.top}}}]),e}(),draggable={beforeMount:function(){window.addEventListener("mouseup",this.onMouseUp,{passive:!1}),window.addEventListener("mousemove",this.onMouseMove,{passive:!1}),window.addEventListener("touchmove",this.onTouchMove,{passive:!1}),window.addEventListener("touchend",this.onTouchEnd,{passive:!1})},beforeDestroy:function(){window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("touchend",this.onTouchEnd)},mounted:function(){if(!this.$refs.draggable)throw new Error("You should add ref \"draggable\" to your root element to use draggable mixin");this.touches=[],this.draggingAnchor=[],this.hovered=!1},methods:{onMouseOver:function(){this.hovered||(this.hovered=!0,this.$emit("enter"))},onMouseLeave:function(){this.hovered&&(this.hovered=!1,this.$emit("leave"))},onTouchStart:function(t){t.cancelable&&(this.touches=_toConsumableArray(t.touches),!this.hovered&&this.$emit("enter"),t.touches.length&&this.initAnchor(this.touches.reduce(function(e,n){return{clientX:e.clientX+n.clientX/t.touches.length,clientY:e.clientY+n.clientY/t.touches.length}},{clientX:0,clientY:0})),t.preventDefault&&t.preventDefault(),t.stopPropagation())},onTouchEnd:function(){this.processEnd()},onTouchMove:function(t){this.touches.length&&(this.processMove(t,t.touches),t.preventDefault&&t.preventDefault(),t.stopPropagation&&t.stopPropagation())},onMouseDown:function(t){var e={fake:!0,clientX:t.clientX,clientY:t.clientY};this.touches=[e],this.initAnchor(e),t.stopPropagation()},onMouseMove:function(t){this.touches.length&&(this.processMove(t,[{fake:!0,clientX:t.clientX,clientY:t.clientY}]),t.preventDefault&&t.preventDefault())},onMouseUp:function(){this.touches=[]},initAnchor:function(e){var t=this.$refs.draggable,n=t.getBoundingClientRect(),i=n.left,o=n.right,a=n.bottom,s=n.top;this.anchor={left:e.clientX-i,top:e.clientY-s,bottom:a-e.clientY,right:o-e.clientX}},processMove:function(e,t){var n=_toConsumableArray(t);if(this.touches.length){if(1===this.touches.length&&1===n.length){var i=this.$refs.draggable;this.$emit("drag",new DragEvent(e,i,{left:n[0].clientX,top:n[0].clientY},{left:this.touches[0].clientX,top:this.touches[0].clientY},this.anchor))}this.touches=n}},processEnd:function(){this.touches=[],this.hovered&&(this.$emit("leave"),this.hovered=!1)}}},script={name:"DraggableElement",mixins:[draggable],props:{classname:{type:String}}};/* script */const __vue_script__=script;/* template */var __vue_render__=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"draggable",class:e.classname,on:{touchstart:e.onTouchStart,mousedown:e.onMouseDown,mouseover:e.onMouseOver,mouseleave:e.onMouseLeave}},[e._t("default")],2)},__vue_staticRenderFns__=[];__vue_render__._withStripped=!0;/* style */const __vue_inject_styles__=void 0,__vue_scope_id__=void 0,__vue_module_identifier__=void 0,__vue_is_functional_template__=!1;/* scoped */ /* component normalizer */function __vue_normalize__(e,t,n,i,o){const a=("function"==typeof n?n.options:n)||{};// For security concerns, we use only base name in production mode.
return a.__file="C:\\Live\\Projects\\Hot\\Vue Cropper\\vue-advanced-cropper-rollup\\src\\components\\service\\DraggableElement.vue",a.render||(a.render=e.render,a.staticRenderFns=e.staticRenderFns,a._compiled=!0,o&&(a.functional=!0)),a._scopeId=i,a}/* style inject */ /* style inject SSR */var DraggableElement=__vue_normalize__({render:__vue_render__,staticRenderFns:__vue_staticRenderFns__},void 0,__vue_script__,__vue_scope_id__,__vue_is_functional_template__,__vue_module_identifier__,void 0,void 0),cn=easyBem("vue-handler-wrapper"),script$1={name:"HandlerWrapper",components:{DraggableElement:DraggableElement},props:{horizontalPosition:{type:String},verticalPosition:{type:String},classname:{type:String}},computed:{classnames:function(){var e;if(this.horizontalPosition||this.verticalPosition){var t=directionNames(this.horizontalPosition,this.verticalPosition);e=classnames(this.classname,cn(_defineProperty({},t.classname,!0)))}else e=classnames(this.classname,cn());return{default:e,draggable:cn("draggable")}}}};/* script */const __vue_script__$1=script$1;/* template */var __vue_render__$1=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:e.classnames.default},[n("DraggableElement",{class:e.classnames.draggable,on:{drag:function(t){return e.$emit("drag",t)},leave:function(){return e.$emit("leave")},enter:function(){return e.$emit("enter")}}},[e._t("default")],2)],1)},__vue_staticRenderFns__$1=[];__vue_render__$1._withStripped=!0;/* style */const __vue_inject_styles__$1=void 0,__vue_scope_id__$1=void 0,__vue_module_identifier__$1=void 0,__vue_is_functional_template__$1=!1;/* scoped */ /* component normalizer */function __vue_normalize__$1(e,t,n,i,o){const a=("function"==typeof n?n.options:n)||{};// For security concerns, we use only base name in production mode.
return a.__file="C:\\Live\\Projects\\Hot\\Vue Cropper\\vue-advanced-cropper-rollup\\src\\components\\service\\HandlerWrapper.vue",a.render||(a.render=e.render,a.staticRenderFns=e.staticRenderFns,a._compiled=!0,o&&(a.functional=!0)),a._scopeId=i,a}/* style inject */ /* style inject SSR */var HandlerWrapper=__vue_normalize__$1({render:__vue_render__$1,staticRenderFns:__vue_staticRenderFns__$1},void 0,__vue_script__$1,__vue_scope_id__$1,__vue_is_functional_template__$1,__vue_module_identifier__$1,void 0,void 0),cn$1=easyBem("vue-line-wrapper"),script$2={name:"LineWrapper",components:{DraggableElement:DraggableElement},props:{position:{type:String,required:!0}},computed:{classname:function(){return cn$1(_defineProperty({},this.position,!0))}}};/* script */const __vue_script__$2=script$2;/* template */var __vue_render__$2=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("DraggableElement",{class:e.classname,on:{drag:function(t){return e.$emit("drag",t)},leave:function(){return e.$emit("leave")},enter:function(){return e.$emit("enter")}}},[e._t("default")],2)},__vue_staticRenderFns__$2=[];__vue_render__$2._withStripped=!0;/* style */const __vue_inject_styles__$2=void 0,__vue_scope_id__$2=void 0,__vue_module_identifier__$2=void 0,__vue_is_functional_template__$2=!1;/* scoped */ /* component normalizer */function __vue_normalize__$2(e,t,n,i,o){const a=("function"==typeof n?n.options:n)||{};// For security concerns, we use only base name in production mode.
return a.__file="C:\\Live\\Projects\\Hot\\Vue Cropper\\vue-advanced-cropper-rollup\\src\\components\\service\\LineWrapper.vue",a.render||(a.render=e.render,a.staticRenderFns=e.staticRenderFns,a._compiled=!0,o&&(a.functional=!0)),a._scopeId=i,a}/* style inject */ /* style inject SSR */var LineWrapper=__vue_normalize__$2({render:__vue_render__$2,staticRenderFns:__vue_staticRenderFns__$2},void 0,__vue_script__$2,__vue_scope_id__$2,__vue_is_functional_template__$2,__vue_module_identifier__$2,void 0,void 0),cn$2=easyBem("vue-bounding-box"),HORIZONTAL_DIRECTIONS$1=["east","west",null],VERTICAL_DIRECTIONS$1=["south","north",null],script$3={name:"BoundingBox",props:{classname:{type:String},handlers:{type:Object,default:function(){return{eastNorth:!0,north:!0,westNorth:!0,west:!0,westSouth:!0,south:!0,eastSouth:!0,east:!0}}},handlerComponent:{type:[Object,String]},handlersClassnames:{type:Object,default:function(){return{}}},lines:{type:Object,default:function(){return{west:!0,north:!0,east:!0,south:!0}}},lineComponent:{type:[Object,String]},linesClassnames:{type:Object,default:function(){return{}}}},data:function(){var e=[];return HORIZONTAL_DIRECTIONS$1.forEach(function(t){VERTICAL_DIRECTIONS$1.forEach(function(n){if(t!==n){var i=directionNames(t,n),o=i.name,a=i.classname;e.push({name:o,classname:a,verticalDirection:n,horizontalDirection:t})}})}),{points:e}},computed:{classnames:function(){var e=this.handlersClassnames,t=this.linesClassnames;return{default:classnames(!this.disableDefaultClasses&&cn$2(),this.classname),handlers:e,lines:t}},lineNodes:function(){var e=this,t=[];return this.points.forEach(function(n){n.horizontalDirection&&n.verticalDirection||!e.lines[n.name]||t.push({name:n.name,component:e.lineComponent,classname:classnames(e.classnames.lines.default,e.classnames.lines[n.name]),hoverClassname:e.classnames.lines.hover,verticalDirection:n.verticalDirection,horizontalDirection:n.horizontalDirection})}),t},handlerNodes:function(){var e=this,t=[];return this.points.forEach(function(n){e.handlers[n.name]&&t.push({name:n.name,component:e.handlerComponent,classname:classnames(e.classnames.handlers.default,e.classnames.handlers[n.name]),hoverClassname:e.classnames.handlers.hover,verticalDirection:n.verticalDirection,horizontalDirection:n.horizontalDirection})}),t}},beforeMount:function(){window.addEventListener("mouseup",this.onMouseUp,{passive:!1}),window.addEventListener("mousemove",this.onMouseMove,{passive:!1}),window.addEventListener("touchmove",this.onTouchMove,{passive:!1}),window.addEventListener("touchend",this.onTouchEnd,{passive:!1})},beforeDestroy:function(){window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("touchend",this.onTouchEnd)},mounted:function(){this.touches=[],this.draggingAnchor=[]},methods:{onHandlerDrag:function(e,t,n){var i=e.element,o=e.anchor,a=e.position,s=e.shift(),r=s.left,l=s.top,c={left:0,right:0,top:0,bottom:0};"west"===t?c.left-=r:"east"==t&&(c.right+=r),"north"===n?c.top-=l:"south"==n&&(c.bottom+=l);var h;!n&&t?h="width":n&&!t&&(h="height"),this.$emit("resize",new ResizeEvent(e.nativeEvent,c,{allowedDirections:{left:"west"===t||!t,right:"east"===t||!t,bottom:"south"===n||!n,top:"north"===n||!n},preserveAspectRatio:e.nativeEvent.shiftKey,respectDirection:h}))}}};/* script */const __vue_script__$3=script$3;/* template */var __vue_render__$3=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"box",class:e.classnames.default},[e._t("default"),e._v(" "),n("div",e._l(e.lineNodes,function(t){return n(t.component,{key:t.name,tag:"component",attrs:{classname:t.classname,"hover-classname":t.hoverClassname,position:t.name},on:{drag:function(n){return e.onHandlerDrag(n,t.horizontalDirection,t.verticalDirection)}}})}),1),e._v(" "),n("div",e._l(e.handlerNodes,function(t){return n(t.component,{key:t.name,tag:"component",attrs:{classname:t.classname,"hover-classname":t.hoverClassname,"horizontal-position":t.horizontalDirection,"vertical-position":t.verticalDirection},on:{drag:function(n){return e.onHandlerDrag(n,t.horizontalDirection,t.verticalDirection)}}})}),1)],2)},__vue_staticRenderFns__$3=[];__vue_render__$3._withStripped=!0;/* style */const __vue_inject_styles__$3=void 0,__vue_scope_id__$3=void 0,__vue_module_identifier__$3=void 0,__vue_is_functional_template__$3=!1;/* scoped */ /* component normalizer */function __vue_normalize__$3(e,t,n,i,o){const a=("function"==typeof n?n.options:n)||{};// For security concerns, we use only base name in production mode.
return a.__file="C:\\Live\\Projects\\Hot\\Vue Cropper\\vue-advanced-cropper-rollup\\src\\components\\service\\BoundingBox.vue",a.render||(a.render=e.render,a.staticRenderFns=e.staticRenderFns,a._compiled=!0,o&&(a.functional=!0)),a._scopeId=i,a}/* style inject */ /* style inject SSR */var BoundingBox=__vue_normalize__$3({render:__vue_render__$3,staticRenderFns:__vue_staticRenderFns__$3},void 0,__vue_script__$3,__vue_scope_id__$3,__vue_is_functional_template__$3,__vue_module_identifier__$3,void 0,void 0),cn$3=easyBem("vue-draggable-container"),script$4={name:"DraggableArea",computed:{classnames:function(){return{default:classnames(cn$3(),this.classname)}}},beforeMount:function(){window.addEventListener("mouseup",this.onMouseUp,{passive:!1}),window.addEventListener("mousemove",this.onMouseMove,{passive:!1}),window.addEventListener("touchmove",this.onTouchMove,{passive:!1}),window.addEventListener("touchend",this.onTouchEnd,{passive:!1})},beforeDestroy:function(){window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("touchend",this.onTouchEnd)},mounted:function(){this.touches=[],this.draggingAnchor=[]},methods:{onTouchStart:function(t){t.cancelable&&(this.touches=_toConsumableArray(t.touches),t.touches.length&&this.initAnchor(this.touches.reduce(function(e,n){return{clientX:e.clientX+n.clientX/t.touches.length,clientY:e.clientY+n.clientY/t.touches.length}},{clientX:0,clientY:0})),t.preventDefault&&t.preventDefault(),t.stopPropagation())},onTouchEnd:function(){this.processEnd()},onTouchMove:function(t){this.touches.length&&(this.processMove(t,t.touches),t.preventDefault&&t.preventDefault(),t.stopPropagation&&t.stopPropagation())},onMouseDown:function(t){var e={fake:!0,clientX:t.clientX,clientY:t.clientY};this.touches=[e],this.initAnchor(e),t.stopPropagation()},onMouseMove:function(t){this.touches.length&&(this.processMove(t,[{fake:!0,clientX:t.clientX,clientY:t.clientY}]),t.preventDefault&&t.cancelable&&t.preventDefault())},onMouseUp:function(){this.touches=[]},initAnchor:function(e){var t=this.$refs.container,n=t.getBoundingClientRect(),i=n.left,o=n.top;this.anchor={x:e.clientX-i,y:e.clientY-o}},processMove:function(e,t){var n=this,i=_toConsumableArray(t);if(this.touches.length){var o=this.$refs.container,a=o.getBoundingClientRect(),s=a.left,r=a.top,l={width:this.width,height:this.height,left:this.left,top:this.top};if(1===this.touches.length&&1===i.length)this.$emit("move",new MoveEvent(e,{left:i[0].clientX-s-this.anchor.x,top:i[0].clientY-r-this.anchor.y}));else if(1<this.touches.length&&this.touches.length===i.length){var c=i.map(function(e,t){var i=Math.pow;return{x:e.clientX-n.touches[t].clientX,y:e.clientY-n.touches[t].clientY,position:{clientX:e.clientX,clientY:e.clientY},length:Math.sqrt(i(e.clientX-n.touches[t].clientX,2)+i(e.clientY-n.touches[t].clientY,2))}}),h=c.reduce(function(e,t){return e+t.length},0),d={left:c.reduce(function(e,t,n){return e+(1-t.length/h)*i[n].clientX},0),top:c.reduce(function(e,t,n){return e+(1-t.length/h)*i[n].clientY},0)},p={top:0,bottom:0,left:0,right:0};c.forEach(function(e,t){.25<e.length/h&&(i[t].clientY>d.top?p.bottom+=e.y:p.top-=e.y,i[t].clientX>d.left?p.right+=e.x:p.left-=e.x)}),this.$emit("resize",new ResizeEvent(e,p))}this.touches=i}},processEnd:function(){this.touches=[]}}};/* script */const __vue_script__$4=script$4;/* template */var __vue_render__$4=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"container",on:{touchstart:e.onTouchStart,mousedown:e.onMouseDown}},[e._t("default")],2)},__vue_staticRenderFns__$4=[];__vue_render__$4._withStripped=!0;/* style */const __vue_inject_styles__$4=void 0,__vue_scope_id__$4=void 0,__vue_module_identifier__$4=void 0,__vue_is_functional_template__$4=!1;/* scoped */ /* component normalizer */function __vue_normalize__$4(e,t,n,i,o){const a=("function"==typeof n?n.options:n)||{};// For security concerns, we use only base name in production mode.
return a.__file="C:\\Live\\Projects\\Hot\\Vue Cropper\\vue-advanced-cropper-rollup\\src\\components\\service\\DraggableArea.vue",a.render||(a.render=e.render,a.staticRenderFns=e.staticRenderFns,a._compiled=!0,o&&(a.functional=!0)),a._scopeId=i,a}/* style inject */ /* style inject SSR */var DraggableArea=__vue_normalize__$4({render:__vue_render__$4,staticRenderFns:__vue_staticRenderFns__$4},void 0,__vue_script__$4,__vue_scope_id__$4,__vue_is_functional_template__$4,__vue_module_identifier__$4,void 0,void 0),cn$4=easyBem("vue-preview-result"),script$5={name:"PreviewResult",props:{img:{type:String},classname:{type:String},imageClassname:{type:String},resultCoordinates:{type:Object,default:function(){return{width:0,height:0,left:0,top:0}}},stencilCoordinates:{type:Object,default:function(){return{width:0,height:0,left:0,top:0}}}},data:function(){return{imageSize:{width:0,height:0}}},inject:["getArea","getStencil"],mounted:function(){this.onChangeImage()},methods:{refreshImage:function(){var e=this.$refs.image;this.imageSize.height=e.naturalHeight,this.imageSize.width=e.naturalWidth},onChangeImage:function(){var e=this,t=this.$refs.image;t.complete?this.refreshImage():t.addEventListener("load",function(){e.refreshImage()})}},watch:{img:function(){var e=this;Vue.nextTick(function(){e.onChangeImage()})}},computed:{classnames:function(){return{default:classnames(cn$4(),this.classname),image:classnames(cn$4("image"),this.imageClassname),wrapper:cn$4("wrapper")}},wrapperStyle:function(){return{width:"".concat(this.stencilCoordinates.width,"px"),height:"".concat(this.stencilCoordinates.height,"px"),left:"calc(50% - ".concat(this.stencilCoordinates.width/2,"px)"),top:"calc(50% - ".concat(this.stencilCoordinates.height/2,"px)")}},imageStyle:function(){var e=this.stencilCoordinates.height/this.resultCoordinates.height,t=this.imageSize.height*e,n=this.imageSize.width*e;return{width:"".concat(n,"px"),height:"".concat(t,"px"),left:"".concat(-this.stencilCoordinates.left,"px"),top:"".concat(-this.stencilCoordinates.top,"px")}}}};/* script */const __vue_script__$5=script$5;/* template */var __vue_render__$5=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:e.classnames.default},[n("div",{ref:"wrapper",class:e.classnames.wrapper,style:e.wrapperStyle},[n("img",{ref:"image",class:e.classnames.image,style:e.imageStyle,attrs:{src:e.img}})])])},__vue_staticRenderFns__$5=[];__vue_render__$5._withStripped=!0;/* style */const __vue_inject_styles__$5=void 0,__vue_scope_id__$5=void 0,__vue_module_identifier__$5=void 0,__vue_is_functional_template__$5=!1;/* scoped */ /* component normalizer */function __vue_normalize__$5(e,t,n,i,o){const a=("function"==typeof n?n.options:n)||{};// For security concerns, we use only base name in production mode.
return a.__file="C:\\Live\\Projects\\Hot\\Vue Cropper\\vue-advanced-cropper-rollup\\src\\components\\service\\PreviewResult.vue",a.render||(a.render=e.render,a.staticRenderFns=e.staticRenderFns,a._compiled=!0,o&&(a.functional=!0)),a._scopeId=i,a}/* style inject */ /* style inject SSR */var PreviewResult=__vue_normalize__$5({render:__vue_render__$5,staticRenderFns:__vue_staticRenderFns__$5},void 0,__vue_script__$5,__vue_scope_id__$5,__vue_is_functional_template__$5,__vue_module_identifier__$5,void 0,void 0),cn$5=easyBem("vue-square-handler"),script$6={name:"SimpleHandler",components:{HandlerWrapper:HandlerWrapper},props:{classname:{type:String},hoverClassname:{type:String},horizontalPosition:{type:String},verticalPosition:{type:String}},computed:{classnames:function(){return{default:classnames(cn$5(_defineProperty({},this.position,!0)),this.classname,this.hover&&this.hoverClassname)}}},methods:{onDrag:function(e){this.$emit("drag",e)},onEnter:function(){this.hover=!0},onLeave:function(){this.hover=!1}}};/* script */const __vue_script__$6=script$6;/* template */var __vue_render__$6=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("HandlerWrapper",{attrs:{"vertical-position":e.verticalPosition,"horizontal-position":e.horizontalPosition},on:{drag:e.onDrag}},[n("div",{class:e.classnames.default})])},__vue_staticRenderFns__$6=[];__vue_render__$6._withStripped=!0;/* style */const __vue_inject_styles__$6=void 0,__vue_scope_id__$6=void 0,__vue_module_identifier__$6=void 0,__vue_is_functional_template__$6=!1;/* scoped */ /* component normalizer */function __vue_normalize__$6(e,t,n,i,o){const a=("function"==typeof n?n.options:n)||{};// For security concerns, we use only base name in production mode.
return a.__file="C:\\Live\\Projects\\Hot\\Vue Cropper\\vue-advanced-cropper-rollup\\src\\components\\handlers\\SimpleHandler.vue",a.render||(a.render=e.render,a.staticRenderFns=e.staticRenderFns,a._compiled=!0,o&&(a.functional=!0)),a._scopeId=i,a}/* style inject */ /* style inject SSR */var SimpleHandler=__vue_normalize__$6({render:__vue_render__$6,staticRenderFns:__vue_staticRenderFns__$6},void 0,__vue_script__$6,__vue_scope_id__$6,__vue_is_functional_template__$6,__vue_module_identifier__$6,void 0,void 0),cn$6=easyBem("vue-default-line"),script$7={name:"SimpleLine",components:{LineWrapper:LineWrapper},props:{classname:{type:String},hoverClassname:{type:String},position:{type:String}},data:function(){return{hover:!1}},computed:{classnames:function(){return{default:classnames(cn$6(_defineProperty({},this.position,!0)),this.classname,this.hover&&this.hoverClassname)}}},methods:{onDrag:function(e){this.$emit("drag",e)},onEnter:function(){this.hover=!0},onLeave:function(){this.hover=!1}}};/* script */const __vue_script__$7=script$7;/* template */var __vue_render__$7=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("LineWrapper",{attrs:{position:e.position},on:{enter:e.onEnter,leave:e.onLeave,drag:e.onDrag}},[n("div",{class:e.classnames.default})])},__vue_staticRenderFns__$7=[];__vue_render__$7._withStripped=!0;/* style */const __vue_inject_styles__$7=void 0,__vue_scope_id__$7=void 0,__vue_module_identifier__$7=void 0,__vue_is_functional_template__$7=!1;/* scoped */ /* component normalizer */function __vue_normalize__$7(e,t,n,i,o){const a=("function"==typeof n?n.options:n)||{};// For security concerns, we use only base name in production mode.
return a.__file="C:\\Live\\Projects\\Hot\\Vue Cropper\\vue-advanced-cropper-rollup\\src\\components\\lines\\SimpleLine.vue",a.render||(a.render=e.render,a.staticRenderFns=e.staticRenderFns,a._compiled=!0,o&&(a.functional=!0)),a._scopeId=i,a}/* style inject */ /* style inject SSR */var SimpleLine=__vue_normalize__$7({render:__vue_render__$7,staticRenderFns:__vue_staticRenderFns__$7},void 0,__vue_script__$7,__vue_scope_id__$7,__vue_is_functional_template__$7,__vue_module_identifier__$7,void 0,void 0),cn$7=easyBem("vue-rectangle-stencil"),script$8={name:"RectangleStencil",components:{PreviewResult:PreviewResult,BoundingBox:BoundingBox,DraggableArea:DraggableArea},props:{img:{type:String,default:null},resultCoordinates:{type:Object},stencilCoordinates:{type:Object},handlers:{type:Object},handlerComponent:{type:[Object,String],default:function(){return SimpleHandler}},handlersClassnames:{type:Object,default:function(){return{}}},lines:{type:Object},lineComponent:{type:[Object,String],default:function(){return SimpleLine}},linesClassnames:{type:Object,default:function(){return{}}},classname:{type:String},previewClassname:{type:String},boundingBoxClassname:{type:String},aspectRatio:{type:[Number,String]},minAspectRatio:{type:[Number,String]},maxAspectRatio:{type:[Number,String]}},methods:{onMove:function(e){this.$emit("move",e)},onResize:function(e){this.$emit("resize",e)},aspectRatios:function(){return{minimum:this.aspectRatio||this.minAspectRatio,maximum:this.aspectRatio||this.maxAspectRatio}}},computed:{classes:function(){return{stencil:classnames(cn$7(),this.classname),preview:classnames(cn$7("preview"),this.previewClassname),boundingBox:classnames(cn$7("bounding-box"),this.boundingBoxClassname)}},style:function(){var e=this.stencilCoordinates,t=e.height,n=e.width,i=e.left,o=e.top;return{width:"".concat(n,"px"),height:"".concat(t,"px"),left:"".concat(i,"px"),top:"".concat(o,"px")}}}};/* script */const __vue_script__$8=script$8;/* template */var __vue_render__$8=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:e.classes.stencil,style:e.style},[n("BoundingBox",{attrs:{classname:e.classes.boundingBox,handlers:e.handlers,handlerComponent:e.handlerComponent,handlersClassnames:e.handlersClassnames,lines:e.lines,lineComponent:e.lineComponent,linesClassnames:e.linesClassnames},on:{resize:e.onResize}},[n("DraggableArea",{on:{move:e.onMove}},[n("PreviewResult",{attrs:{img:e.img,classname:e.classes.preview,resultCoordinates:e.resultCoordinates,stencilCoordinates:e.stencilCoordinates}})],1)],1)],1)},__vue_staticRenderFns__$8=[];__vue_render__$8._withStripped=!0;/* style */const __vue_inject_styles__$8=void 0,__vue_scope_id__$8=void 0,__vue_module_identifier__$8=void 0,__vue_is_functional_template__$8=!1;/* scoped */ /* component normalizer */function __vue_normalize__$8(e,t,n,i,o){const a=("function"==typeof n?n.options:n)||{};// For security concerns, we use only base name in production mode.
return a.__file="C:\\Live\\Projects\\Hot\\Vue Cropper\\vue-advanced-cropper-rollup\\src\\components\\stencils\\RectangleStencil.vue",a.render||(a.render=e.render,a.staticRenderFns=e.staticRenderFns,a._compiled=!0,o&&(a.functional=!0)),a._scopeId=i,a}/* style inject */ /* style inject SSR */var RectangleStencil=__vue_normalize__$8({render:__vue_render__$8,staticRenderFns:__vue_staticRenderFns__$8},void 0,__vue_script__$8,__vue_scope_id__$8,__vue_is_functional_template__$8,__vue_module_identifier__$8,void 0,void 0),cn$8=easyBem("vue-round-stencil"),script$9={name:"RoundStencil",components:{PreviewResult:PreviewResult,BoundingBox:BoundingBox,DraggableArea:DraggableArea},props:{img:{type:String},stencilClass:{type:String},resultCoordinates:{type:Object},stencilCoordinates:{type:Object},handlers:{type:Object,default:function(){return{eastNorth:!0,westNorth:!0,westSouth:!0,eastSouth:!0}}},handlerComponent:{type:[Object,String],default:function(){return SimpleHandler}},handlersClassnames:{type:Object,default:function(){return{}}},lines:{type:Object},lineComponent:{type:[Object,String],default:function(){return SimpleLine}},linesClassnames:{type:Object,default:function(){return{}}},classname:{type:String},previewClassname:{type:String},boundingBoxClassname:{type:String}},methods:{onMove:function(e){this.$emit("move",e)},onResize:function(e){this.$emit("resize",e)},aspectRatios:function(){return{minimum:1,maximum:1}}},computed:{classes:function(){return{stencil:classnames(cn$8(),this.classname),preview:classnames(cn$8("preview"),this.previewClassname),boundingBox:classnames(cn$8("bounding-box"),this.boundingBox)}},style:function(){var e=this.stencilCoordinates,t=e.height,n=e.width,i=e.left,o=e.top;return{width:"".concat(n,"px"),height:"".concat(t,"px"),left:"".concat(i,"px"),top:"".concat(o,"px")}}}};/* script */const __vue_script__$9=script$9;/* template */var __vue_render__$9=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:e.classes.stencil,style:e.style},[n("BoundingBox",{attrs:{classname:e.classes.boundingBox,handlers:e.handlers,handlerComponent:e.handlerComponent,handlersClassnames:e.handlersClassnames,lines:e.lines,lineComponent:e.lineComponent,linesClassnames:e.linesClassnames},on:{resize:e.onResize}},[n("DraggableArea",{on:{move:e.onMove}},[n("PreviewResult",{attrs:{img:e.img,classname:e.classes.preview,resultCoordinates:e.resultCoordinates,stencilCoordinates:e.stencilCoordinates}})],1)],1)],1)},__vue_staticRenderFns__$9=[];__vue_render__$9._withStripped=!0;/* style */const __vue_inject_styles__$9=void 0,__vue_scope_id__$9=void 0,__vue_module_identifier__$9=void 0,__vue_is_functional_template__$9=!1;/* scoped */ /* component normalizer */function __vue_normalize__$9(e,t,n,i,o){const a=("function"==typeof n?n.options:n)||{};// For security concerns, we use only base name in production mode.
return a.__file="C:\\Live\\Projects\\Hot\\Vue Cropper\\vue-advanced-cropper-rollup\\src\\components\\stencils\\CircleStencil.vue",a.render||(a.render=e.render,a.staticRenderFns=e.staticRenderFns,a._compiled=!0,o&&(a.functional=!0)),a._scopeId=i,a}/* style inject */ /* style inject SSR */var CircleStencil=__vue_normalize__$9({render:__vue_render__$9,staticRenderFns:__vue_staticRenderFns__$9},void 0,__vue_script__$9,__vue_scope_id__$9,__vue_is_functional_template__$9,__vue_module_identifier__$9,void 0,void 0),cn$9=easyBem("vue-advanced-cropper"),script$a={name:"Cropper",props:{src:{type:String,default:null},resizeAlgorithm:{type:Function,default:resize},moveAlgorithm:{type:Function,default:move},defaultSize:{type:Function,default:defaultSize},defaultPosition:{type:Function,default:defaultPosition},areaSize:{type:Function,default:areaSize},minWidth:{type:[Number,String],default:10},minHeight:{type:[Number,String],default:10},maxWidth:{type:[Number,String],default:100},maxHeight:{type:[Number,String],default:100},stencilComponent:{type:[Object,String],default:function(){return RectangleStencil}},stencilProps:{type:Object,default:function(){return{}}},classname:{type:String},imageClassname:{type:String},areaClassname:{type:String},backgroundClassname:{type:String},debounce:{type:Number,default:500},canvas:{type:Boolean,default:!0},checkCrossOrigin:{type:Boolean,default:!0}},provide:function(){return{getArea:this.getArea,getStencil:this.getStencil}},data:function(){return{boundarySize:{width:null,height:null},imageAttributes:{crossOrigin:!1},imageSize:{width:null,height:null},coordinates:{left:0,top:0,width:0,height:0}}},computed:{imageLoaded:function(){return 0<this.imageSize.width&&0<this.imageSize.height},coefficient:function(){return this.imageSize.width?this.imageSize.width/this.boundarySize.width:0},classes:function(){return{cropper:classnames(cn$9(),this.classname),image:classnames(cn$9("image"),this.imageClassname),area:classnames(cn$9("area"),this.areaClassname),stretcher:classnames(cn$9("stretcher")),background:classnames(cn$9("background"),this.backgroundClassname)}},stencilCoordinates:function(){var e=this.coordinates,t=e.width,n=e.height,i=e.left,o=e.top;return{width:t/this.coefficient,height:n/this.coefficient,left:i/this.coefficient,top:o/this.coefficient}},wrapperStyle:function(){return{width:"".concat(this.stencilCoordinates.width,"px"),height:"".concat(this.stencilCoordinates.height,"px"),left:"".concat(this.stencilCoordinates.left,"px"),top:"".concat(this.stencilCoordinates.top,"px")}},areaStyle:function(){return{width:this.boundarySize.width?"".concat(this.boundarySize.width,"px"):"auto",height:this.boundarySize.height?"".concat(this.boundarySize.height,"px"):"auto",opacity:this.imageLoaded?1:0}},imageStyle:function(){var e={};return this.imageSize.width>this.imageSize.height?(e.width="100%",e.left=0,e.top="50%",e.transform="translateY(-50%)"):(e.height="100%",e.top=0,e.left="50%",e.transform="translateX(-50%)"),this.imageSize.width&&this.imageSize.height||(e.opacity=0),e},restrictions:function(){return{minHeight:this.imageSize.height*this.minHeight/100,minWidth:this.imageSize.width*this.minWidth/100,maxHeight:this.imageSize.height*this.maxHeight/100,maxWidth:this.imageSize.width*this.maxWidth/100}}},mounted:function(){this.debouncedUpdateCoordinates=debounce_1(this.updateCoordinates,this.debounce),this.src&&this.onChangeImage(),window.addEventListener("resize",this.refreshImage),window.addEventListener("orientationchange",this.refreshImage)},destroyed:function(){window.removeEventListener("resize",this.refreshImage),window.removeEventListener("orientationchange",this.refreshImage)},watch:{src:function(){var e=this;Vue.nextTick(function(){e.onChangeImage()})}},methods:{// External methods
getResult:function(){return this.canvas?(this.updateCanvas(this.coordinates),{coordinates:_objectSpread({},this.coordinates),canvas:this.$refs.canvas}):{coordinates:_objectSpread({},this.coordinates)}},// Internal methods
getArea:function(){return this.$refs.area},getStencil:function(){return this.$refs.stencil},updateCanvas:function(e){// This function can be asynchronously called because it's debounced
// Therefore there is workaround to prevent processing after the component was unmounted
if(this.$refs.canvas){var t=this.$refs.canvas;t.width=e.width,t.height=e.height;var n=t.getContext("2d"),i=this.$refs.image;n.drawImage(i,e.left,e.top,e.width,e.height,0,0,e.width,e.height)}},updateCoordinates:function(){this.$emit("change",this.getResult())},onChangeCoordinates:function(e){this.coordinates=e,this.$listeners&&this.$listeners.change&&this.debouncedUpdateCoordinates(e)},onChangeImage:function(){var e=this,t=this.$refs.image;!this.canvas||!1!==this.checkCrossOrigin||/^data:/.test(this.src)||/^blob:/.test(this.src)||isCrossOriginURL(this.src)||(this.imageAttributes.crossOrigin="anonymous"),t&&(t.complete?this.refreshImage().then(this.resetCoordinates):t.addEventListener("load",function(){e.$refs.image&&e.refreshImage().then(e.resetCoordinates)}))},onResize:function(e){this.onChangeCoordinates(this.resizeAlgorithm(this.coordinates,this.restrictions,this.imageSize,this.coefficient,this.stencilAspectRatios(),e))},onMove:function(e){this.onChangeCoordinates(this.moveAlgorithm(this.coordinates,this.imageSize,this.coefficient,e))},resetCoordinates:function(){// This function can be asynchronously called after completion of refreshing image promise
// Therefore there is a workaround to prevent processing after the component was unmounted
if(this.$refs.image){var e=this.$refs.cropper,t=this.$refs.image,n=this.imageSize,i=this.restrictions,o=i.minWidth,a=i.minHeight,s=i.maxWidth,r=i.maxHeight,l=this.stencilAspectRatios(),c=this.coefficient,h={};if(o*l.minimum<a?(h.height=a,h.width=l.maximum?a*l.maximum:o):(h.width=o,h.height=l.minimum?o*l.minimum:a),h.height<a||h.height>r)throw"Current aspect ratio can't is uncompatible with minimum/maximum height and width settings. Can't setup default coordinates";h.left=n.width/2-h.width/2,h.top=n.height/2-h.height/2;var d=this.defaultSize(e,t,this.$props);h=this.resizeAlgorithm(h,this.restrictions,n,c,l,new ResizeEvent(null,{left:(d.width-h.width)/(2*c),right:(d.width-h.width)/(2*c),top:(d.height-h.height)/(2*c),bottom:(d.height-h.height)/(2*c)}));var p=this.defaultPosition(e,t,h.width,h.height,this.$props);h=this.moveAlgorithm(h,n,c,new MoveEvent(null,{left:(p.left-h.left)/c,top:(p.top-h.top)/c})),this.onChangeCoordinates(h)}},refreshImage:function(){var e=this,t=this.$refs.image,n=this.$refs.stretcher,i=this.$refs.cropper,o=t.naturalWidth/t.naturalHeight;return t.naturalHeight>t.naturalWidth?(n.style.height="".concat(t.naturalHeight,"px"),n.style.width="".concat(n.clientHeight*o,"px"),n.clientWidth/n.clientHeight!==o&&(n.style.height="".concat(n.clientWidth/o,"px"))):(n.style.width="".concat(t.naturalWidth,"px"),n.style.height="".concat(n.clientWidth/o,"px"),n.clientHeight/n.clientWidth!==o&&(n.style.width="".concat(n.clientHeight*o,"px"))),new Promise(function(t){var n=e.$refs.cropper,i=e.$refs.image;e.imageSize.height=i.naturalHeight,e.imageSize.width=i.naturalWidth,Vue.nextTick(function(){var o=e.areaSize(n,i),a=o.height,s=o.width;a&&(e.boundarySize.height=a),s&&(e.boundarySize.width=s),t()})})},stencilAspectRatios:function(){return this.$refs.stencil.aspectRatios?this.$refs.stencil.aspectRatios():{minimum:this.stencilProps.aspectRatio||this.stencilProps.minAspectRatio,maximum:this.stencilProps.aspectRatio||this.stencilProps.maxAspectRatio}}}};/* script */const __vue_script__$a=script$a;/* template */var __vue_render__$a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"cropper",class:e.classes.cropper},[n("div",{class:e.classes.background,style:e.areaStyle}),e._v(" "),n("div",{ref:"stretcher",class:e.classes.stretcher}),e._v(" "),n("div",{ref:"area",class:e.classes.area,style:e.areaStyle},[n("img",{ref:"image",class:e.classes.image,style:e.imageStyle,attrs:{crossOrigin:e.imageAttributes.crossOrigin,src:e.src}}),e._v(" "),e.imageLoaded?n(e.stencilComponent,e._b({ref:"stencil",tag:"component",attrs:{img:e.src,"result-coordinates":e.coordinates,"stencil-coordinates":e.stencilCoordinates},on:{resize:e.onResize,move:e.onMove}},"component",e.stencilProps,!1)):e._e(),e._v(" "),e.canvas?n("canvas",{ref:"canvas",style:{display:"none"}}):e._e()],1)])},__vue_staticRenderFns__$a=[];__vue_render__$a._withStripped=!0;/* style */const __vue_inject_styles__$a=void 0,__vue_scope_id__$a=void 0,__vue_module_identifier__$a=void 0,__vue_is_functional_template__$a=!1;/* scoped */ /* component normalizer */function __vue_normalize__$a(e,t,n,i,o){const a=("function"==typeof n?n.options:n)||{};// For security concerns, we use only base name in production mode.
return a.__file="C:\\Live\\Projects\\Hot\\Vue Cropper\\vue-advanced-cropper-rollup\\src\\Cropper.vue",a.render||(a.render=e.render,a.staticRenderFns=e.staticRenderFns,a._compiled=!0,o&&(a.functional=!0)),a._scopeId=i,a}/* style inject */ /* style inject SSR */var Cropper=__vue_normalize__$a({render:__vue_render__$a,staticRenderFns:__vue_staticRenderFns__$a},void 0,__vue_script__$a,__vue_scope_id__$a,__vue_is_functional_template__$a,__vue_module_identifier__$a,void 0,void 0),cn$a=easyBem("vue-preview-image"),script$b={name:"PreviewImage",props:{img:{type:String},classname:{type:String},imageClassname:{type:String},width:{type:Number},height:{type:Number},top:{type:Number},left:{type:Number},previewWidth:{type:Number,required:!0},previewHeight:{type:Number,required:!0}},data:function(){return{imageSize:{width:0,height:0}}},mounted:function(){this.onChangeImage()},methods:{refreshImage:function(){var e=this.$refs.image;this.imageSize.height=e.naturalHeight,this.imageSize.width=e.naturalWidth},onChangeImage:function(){var e=this,t=this.$refs.image;t.complete?this.refreshImage():t.addEventListener("load",function(){e.refreshImage()})}},watch:{img:function(){this.onChangeImage()}},computed:{classnames:function(){return{default:classnames(cn$a(),this.classname),image:classnames(cn$a("image"),this.imageClassname)}},wrapperStyle:function(){return{width:"".concat(this.previewWidth,"px"),height:"".concat(this.previewHeight,"px")}},imageStyle:function(){var e=this.previewHeight/this.height,t=this.imageSize.height*e,n=this.imageSize.width*e;return{width:"".concat(n,"px"),height:"".concat(t,"px"),left:"".concat(-this.left*e,"px"),top:"".concat(-this.top*e,"px")}}}};/* script */const __vue_script__$b=script$b;/* template */var __vue_render__$b=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:e.classnames.default,style:e.wrapperStyle},[n("img",{ref:"image",class:e.classnames.image,style:e.imageStyle,attrs:{src:e.img}})])},__vue_staticRenderFns__$b=[];__vue_render__$b._withStripped=!0;/* style */const __vue_inject_styles__$b=void 0,__vue_scope_id__$b=void 0,__vue_module_identifier__$b=void 0,__vue_is_functional_template__$b=!1;/* scoped */ /* component normalizer */function __vue_normalize__$b(e,t,n,i,o){const a=("function"==typeof n?n.options:n)||{};// For security concerns, we use only base name in production mode.
return a.__file="C:\\Live\\Projects\\Hot\\Vue Cropper\\vue-advanced-cropper-rollup\\src\\components\\helpers\\PreviewImage.vue",a.render||(a.render=e.render,a.staticRenderFns=e.staticRenderFns,a._compiled=!0,o&&(a.functional=!0)),a._scopeId=i,a}/* style inject */ /* style inject SSR */var PreviewImage=__vue_normalize__$b({render:__vue_render__$b,staticRenderFns:__vue_staticRenderFns__$b},void 0,__vue_script__$b,__vue_scope_id__$b,__vue_is_functional_template__$b,__vue_module_identifier__$b,void 0,void 0);Vue.component("cropper",Cropper),Vue.component("rectangle-stencil",RectangleStencil),Vue.component("circle-stencil",CircleStencil),Vue.component("simple-handler",SimpleHandler),Vue.component("simple-line",SimpleLine);export{BoundingBox,CircleStencil,Cropper,DragEvent,DraggableArea,DraggableElement,HandlerWrapper,LineWrapper,MoveEvent,PreviewImage,PreviewResult,RectangleStencil,ResizeEvent,SimpleHandler,SimpleLine};

function styleInject(id, css) {
	if (!css || typeof document === 'undefined') { return; }

	var element;
	var head = document.head || document.getElementsByTagName('head')[0];
	var styleElements  = head.getElementsByTagName('style');

	// To prevent dublicate of the style code during the script reload
	for (var i = 0; i < styleElements.length; i++) {
		if (styleElements[i].innerText.startsWith('/*for=' + id)) {
			element = styleElements[i];
		}
	}

	if (!element) {
		element = document.createElement('style');
		element.type = 'text/css';
		head.insertBefore(element, styleElements[0] || head.firstChild);
	}

	if (element.styleSheet) {
		element.styleSheet.cssText = css;
	} else {
		var text = document.createTextNode('/*for=' + id + '*/' + css);
		element.innerHTML = "";
		element.appendChild(text);
	}
};
styleInject("vue-advanced-cropper", ".vue-advanced-cropper {  text-align: center;  position: relative;  overflow: hidden;  -webkit-user-select: none;     -moz-user-select: none;      -ms-user-select: none;          user-select: none;  max-height: 100%;  max-width: 100%;}.vue-advanced-cropper__stretcher {    pointer-events: none;    position: relative;    max-width: 100%;    max-height: 100%;}.vue-advanced-cropper__image {    opacity: 0.5;    -webkit-user-select: none;       -moz-user-select: none;        -ms-user-select: none;            user-select: none;    position: absolute;}.vue-advanced-cropper__area {    position: absolute;    left: 50%;    -webkit-transform: translate(-50%, -50%);            transform: translate(-50%, -50%);    -webkit-transition: opacity 0.5s;    transition: opacity 0.5s;    top: 50%;}.vue-advanced-cropper__background {    position: absolute;    background: black;    -webkit-transition: opacity 0.5s;    transition: opacity 0.5s;    top: 50%;    left: 50%;    -webkit-transform: translate(-50%, -50%);            transform: translate(-50%, -50%);}.vue-advanced-cropper__stencil-wrapper {    position: absolute;}/*# sourceMappingURL=Cropper.vue.map */.vue-rectangle-stencil {  position: absolute;  height: 100%;  width: 100%;  -webkit-box-sizing: border-box;          box-sizing: border-box;  cursor: move;}/*# sourceMappingURL=RectangleStencil.vue.map */.vue-round-stencil {  position: absolute;  height: 100%;  width: 100%;  -webkit-box-sizing: content-box;          box-sizing: content-box;  cursor: move;}.vue-round-stencil__preview {    border-radius: 50%;}/*# sourceMappingURL=CircleStencil.vue.map */.vue-default-line {  background: none;  -webkit-transition: border 0.5s;  transition: border 0.5s;  border-color: rgba(255, 255, 255, 0.3);  border-width: 0px;  border-style: solid;}.vue-default-line--south, .vue-default-line--north {    height: 0;    width: 100%;}.vue-default-line--east, .vue-default-line--west {    height: 100%;    width: 0;}.vue-default-line--east {    border-right-width: 1px;}.vue-default-line--west {    border-left-width: 1px;}.vue-default-line--south {    border-top-width: 1px;}.vue-default-line--north {    border-bottom-width: 1px;}.vue-default-line--hover {    opacity: 1;    border-color: white;}/*# sourceMappingURL=SimpleLine.vue.map */.vue-handler-wrapper {  position: absolute;  -webkit-transform: translate(-50%, -50%);          transform: translate(-50%, -50%);}.vue-handler-wrapper__draggable {    width: 30px;    height: 30px;    display: -webkit-box;    display: -ms-flexbox;    display: flex;    -webkit-box-align: center;        -ms-flex-align: center;            align-items: center;    -webkit-box-pack: center;        -ms-flex-pack: center;            justify-content: center;}.vue-handler-wrapper--west-north {    left: 0;    top: 0;    cursor: nw-resize;}.vue-handler-wrapper--north {    left: 50%;    top: 0;    cursor: n-resize;}.vue-handler-wrapper--east-north {    left: 100%;    top: 0;    cursor: ne-resize;}.vue-handler-wrapper--east {    left: 100%;    top: 50%;    cursor: e-resize;}.vue-handler-wrapper--east-south {    left: 100%;    top: 100%;    cursor: se-resize;}.vue-handler-wrapper--south {    left: 50%;    top: 100%;    cursor: s-resize;}.vue-handler-wrapper--west-south {    left: 0;    top: 100%;    cursor: sw-resize;}.vue-handler-wrapper--west {    left: 0;    top: 50%;    cursor: w-resize;}/*# sourceMappingURL=HandlerWrapper.vue.map */.vue-line-wrapper {  background: none;  position: absolute;  display: -webkit-box;  display: -ms-flexbox;  display: flex;  -webkit-box-align: center;      -ms-flex-align: center;          align-items: center;  -webkit-box-pack: center;      -ms-flex-pack: center;          justify-content: center;}.vue-line-wrapper--north, .vue-line-wrapper--south {    height: 12px;    width: 100%;    left: 0;    -webkit-transform: translateY(-50%);            transform: translateY(-50%);}.vue-line-wrapper--north {    top: 0;    cursor: n-resize;}.vue-line-wrapper--south {    top: 100%;    cursor: s-resize;}.vue-line-wrapper--east, .vue-line-wrapper--west {    width: 12px;    height: 100%;    -webkit-transform: translateX(-50%);            transform: translateX(-50%);    top: 0;}.vue-line-wrapper--east {    left: 100%;    cursor: e-resize;}.vue-line-wrapper--west {    left: 0;    cursor: w-resize;}/*# sourceMappingURL=LineWrapper.vue.map */.vue-bounding-box {  position: relative;  height: 100%;  width: 100%;}.vue-bounding-box__line {    position: absolute;}.vue-bounding-box__line--north {      top: 0;      width: 100%;      cursor: n-resize;}.vue-bounding-box__line--east {      left: 100%;      top: 0;      height: 100%;      cursor: e-resize;}.vue-bounding-box__line--south {      top: 100%;      width: 100%;      cursor: s-resize;}.vue-bounding-box__line--west {      left: 0;      top: 0;      height: 100%;      cursor: w-resize;}/*# sourceMappingURL=BoundingBox.vue.map */.vue-draggable-area {  position: relative;}/*# sourceMappingURL=DraggableArea.vue.map */.vue-preview-result {  overflow: hidden;  -webkit-box-sizing: border-box;          box-sizing: border-box;  position: absolute;  height: 100%;  width: 100%;}.vue-preview-result__wrapper {    position: absolute;}.vue-preview-result__image {    pointer-events: none;    position: absolute;    -webkit-user-select: none;       -moz-user-select: none;        -ms-user-select: none;            user-select: none;    max-width: unset !important;}/*# sourceMappingURL=PreviewResult.vue.map */.vue-square-handler {  display: block;  background: white;  height: 10px;  width: 10px;}/*# sourceMappingURL=SimpleHandler.vue.map */.vue-preview-image {  overflow: hidden;  position: relative;}.vue-preview-image__image {    pointer-events: none;    position: absolute;    max-width: unset !important;}/*# sourceMappingURL=PreviewImage.vue.map */");//# sourceMappingURL=index.es.js.map
